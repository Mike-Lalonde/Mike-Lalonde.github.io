var $m=h=>{throw TypeError(h)};var Ah=(h,t,e)=>t.has(h)||$m("Cannot "+e);var Zt=(h,t,e)=>(Ah(h,t,"read from private field"),e?e.call(h):t.get(h)),Fn=(h,t,e)=>t.has(h)?$m("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),Xe=(h,t,e,i)=>(Ah(h,t,"write to private field"),i?i.call(h,e):t.set(h,e),e),zn=(h,t,e)=>(Ah(h,t,"access private method"),e);var Qm=(h,t,e,i)=>({set _(a){Xe(h,t,a,e)},get _(){return Zt(h,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Yl(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Sh={exports:{}},Rr={};var Zm;function dS(){if(Zm)return Rr;Zm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Rr.Fragment=t,Rr.jsx=e,Rr.jsxs=e,Rr}var Jm;function fS(){return Jm||(Jm=1,Sh.exports=dS()),Sh.exports}var B=fS(),Eh={exports:{}},bt={};var ty;function gS(){if(ty)return bt;ty=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function w(O,K,tt){this.props=O,this.context=K,this.refs=_,this.updater=tt||E}w.prototype.isReactComponent={},w.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},w.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function x(){}x.prototype=w.prototype;function T(O,K,tt){this.props=O,this.context=K,this.refs=_,this.updater=tt||E}var M=T.prototype=new x;M.constructor=T,S(M,w.prototype),M.isPureReactComponent=!0;var N=Array.isArray;function R(){}var D={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function U(O,K,tt){var it=tt.ref;return{$$typeof:h,type:O,key:K,ref:it!==void 0?it:null,props:tt}}function q(O,K){return U(O.type,K,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===h}function Z(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(tt){return K[tt]})}var et=/\/+/g;function J(O,K){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):K.toString(36)}function ot(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function F(O,K,tt,it,ut){var dt=typeof O;(dt==="undefined"||dt==="boolean")&&(O=null);var st=!1;if(O===null)st=!0;else switch(dt){case"bigint":case"string":case"number":st=!0;break;case"object":switch(O.$$typeof){case h:case t:st=!0;break;case p:return st=O._init,F(st(O._payload),K,tt,it,ut)}}if(st)return ut=ut(O),st=it===""?"."+J(O,0):it,N(ut)?(tt="",st!=null&&(tt=st.replace(et,"$&/")+"/"),F(ut,K,tt,"",function(Oe){return Oe})):ut!=null&&(V(ut)&&(ut=q(ut,tt+(ut.key==null||O&&O.key===ut.key?"":(""+ut.key).replace(et,"$&/")+"/")+st)),K.push(ut)),1;st=0;var Ct=it===""?".":it+":";if(N(O))for(var Et=0;Et<O.length;Et++)it=O[Et],dt=Ct+J(it,Et),st+=F(it,K,tt,dt,ut);else if(Et=v(O),typeof Et=="function")for(O=Et.call(O),Et=0;!(it=O.next()).done;)it=it.value,dt=Ct+J(it,Et++),st+=F(it,K,tt,dt,ut);else if(dt==="object"){if(typeof O.then=="function")return F(ot(O),K,tt,it,ut);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return st}function Y(O,K,tt){if(O==null)return O;var it=[],ut=0;return F(O,it,"","",function(dt){return K.call(tt,dt,ut++)}),it}function nt(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(tt){(O._status===0||O._status===-1)&&(O._status=1,O._result=tt)},function(tt){(O._status===0||O._status===-1)&&(O._status=2,O._result=tt)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var ct=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},yt={map:Y,forEach:function(O,K,tt){Y(O,function(){K.apply(this,arguments)},tt)},count:function(O){var K=0;return Y(O,function(){K++}),K},toArray:function(O){return Y(O,function(K){return K})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return bt.Activity=y,bt.Children=yt,bt.Component=w,bt.Fragment=e,bt.Profiler=a,bt.PureComponent=T,bt.StrictMode=i,bt.Suspense=d,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,bt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},bt.cache=function(O){return function(){return O.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(O,K,tt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var it=S({},O.props),ut=O.key;if(K!=null)for(dt in K.key!==void 0&&(ut=""+K.key),K)!z.call(K,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&K.ref===void 0||(it[dt]=K[dt]);var dt=arguments.length-2;if(dt===1)it.children=tt;else if(1<dt){for(var st=Array(dt),Ct=0;Ct<dt;Ct++)st[Ct]=arguments[Ct+2];it.children=st}return U(O.type,ut,it)},bt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},bt.createElement=function(O,K,tt){var it,ut={},dt=null;if(K!=null)for(it in K.key!==void 0&&(dt=""+K.key),K)z.call(K,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(ut[it]=K[it]);var st=arguments.length-2;if(st===1)ut.children=tt;else if(1<st){for(var Ct=Array(st),Et=0;Et<st;Et++)Ct[Et]=arguments[Et+2];ut.children=Ct}if(O&&O.defaultProps)for(it in st=O.defaultProps,st)ut[it]===void 0&&(ut[it]=st[it]);return U(O,dt,ut)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(O){return{$$typeof:u,render:O}},bt.isValidElement=V,bt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:nt}},bt.memo=function(O,K){return{$$typeof:f,type:O,compare:K===void 0?null:K}},bt.startTransition=function(O){var K=D.T,tt={};D.T=tt;try{var it=O(),ut=D.S;ut!==null&&ut(tt,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(R,ct)}catch(dt){ct(dt)}finally{K!==null&&tt.types!==null&&(K.types=tt.types),D.T=K}},bt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},bt.use=function(O){return D.H.use(O)},bt.useActionState=function(O,K,tt){return D.H.useActionState(O,K,tt)},bt.useCallback=function(O,K){return D.H.useCallback(O,K)},bt.useContext=function(O){return D.H.useContext(O)},bt.useDebugValue=function(){},bt.useDeferredValue=function(O,K){return D.H.useDeferredValue(O,K)},bt.useEffect=function(O,K){return D.H.useEffect(O,K)},bt.useEffectEvent=function(O){return D.H.useEffectEvent(O)},bt.useId=function(){return D.H.useId()},bt.useImperativeHandle=function(O,K,tt){return D.H.useImperativeHandle(O,K,tt)},bt.useInsertionEffect=function(O,K){return D.H.useInsertionEffect(O,K)},bt.useLayoutEffect=function(O,K){return D.H.useLayoutEffect(O,K)},bt.useMemo=function(O,K){return D.H.useMemo(O,K)},bt.useOptimistic=function(O,K){return D.H.useOptimistic(O,K)},bt.useReducer=function(O,K,tt){return D.H.useReducer(O,K,tt)},bt.useRef=function(O){return D.H.useRef(O)},bt.useState=function(O){return D.H.useState(O)},bt.useSyncExternalStore=function(O,K,tt){return D.H.useSyncExternalStore(O,K,tt)},bt.useTransition=function(){return D.H.useTransition()},bt.version="19.2.4",bt}var ey;function wd(){return ey||(ey=1,Eh.exports=gS()),Eh.exports}var P=wd();const pS=Yl(P);var wh={exports:{}},Mr={},_h={exports:{}},Ch={};var ny;function mS(){return ny||(ny=1,(function(h){function t(F,Y){var nt=F.length;F.push(Y);t:for(;0<nt;){var ct=nt-1>>>1,yt=F[ct];if(0<a(yt,Y))F[ct]=Y,F[nt]=yt,nt=ct;else break t}}function e(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var Y=F[0],nt=F.pop();if(nt!==Y){F[0]=nt;t:for(var ct=0,yt=F.length,O=yt>>>1;ct<O;){var K=2*(ct+1)-1,tt=F[K],it=K+1,ut=F[it];if(0>a(tt,nt))it<yt&&0>a(ut,tt)?(F[ct]=ut,F[it]=nt,ct=it):(F[ct]=tt,F[K]=nt,ct=K);else if(it<yt&&0>a(ut,nt))F[ct]=ut,F[it]=nt,ct=it;else break t}}return Y}function a(F,Y){var nt=F.sortIndex-Y.sortIndex;return nt!==0?nt:F.id-Y.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,y=null,b=3,v=!1,E=!1,S=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(F){for(var Y=e(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=F)i(f),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=e(f)}}function N(F){if(S=!1,M(F),!E)if(e(d)!==null)E=!0,R||(R=!0,Z());else{var Y=e(f);Y!==null&&ot(N,Y.startTime-F)}}var R=!1,D=-1,z=5,U=-1;function q(){return _?!0:!(h.unstable_now()-U<z)}function V(){if(_=!1,R){var F=h.unstable_now();U=F;var Y=!0;try{t:{E=!1,S&&(S=!1,x(D),D=-1),v=!0;var nt=b;try{e:{for(M(F),y=e(d);y!==null&&!(y.expirationTime>F&&q());){var ct=y.callback;if(typeof ct=="function"){y.callback=null,b=y.priorityLevel;var yt=ct(y.expirationTime<=F);if(F=h.unstable_now(),typeof yt=="function"){y.callback=yt,M(F),Y=!0;break e}y===e(d)&&i(d),M(F)}else i(d);y=e(d)}if(y!==null)Y=!0;else{var O=e(f);O!==null&&ot(N,O.startTime-F),Y=!1}}break t}finally{y=null,b=nt,v=!1}Y=void 0}}finally{Y?Z():R=!1}}}var Z;if(typeof T=="function")Z=function(){T(V)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,J=et.port2;et.port1.onmessage=V,Z=function(){J.postMessage(null)}}else Z=function(){w(V,0)};function ot(F,Y){D=w(function(){F(h.unstable_now())},Y)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(F){F.callback=null},h.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(F){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var nt=b;b=Y;try{return F()}finally{b=nt}},h.unstable_requestPaint=function(){_=!0},h.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var nt=b;b=F;try{return Y()}finally{b=nt}},h.unstable_scheduleCallback=function(F,Y,nt){var ct=h.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ct+nt:ct):nt=ct,F){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=nt+yt,F={id:p++,callback:Y,priorityLevel:F,startTime:nt,expirationTime:yt,sortIndex:-1},nt>ct?(F.sortIndex=nt,t(f,F),e(d)===null&&F===e(f)&&(S?(x(D),D=-1):S=!0,ot(N,nt-ct))):(F.sortIndex=yt,t(d,F),E||v||(E=!0,R||(R=!0,Z()))),F},h.unstable_shouldYield=q,h.unstable_wrapCallback=function(F){var Y=b;return function(){var nt=b;b=Y;try{return F.apply(this,arguments)}finally{b=nt}}}})(Ch)),Ch}var iy;function yS(){return iy||(iy=1,_h.exports=mS()),_h.exports}var Th={exports:{}},De={};var sy;function bS(){if(sy)return De;sy=1;var h=wd();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,De.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},De.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},De.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},De.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},De.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):p==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},De.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},De.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},De.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},De.requestFormReset=function(d){i.d.r(d)},De.unstable_batchedUpdates=function(d,f){return d(f)},De.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},De.useFormStatus=function(){return l.H.useHostTransitionStatus()},De.version="19.2.4",De}var ay;function vS(){if(ay)return Th.exports;ay=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Th.exports=bS(),Th.exports}var ry;function AS(){if(ry)return Mr;ry=1;var h=yS(),t=wd(),e=vS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function l(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var r=n,c=s;;){var g=r.return;if(g===null)break;var m=g.alternate;if(m===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===r)return d(g),n;if(m===c)return d(g),s;m=m.sibling}throw Error(i(188))}if(r.return!==c.return)r=g,c=m;else{for(var A=!1,C=g.child;C;){if(C===r){A=!0,r=g,c=m;break}if(C===c){A=!0,c=g,r=m;break}C=C.sibling}if(!A){for(C=m.child;C;){if(C===r){A=!0,r=m,c=g;break}if(C===c){A=!0,c=m,r=g;break}C=C.sibling}if(!A)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var et=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===et?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case w:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case T:return n.displayName||"Context";case x:return(n._context.displayName||"Context")+".Consumer";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:J(n.type)||"Memo";case z:s=n._payload,n=n._init;try{return J(n(s))}catch{}}return null}var ot=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},ct=[],yt=-1;function O(n){return{current:n}}function K(n){0>yt||(n.current=ct[yt],ct[yt]=null,yt--)}function tt(n,s){yt++,ct[yt]=n.current,n.current=s}var it=O(null),ut=O(null),dt=O(null),st=O(null);function Ct(n,s){switch(tt(dt,s),tt(ut,n),tt(it,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?vm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=vm(s),n=Am(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(it),tt(it,n)}function Et(){K(it),K(ut),K(dt)}function Oe(n){n.memoizedState!==null&&tt(st,n);var s=it.current,r=Am(s,n.type);s!==r&&(tt(ut,n),tt(it,r))}function Me(n){ut.current===n&&(K(it),K(ut)),st.current===n&&(K(st),_r._currentValue=nt)}var Pt,Gt;function qt(n){if(Pt===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Pt=s&&s[1]||"",Gt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pt+n+Gt}var Vt=!1;function ue(n,s){if(!n||Vt)return"";Vt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(X){var G=X}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(X){G=X}n.call(Q.prototype)}}else{try{throw Error()}catch(X){G=X}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),A=m[0],C=m[1];if(A&&C){var L=A.split(`
`),j=C.split(`
`);for(g=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;if(c===L.length||g===j.length)for(c=L.length-1,g=j.length-1;1<=c&&0<=g&&L[c]!==j[g];)g--;for(;1<=c&&0<=g;c--,g--)if(L[c]!==j[g]){if(c!==1||g!==1)do if(c--,g--,0>g||L[c]!==j[g]){var W=`
`+L[c].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=c&&0<=g);break}}}finally{Vt=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?qt(r):""}function ke(n,s){switch(n.tag){case 26:case 27:case 5:return qt(n.type);case 16:return qt("Lazy");case 13:return n.child!==s&&s!==null?qt("Suspense Fallback"):qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return ue(n.type,!1);case 11:return ue(n.type.render,!1);case 1:return ue(n.type,!0);case 31:return qt("Activity");default:return""}}function Ie(n){try{var s="",r=null;do s+=ke(n,r),r=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Oa=Object.prototype.hasOwnProperty,ka=h.unstable_scheduleCallback,Ki=h.unstable_cancelCallback,rc=h.unstable_shouldYield,Rs=h.unstable_requestPaint,Be=h.unstable_now,oc=h.unstable_getCurrentPriorityLevel,ao=h.unstable_ImmediatePriority,ro=h.unstable_UserBlockingPriority,Ms=h.unstable_NormalPriority,Ln=h.unstable_LowPriority,Kn=h.unstable_IdlePriority,Nn=h.log,Ba=h.unstable_setDisableYieldValue,Pa=null,$e=null;function vi(n){if(typeof Nn=="function"&&Ba(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Pa,n)}catch{}}var Qe=Math.clz32?Math.clz32:Zb,$b=Math.log,Qb=Math.LN2;function Zb(n){return n>>>=0,n===0?32:31-($b(n)/Qb|0)|0}var oo=256,lo=262144,co=4194304;function Wi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function uo(n,s,r){var c=n.pendingLanes;if(c===0)return 0;var g=0,m=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var C=c&134217727;return C!==0?(c=C&~m,c!==0?g=Wi(c):(A&=C,A!==0?g=Wi(A):r||(r=C&~n,r!==0&&(g=Wi(r))))):(C=c&~m,C!==0?g=Wi(C):A!==0?g=Wi(A):r||(r=c&~n,r!==0&&(g=Wi(r)))),g===0?0:s!==0&&s!==g&&(s&m)===0&&(m=g&-g,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:g}function Fa(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Jb(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jd(){var n=co;return co<<=1,(co&62914560)===0&&(co=4194304),n}function lc(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function za(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function tv(n,s,r,c,g,m){var A=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var C=n.entanglements,L=n.expirationTimes,j=n.hiddenUpdates;for(r=A&~r;0<r;){var W=31-Qe(r),Q=1<<W;C[W]=0,L[W]=-1;var G=j[W];if(G!==null)for(j[W]=null,W=0;W<G.length;W++){var X=G[W];X!==null&&(X.lane&=-536870913)}r&=~Q}c!==0&&tf(n,c,0),m!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=m&~(A&~s))}function tf(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Qe(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function ef(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var c=31-Qe(r),g=1<<c;g&s|n[c]&s&&(n[c]|=s),r&=~g}}function nf(n,s){var r=s&-s;return r=(r&42)!==0?1:cc(r),(r&(n.suspendedLanes|s))!==0?0:r}function cc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function uc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sf(){var n=Y.p;return n!==0?n:(n=window.event,n===void 0?32:Gm(n.type))}function af(n,s){var r=Y.p;try{return Y.p=n,s()}finally{Y.p=r}}var Ai=Math.random().toString(36).slice(2),Ee="__reactFiber$"+Ai,Ue="__reactProps$"+Ai,Ds="__reactContainer$"+Ai,hc="__reactEvents$"+Ai,ev="__reactListeners$"+Ai,nv="__reactHandles$"+Ai,rf="__reactResources$"+Ai,Ia="__reactMarker$"+Ai;function dc(n){delete n[Ee],delete n[Ue],delete n[hc],delete n[ev],delete n[nv]}function Ls(n){var s=n[Ee];if(s)return s;for(var r=n.parentNode;r;){if(s=r[Ds]||r[Ee]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=xm(n);n!==null;){if(r=n[Ee])return r;n=xm(n)}return s}n=r,r=n.parentNode}return null}function Ns(n){if(n=n[Ee]||n[Ds]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ua(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Os(n){var s=n[rf];return s||(s=n[rf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(n){n[Ia]=!0}var of=new Set,lf={};function $i(n,s){ks(n,s),ks(n+"Capture",s)}function ks(n,s){for(lf[n]=s,n=0;n<s.length;n++)of.add(s[n])}var iv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cf={},uf={};function sv(n){return Oa.call(uf,n)?!0:Oa.call(cf,n)?!1:iv.test(n)?uf[n]=!0:(cf[n]=!0,!1)}function ho(n,s,r){if(sv(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function fo(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function Wn(n,s,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+c)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function hf(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function av(n,s,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,m=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){r=""+A,m.call(this,A)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(A){r=""+A},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function fc(n){if(!n._valueTracker){var s=hf(n)?"checked":"value";n._valueTracker=av(n,s,""+n[s])}}function df(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return n&&(c=hf(n)?n.checked?"true":"false":n.value),n=c,n!==r?(s.setValue(n),!0):!1}function go(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var rv=/[\n"\\]/g;function fn(n){return n.replace(rv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function gc(n,s,r,c,g,m,A,C){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),s!=null?A==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+dn(s)):n.value!==""+dn(s)&&(n.value=""+dn(s)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),s!=null?pc(n,A,dn(s)):r!=null?pc(n,A,dn(r)):c!=null&&n.removeAttribute("value"),g==null&&m!=null&&(n.defaultChecked=!!m),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+dn(C):n.removeAttribute("name")}function ff(n,s,r,c,g,m,A,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){fc(n);return}r=r!=null?""+dn(r):"",s=s!=null?""+dn(s):r,C||s===n.value||(n.value=s),n.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=C?n.checked:!!c,n.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),fc(n)}function pc(n,s,r){s==="number"&&go(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Bs(n,s,r,c){if(n=n.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<n.length;r++)g=s.hasOwnProperty("$"+n[r].value),n[r].selected!==g&&(n[r].selected=g),g&&c&&(n[r].defaultSelected=!0)}else{for(r=""+dn(r),s=null,g=0;g<n.length;g++){if(n[g].value===r){n[g].selected=!0,c&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function gf(n,s,r){if(s!=null&&(s=""+dn(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+dn(r):""}function pf(n,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(i(92));if(ot(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=dn(s),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),fc(n)}function Ps(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var ov=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mf(n,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,r):typeof r!="number"||r===0||ov.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function yf(n,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&r[g]!==c&&mf(n,g,c)}else for(var m in s)s.hasOwnProperty(m)&&mf(n,m,s[m])}function mc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function po(n){return cv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function $n(){}var yc=null;function bc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fs=null,zs=null;function bf(n){var s=Ns(n);if(s&&(n=s.stateNode)){var r=n[Ue]||null;t:switch(n=s.stateNode,s.type){case"input":if(gc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==n&&c.form===n.form){var g=c[Ue]||null;if(!g)throw Error(i(90));gc(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===n.form&&df(c)}break t;case"textarea":gf(n,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Bs(n,!!r.multiple,s,!1)}}}var vc=!1;function vf(n,s,r){if(vc)return n(s,r);vc=!0;try{var c=n(s);return c}finally{if(vc=!1,(Fs!==null||zs!==null)&&(nl(),Fs&&(s=Fs,n=zs,zs=Fs=null,bf(s),n)))for(s=0;s<n.length;s++)bf(n[s])}}function Ha(n,s){var r=n.stateNode;if(r===null)return null;var c=r[Ue]||null;if(c===null)return null;r=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ac=!1;if(Qn)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Ac=!1}var Si=null,Sc=null,mo=null;function Af(){if(mo)return mo;var n,s=Sc,r=s.length,c,g="value"in Si?Si.value:Si.textContent,m=g.length;for(n=0;n<r&&s[n]===g[n];n++);var A=r-n;for(c=1;c<=A&&s[r-c]===g[m-c];c++);return mo=g.slice(n,1<c?1-c:void 0)}function yo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function bo(){return!0}function Sf(){return!1}function He(n){function s(r,c,g,m,A){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(r=n[C],this[C]=r?r(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?bo:Sf,this.isPropagationStopped=Sf,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),s}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=He(Qi),Ga=y({},Qi,{view:0,detail:0}),uv=He(Ga),Ec,wc,qa,Ao=y({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qa&&(qa&&n.type==="mousemove"?(Ec=n.screenX-qa.screenX,wc=n.screenY-qa.screenY):wc=Ec=0,qa=n),Ec)},movementY:function(n){return"movementY"in n?n.movementY:wc}}),Ef=He(Ao),hv=y({},Ao,{dataTransfer:0}),dv=He(hv),fv=y({},Ga,{relatedTarget:0}),_c=He(fv),gv=y({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),pv=He(gv),mv=y({},Qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yv=He(mv),bv=y({},Qi,{data:0}),wf=He(bv),vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Av={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ev(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Sv[n])?!!s[n]:!1}function Cc(){return Ev}var wv=y({},Ga,{key:function(n){if(n.key){var s=vv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Av[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cc,charCode:function(n){return n.type==="keypress"?yo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_v=He(wv),Cv=y({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=He(Cv),Tv=y({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cc}),xv=He(Tv),Rv=y({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mv=He(Rv),Dv=y({},Ao,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Lv=He(Dv),Nv=y({},Qi,{newState:0,oldState:0}),Ov=He(Nv),kv=[9,13,27,32],Tc=Qn&&"CompositionEvent"in window,Va=null;Qn&&"documentMode"in document&&(Va=document.documentMode);var Bv=Qn&&"TextEvent"in window&&!Va,Cf=Qn&&(!Tc||Va&&8<Va&&11>=Va),Tf=" ",xf=!1;function Rf(n,s){switch(n){case"keyup":return kv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Is=!1;function Pv(n,s){switch(n){case"compositionend":return Mf(s);case"keypress":return s.which!==32?null:(xf=!0,Tf);case"textInput":return n=s.data,n===Tf&&xf?null:n;default:return null}}function Fv(n,s){if(Is)return n==="compositionend"||!Tc&&Rf(n,s)?(n=Af(),mo=Sc=Si=null,Is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Cf&&s.locale!=="ko"?null:s.data;default:return null}}var zv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Df(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!zv[n.type]:s==="textarea"}function Lf(n,s,r,c){Fs?zs?zs.push(c):zs=[c]:Fs=c,s=cl(s,"onChange"),0<s.length&&(r=new vo("onChange","change",null,r,c),n.push({event:r,listeners:s}))}var Ya=null,Xa=null;function Iv(n){fm(n,0)}function So(n){var s=Ua(n);if(df(s))return n}function Nf(n,s){if(n==="change")return s}var Of=!1;if(Qn){var xc;if(Qn){var Rc="oninput"in document;if(!Rc){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),Rc=typeof kf.oninput=="function"}xc=Rc}else xc=!1;Of=xc&&(!document.documentMode||9<document.documentMode)}function Bf(){Ya&&(Ya.detachEvent("onpropertychange",Pf),Xa=Ya=null)}function Pf(n){if(n.propertyName==="value"&&So(Xa)){var s=[];Lf(s,Xa,n,bc(n)),vf(Iv,s)}}function Uv(n,s,r){n==="focusin"?(Bf(),Ya=s,Xa=r,Ya.attachEvent("onpropertychange",Pf)):n==="focusout"&&Bf()}function Hv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return So(Xa)}function jv(n,s){if(n==="click")return So(s)}function Gv(n,s){if(n==="input"||n==="change")return So(s)}function qv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ze=typeof Object.is=="function"?Object.is:qv;function Ka(n,s){if(Ze(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!Oa.call(s,g)||!Ze(n[g],s[g]))return!1}return!0}function Ff(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zf(n,s){var r=Ff(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=s&&c>=s)return{node:r,offset:s-n};n=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Ff(r)}}function If(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?If(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Uf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=go(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=go(n.document)}return s}function Mc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Vv=Qn&&"documentMode"in document&&11>=document.documentMode,Us=null,Dc=null,Wa=null,Lc=!1;function Hf(n,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lc||Us==null||Us!==go(c)||(c=Us,"selectionStart"in c&&Mc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Ka(Wa,c)||(Wa=c,c=cl(Dc,"onSelect"),0<c.length&&(s=new vo("onSelect","select",null,s,r),n.push({event:s,listeners:c}),s.target=Us)))}function Zi(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var Hs={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Nc={},jf={};Qn&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Ji(n){if(Nc[n])return Nc[n];if(!Hs[n])return n;var s=Hs[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in jf)return Nc[n]=s[r];return n}var Gf=Ji("animationend"),qf=Ji("animationiteration"),Vf=Ji("animationstart"),Yv=Ji("transitionrun"),Xv=Ji("transitionstart"),Kv=Ji("transitioncancel"),Yf=Ji("transitionend"),Xf=new Map,Oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oc.push("scrollEnd");function Tn(n,s){Xf.set(n,s),$i(s,[n])}var Eo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},gn=[],js=0,kc=0;function wo(){for(var n=js,s=kc=js=0;s<n;){var r=gn[s];gn[s++]=null;var c=gn[s];gn[s++]=null;var g=gn[s];gn[s++]=null;var m=gn[s];if(gn[s++]=null,c!==null&&g!==null){var A=c.pending;A===null?g.next=g:(g.next=A.next,A.next=g),c.pending=g}m!==0&&Kf(r,g,m)}}function _o(n,s,r,c){gn[js++]=n,gn[js++]=s,gn[js++]=r,gn[js++]=c,kc|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Bc(n,s,r,c){return _o(n,s,r,c),Co(n)}function ts(n,s){return _o(n,null,null,s),Co(n)}function Kf(n,s,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var g=!1,m=n.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(g=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,g&&s!==null&&(g=31-Qe(r),n=m.hiddenUpdates,c=n[g],c===null?n[g]=[s]:c.push(s),s.lane=r|536870912),m):null}function Co(n){if(50<yr)throw yr=0,qu=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Gs={};function Wv(n,s,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(n,s,r,c){return new Wv(n,s,r,c)}function Pc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zn(n,s){var r=n.alternate;return r===null?(r=Je(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Wf(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function To(n,s,r,c,g,m){var A=0;if(c=n,typeof n=="function")Pc(n)&&(A=1);else if(typeof n=="string")A=tS(n,r,it.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case U:return n=Je(31,r,s,g),n.elementType=U,n.lanes=m,n;case S:return es(r.children,g,m,s);case _:A=8,g|=24;break;case w:return n=Je(12,r,s,g|2),n.elementType=w,n.lanes=m,n;case N:return n=Je(13,r,s,g),n.elementType=N,n.lanes=m,n;case R:return n=Je(19,r,s,g),n.elementType=R,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:A=10;break t;case x:A=9;break t;case M:A=11;break t;case D:A=14;break t;case z:A=16,c=null;break t}A=29,r=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=Je(A,r,s,g),s.elementType=n,s.type=c,s.lanes=m,s}function es(n,s,r,c){return n=Je(7,n,c,s),n.lanes=r,n}function Fc(n,s,r){return n=Je(6,n,null,s),n.lanes=r,n}function $f(n){var s=Je(18,null,null,0);return s.stateNode=n,s}function zc(n,s,r){return s=Je(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Qf=new WeakMap;function pn(n,s){if(typeof n=="object"&&n!==null){var r=Qf.get(n);return r!==void 0?r:(s={value:n,source:s,stack:Ie(s)},Qf.set(n,s),s)}return{value:n,source:s,stack:Ie(s)}}var qs=[],Vs=0,xo=null,$a=0,mn=[],yn=0,Ei=null,On=1,kn="";function Jn(n,s){qs[Vs++]=$a,qs[Vs++]=xo,xo=n,$a=s}function Zf(n,s,r){mn[yn++]=On,mn[yn++]=kn,mn[yn++]=Ei,Ei=n;var c=On;n=kn;var g=32-Qe(c)-1;c&=~(1<<g),r+=1;var m=32-Qe(s)+g;if(30<m){var A=g-g%5;m=(c&(1<<A)-1).toString(32),c>>=A,g-=A,On=1<<32-Qe(s)+g|r<<g|c,kn=m+n}else On=1<<m|r<<g|c,kn=n}function Ic(n){n.return!==null&&(Jn(n,1),Zf(n,1,0))}function Uc(n){for(;n===xo;)xo=qs[--Vs],qs[Vs]=null,$a=qs[--Vs],qs[Vs]=null;for(;n===Ei;)Ei=mn[--yn],mn[yn]=null,kn=mn[--yn],mn[yn]=null,On=mn[--yn],mn[yn]=null}function Jf(n,s){mn[yn++]=On,mn[yn++]=kn,mn[yn++]=Ei,On=s.id,kn=s.overflow,Ei=n}var we=null,Wt=null,Lt=!1,wi=null,bn=!1,Hc=Error(i(519));function _i(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qa(pn(s,n)),Hc}function tg(n){var s=n.stateNode,r=n.type,c=n.memoizedProps;switch(s[Ee]=n,s[Ue]=c,r){case"dialog":xt("cancel",s),xt("close",s);break;case"iframe":case"object":case"embed":xt("load",s);break;case"video":case"audio":for(r=0;r<vr.length;r++)xt(vr[r],s);break;case"source":xt("error",s);break;case"img":case"image":case"link":xt("error",s),xt("load",s);break;case"details":xt("toggle",s);break;case"input":xt("invalid",s),ff(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":xt("invalid",s);break;case"textarea":xt("invalid",s),pf(s,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||ym(s.textContent,r)?(c.popover!=null&&(xt("beforetoggle",s),xt("toggle",s)),c.onScroll!=null&&xt("scroll",s),c.onScrollEnd!=null&&xt("scrollend",s),c.onClick!=null&&(s.onclick=$n),s=!0):s=!1,s||_i(n,!0)}function eg(n){for(we=n.return;we;)switch(we.tag){case 5:case 31:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:we=we.return}}function Ys(n){if(n!==we)return!1;if(!Lt)return eg(n),Lt=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||ah(n.type,n.memoizedProps)),r=!r),r&&Wt&&_i(n),eg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Wt=Tm(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Wt=Tm(n)}else s===27?(s=Wt,zi(n.type)?(n=uh,uh=null,Wt=n):Wt=s):Wt=we?An(n.stateNode.nextSibling):null;return!0}function ns(){Wt=we=null,Lt=!1}function jc(){var n=wi;return n!==null&&(Ve===null?Ve=n:Ve.push.apply(Ve,n),wi=null),n}function Qa(n){wi===null?wi=[n]:wi.push(n)}var Gc=O(null),is=null,ti=null;function Ci(n,s,r){tt(Gc,s._currentValue),s._currentValue=r}function ei(n){n._currentValue=Gc.current,K(Gc)}function qc(n,s,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===r)break;n=n.return}}function Vc(n,s,r,c){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var m=g.dependencies;if(m!==null){var A=g.child;m=m.firstContext;t:for(;m!==null;){var C=m;m=g;for(var L=0;L<s.length;L++)if(C.context===s[L]){m.lanes|=r,C=m.alternate,C!==null&&(C.lanes|=r),qc(m.return,r,n),c||(A=null);break t}m=C.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=r,m=A.alternate,m!==null&&(m.lanes|=r),qc(A,r,n),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===n){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function Xs(n,s,r,c){n=null;for(var g=s,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var C=g.type;Ze(g.pendingProps.value,A.value)||(n!==null?n.push(C):n=[C])}}else if(g===st.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(_r):n=[_r])}g=g.return}n!==null&&Vc(s,n,r,c),s.flags|=262144}function Ro(n){for(n=n.firstContext;n!==null;){if(!Ze(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ss(n){is=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function _e(n){return ng(is,n)}function Mo(n,s){return is===null&&ss(n),ng(n,s)}function ng(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},ti===null){if(n===null)throw Error(i(308));ti=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ti=ti.next=s;return r}var $v=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},Qv=h.unstable_scheduleCallback,Zv=h.unstable_NormalPriority,he={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yc(){return{controller:new $v,data:new Map,refCount:0}}function Za(n){n.refCount--,n.refCount===0&&Qv(Zv,function(){n.controller.abort()})}var Ja=null,Xc=0,Ks=0,Ws=null;function Jv(n,s){if(Ja===null){var r=Ja=[];Xc=0,Ks=$u(),Ws={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Xc++,s.then(ig,ig),s}function ig(){if(--Xc===0&&Ja!==null){Ws!==null&&(Ws.status="fulfilled");var n=Ja;Ja=null,Ks=0,Ws=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function tA(n,s){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var sg=F.S;F.S=function(n,s){Hp=Be(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Jv(n,s),sg!==null&&sg(n,s)};var as=O(null);function Kc(){var n=as.current;return n!==null?n:Yt.pooledCache}function Do(n,s){s===null?tt(as,as.current):tt(as,s.pool)}function ag(){var n=Kc();return n===null?null:{parent:he._currentValue,pool:n}}var $s=Error(i(460)),Wc=Error(i(474)),Lo=Error(i(542)),No={then:function(){}};function rg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function og(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then($n,$n),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cg(n),n;default:if(typeof s.status=="string")s.then($n,$n);else{if(n=Yt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cg(n),n}throw os=s,$s}}function rs(n){try{var s=n._init;return s(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(os=r,$s):r}}var os=null;function lg(){if(os===null)throw Error(i(459));var n=os;return os=null,n}function cg(n){if(n===$s||n===Lo)throw Error(i(483))}var Qs=null,tr=0;function Oo(n){var s=tr;return tr+=1,Qs===null&&(Qs=[]),og(Qs,n,s)}function er(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ko(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function ug(n){function s(I,k){if(n){var H=I.deletions;H===null?(I.deletions=[k],I.flags|=16):H.push(k)}}function r(I,k){if(!n)return null;for(;k!==null;)s(I,k),k=k.sibling;return null}function c(I){for(var k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function g(I,k){return I=Zn(I,k),I.index=0,I.sibling=null,I}function m(I,k,H){return I.index=H,n?(H=I.alternate,H!==null?(H=H.index,H<k?(I.flags|=67108866,k):H):(I.flags|=67108866,k)):(I.flags|=1048576,k)}function A(I){return n&&I.alternate===null&&(I.flags|=67108866),I}function C(I,k,H,$){return k===null||k.tag!==6?(k=Fc(H,I.mode,$),k.return=I,k):(k=g(k,H),k.return=I,k)}function L(I,k,H,$){var ft=H.type;return ft===S?W(I,k,H.props.children,$,H.key):k!==null&&(k.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===z&&rs(ft)===k.type)?(k=g(k,H.props),er(k,H),k.return=I,k):(k=To(H.type,H.key,H.props,null,I.mode,$),er(k,H),k.return=I,k)}function j(I,k,H,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=zc(H,I.mode,$),k.return=I,k):(k=g(k,H.children||[]),k.return=I,k)}function W(I,k,H,$,ft){return k===null||k.tag!==7?(k=es(H,I.mode,$,ft),k.return=I,k):(k=g(k,H),k.return=I,k)}function Q(I,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Fc(""+k,I.mode,H),k.return=I,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case v:return H=To(k.type,k.key,k.props,null,I.mode,H),er(H,k),H.return=I,H;case E:return k=zc(k,I.mode,H),k.return=I,k;case z:return k=rs(k),Q(I,k,H)}if(ot(k)||Z(k))return k=es(k,I.mode,H,null),k.return=I,k;if(typeof k.then=="function")return Q(I,Oo(k),H);if(k.$$typeof===T)return Q(I,Mo(I,k),H);ko(I,k)}return null}function G(I,k,H,$){var ft=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ft!==null?null:C(I,k,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return H.key===ft?L(I,k,H,$):null;case E:return H.key===ft?j(I,k,H,$):null;case z:return H=rs(H),G(I,k,H,$)}if(ot(H)||Z(H))return ft!==null?null:W(I,k,H,$,null);if(typeof H.then=="function")return G(I,k,Oo(H),$);if(H.$$typeof===T)return G(I,k,Mo(I,H),$);ko(I,H)}return null}function X(I,k,H,$,ft){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return I=I.get(H)||null,C(k,I,""+$,ft);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return I=I.get($.key===null?H:$.key)||null,L(k,I,$,ft);case E:return I=I.get($.key===null?H:$.key)||null,j(k,I,$,ft);case z:return $=rs($),X(I,k,H,$,ft)}if(ot($)||Z($))return I=I.get(H)||null,W(k,I,$,ft,null);if(typeof $.then=="function")return X(I,k,H,Oo($),ft);if($.$$typeof===T)return X(I,k,H,Mo(k,$),ft);ko(k,$)}return null}function lt(I,k,H,$){for(var ft=null,Ot=null,ht=k,wt=k=0,Mt=null;ht!==null&&wt<H.length;wt++){ht.index>wt?(Mt=ht,ht=null):Mt=ht.sibling;var kt=G(I,ht,H[wt],$);if(kt===null){ht===null&&(ht=Mt);break}n&&ht&&kt.alternate===null&&s(I,ht),k=m(kt,k,wt),Ot===null?ft=kt:Ot.sibling=kt,Ot=kt,ht=Mt}if(wt===H.length)return r(I,ht),Lt&&Jn(I,wt),ft;if(ht===null){for(;wt<H.length;wt++)ht=Q(I,H[wt],$),ht!==null&&(k=m(ht,k,wt),Ot===null?ft=ht:Ot.sibling=ht,Ot=ht);return Lt&&Jn(I,wt),ft}for(ht=c(ht);wt<H.length;wt++)Mt=X(ht,I,wt,H[wt],$),Mt!==null&&(n&&Mt.alternate!==null&&ht.delete(Mt.key===null?wt:Mt.key),k=m(Mt,k,wt),Ot===null?ft=Mt:Ot.sibling=Mt,Ot=Mt);return n&&ht.forEach(function(Gi){return s(I,Gi)}),Lt&&Jn(I,wt),ft}function pt(I,k,H,$){if(H==null)throw Error(i(151));for(var ft=null,Ot=null,ht=k,wt=k=0,Mt=null,kt=H.next();ht!==null&&!kt.done;wt++,kt=H.next()){ht.index>wt?(Mt=ht,ht=null):Mt=ht.sibling;var Gi=G(I,ht,kt.value,$);if(Gi===null){ht===null&&(ht=Mt);break}n&&ht&&Gi.alternate===null&&s(I,ht),k=m(Gi,k,wt),Ot===null?ft=Gi:Ot.sibling=Gi,Ot=Gi,ht=Mt}if(kt.done)return r(I,ht),Lt&&Jn(I,wt),ft;if(ht===null){for(;!kt.done;wt++,kt=H.next())kt=Q(I,kt.value,$),kt!==null&&(k=m(kt,k,wt),Ot===null?ft=kt:Ot.sibling=kt,Ot=kt);return Lt&&Jn(I,wt),ft}for(ht=c(ht);!kt.done;wt++,kt=H.next())kt=X(ht,I,wt,kt.value,$),kt!==null&&(n&&kt.alternate!==null&&ht.delete(kt.key===null?wt:kt.key),k=m(kt,k,wt),Ot===null?ft=kt:Ot.sibling=kt,Ot=kt);return n&&ht.forEach(function(hS){return s(I,hS)}),Lt&&Jn(I,wt),ft}function Ht(I,k,H,$){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case v:t:{for(var ft=H.key;k!==null;){if(k.key===ft){if(ft=H.type,ft===S){if(k.tag===7){r(I,k.sibling),$=g(k,H.props.children),$.return=I,I=$;break t}}else if(k.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===z&&rs(ft)===k.type){r(I,k.sibling),$=g(k,H.props),er($,H),$.return=I,I=$;break t}r(I,k);break}else s(I,k);k=k.sibling}H.type===S?($=es(H.props.children,I.mode,$,H.key),$.return=I,I=$):($=To(H.type,H.key,H.props,null,I.mode,$),er($,H),$.return=I,I=$)}return A(I);case E:t:{for(ft=H.key;k!==null;){if(k.key===ft)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){r(I,k.sibling),$=g(k,H.children||[]),$.return=I,I=$;break t}else{r(I,k);break}else s(I,k);k=k.sibling}$=zc(H,I.mode,$),$.return=I,I=$}return A(I);case z:return H=rs(H),Ht(I,k,H,$)}if(ot(H))return lt(I,k,H,$);if(Z(H)){if(ft=Z(H),typeof ft!="function")throw Error(i(150));return H=ft.call(H),pt(I,k,H,$)}if(typeof H.then=="function")return Ht(I,k,Oo(H),$);if(H.$$typeof===T)return Ht(I,k,Mo(I,H),$);ko(I,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(r(I,k.sibling),$=g(k,H),$.return=I,I=$):(r(I,k),$=Fc(H,I.mode,$),$.return=I,I=$),A(I)):r(I,k)}return function(I,k,H,$){try{tr=0;var ft=Ht(I,k,H,$);return Qs=null,ft}catch(ht){if(ht===$s||ht===Lo)throw ht;var Ot=Je(29,ht,null,I.mode);return Ot.lanes=$,Ot.return=I,Ot}}}var ls=ug(!0),hg=ug(!1),Ti=!1;function $c(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qc(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ri(n,s,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=Co(n),Kf(n,null,r),s}return _o(n,c,s,r),Co(n)}function nr(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,ef(n,r)}}function Zc(n,s){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var A={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?g=m=A:m=m.next=A,r=r.next}while(r!==null);m===null?g=m=s:m=m.next=s}else g=m=s;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var Jc=!1;function ir(){if(Jc){var n=Ws;if(n!==null)throw n}}function sr(n,s,r,c){Jc=!1;var g=n.updateQueue;Ti=!1;var m=g.firstBaseUpdate,A=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var L=C,j=L.next;L.next=null,A===null?m=j:A.next=j,A=L;var W=n.alternate;W!==null&&(W=W.updateQueue,C=W.lastBaseUpdate,C!==A&&(C===null?W.firstBaseUpdate=j:C.next=j,W.lastBaseUpdate=L))}if(m!==null){var Q=g.baseState;A=0,W=j=L=null,C=m;do{var G=C.lane&-536870913,X=G!==C.lane;if(X?(Rt&G)===G:(c&G)===G){G!==0&&G===Ks&&(Jc=!0),W!==null&&(W=W.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var lt=n,pt=C;G=s;var Ht=r;switch(pt.tag){case 1:if(lt=pt.payload,typeof lt=="function"){Q=lt.call(Ht,Q,G);break t}Q=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=pt.payload,G=typeof lt=="function"?lt.call(Ht,Q,G):lt,G==null)break t;Q=y({},Q,G);break t;case 2:Ti=!0}}G=C.callback,G!==null&&(n.flags|=64,X&&(n.flags|=8192),X=g.callbacks,X===null?g.callbacks=[G]:X.push(G))}else X={lane:G,tag:C.tag,payload:C.payload,callback:C.callback,next:null},W===null?(j=W=X,L=Q):W=W.next=X,A|=G;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;X=C,C=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);W===null&&(L=Q),g.baseState=L,g.firstBaseUpdate=j,g.lastBaseUpdate=W,m===null&&(g.shared.lanes=0),Oi|=A,n.lanes=A,n.memoizedState=Q}}function dg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function fg(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)dg(r[n],s)}var Zs=O(null),Bo=O(0);function gg(n,s){n=ui,tt(Bo,n),tt(Zs,s),ui=n|s.baseLanes}function tu(){tt(Bo,ui),tt(Zs,Zs.current)}function eu(){ui=Bo.current,K(Zs),K(Bo)}var tn=O(null),vn=null;function Mi(n){var s=n.alternate;tt(re,re.current&1),tt(tn,n),vn===null&&(s===null||Zs.current!==null||s.memoizedState!==null)&&(vn=n)}function nu(n){tt(re,re.current),tt(tn,n),vn===null&&(vn=n)}function pg(n){n.tag===22?(tt(re,re.current),tt(tn,n),vn===null&&(vn=n)):Di()}function Di(){tt(re,re.current),tt(tn,tn.current)}function en(n){K(tn),vn===n&&(vn=null),K(re)}var re=O(0);function Po(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||lh(r)||ch(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ni=0,St=null,It=null,de=null,Fo=!1,Js=!1,cs=!1,zo=0,ar=0,ta=null,eA=0;function se(){throw Error(i(321))}function iu(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!Ze(n[r],s[r]))return!1;return!0}function su(n,s,r,c,g,m){return ni=m,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=n===null||n.memoizedState===null?Zg:vu,cs=!1,m=r(c,g),cs=!1,Js&&(m=yg(s,r,c,g)),mg(n),m}function mg(n){F.H=lr;var s=It!==null&&It.next!==null;if(ni=0,de=It=St=null,Fo=!1,ar=0,ta=null,s)throw Error(i(300));n===null||fe||(n=n.dependencies,n!==null&&Ro(n)&&(fe=!0))}function yg(n,s,r,c){St=n;var g=0;do{if(Js&&(ta=null),ar=0,Js=!1,25<=g)throw Error(i(301));if(g+=1,de=It=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=Jg,m=s(r,c)}while(Js);return m}function nA(){var n=F.H,s=n.useState()[0];return s=typeof s.then=="function"?rr(s):s,n=n.useState()[0],(It!==null?It.memoizedState:null)!==n&&(St.flags|=1024),s}function au(){var n=zo!==0;return zo=0,n}function ru(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function ou(n){if(Fo){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Fo=!1}ni=0,de=It=St=null,Js=!1,ar=zo=0,ta=null}function Pe(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?St.memoizedState=de=n:de=de.next=n,de}function oe(){if(It===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var s=de===null?St.memoizedState:de.next;if(s!==null)de=s,It=n;else{if(n===null)throw St.alternate===null?Error(i(467)):Error(i(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},de===null?St.memoizedState=de=n:de=de.next=n}return de}function Io(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rr(n){var s=ar;return ar+=1,ta===null&&(ta=[]),n=og(ta,n,s),s=St,(de===null?s.memoizedState:de.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?Zg:vu),n}function Uo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return rr(n);if(n.$$typeof===T)return _e(n)}throw Error(i(438,String(n)))}function lu(n){var s=null,r=St.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Io(),St.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),c=0;c<n;c++)r[c]=q;return s.index++,r}function ii(n,s){return typeof s=="function"?s(n):s}function Ho(n){var s=oe();return cu(s,It,n)}function cu(n,s,r){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var g=n.baseQueue,m=c.pending;if(m!==null){if(g!==null){var A=g.next;g.next=m.next,m.next=A}s.baseQueue=g=m,c.pending=null}if(m=n.baseState,g===null)n.memoizedState=m;else{s=g.next;var C=A=null,L=null,j=s,W=!1;do{var Q=j.lane&-536870913;if(Q!==j.lane?(Rt&Q)===Q:(ni&Q)===Q){var G=j.revertLane;if(G===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Q===Ks&&(W=!0);else if((ni&G)===G){j=j.next,G===Ks&&(W=!0);continue}else Q={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},L===null?(C=L=Q,A=m):L=L.next=Q,St.lanes|=G,Oi|=G;Q=j.action,cs&&r(m,Q),m=j.hasEagerState?j.eagerState:r(m,Q)}else G={lane:Q,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},L===null?(C=L=G,A=m):L=L.next=G,St.lanes|=Q,Oi|=Q;j=j.next}while(j!==null&&j!==s);if(L===null?A=m:L.next=C,!Ze(m,n.memoizedState)&&(fe=!0,W&&(r=Ws,r!==null)))throw r;n.memoizedState=m,n.baseState=A,n.baseQueue=L,c.lastRenderedState=m}return g===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function uu(n){var s=oe(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var c=r.dispatch,g=r.pending,m=s.memoizedState;if(g!==null){r.pending=null;var A=g=g.next;do m=n(m,A.action),A=A.next;while(A!==g);Ze(m,s.memoizedState)||(fe=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,c]}function bg(n,s,r){var c=St,g=oe(),m=Lt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=s();var A=!Ze((It||g).memoizedState,r);if(A&&(g.memoizedState=r,fe=!0),g=g.queue,fu(Sg.bind(null,c,g,n),[n]),g.getSnapshot!==s||A||de!==null&&de.memoizedState.tag&1){if(c.flags|=2048,ea(9,{destroy:void 0},Ag.bind(null,c,g,r,s),null),Yt===null)throw Error(i(349));m||(ni&127)!==0||vg(c,s,r)}return r}function vg(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=St.updateQueue,s===null?(s=Io(),St.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function Ag(n,s,r,c){s.value=r,s.getSnapshot=c,Eg(s)&&wg(n)}function Sg(n,s,r){return r(function(){Eg(s)&&wg(n)})}function Eg(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!Ze(n,r)}catch{return!0}}function wg(n){var s=ts(n,2);s!==null&&Ye(s,n,2)}function hu(n){var s=Pe();if(typeof n=="function"){var r=n;if(n=r(),cs){vi(!0);try{r()}finally{vi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:n},s}function _g(n,s,r,c){return n.baseState=r,cu(n,It,typeof c=="function"?c:ii)}function iA(n,s,r,c,g){if(qo(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};F.T!==null?r(!0):m.isTransition=!1,c(m),r=s.pending,r===null?(m.next=s.pending=m,Cg(s,m)):(m.next=r.next,s.pending=r.next=m)}}function Cg(n,s){var r=s.action,c=s.payload,g=n.state;if(s.isTransition){var m=F.T,A={};F.T=A;try{var C=r(g,c),L=F.S;L!==null&&L(A,C),Tg(n,s,C)}catch(j){du(n,s,j)}finally{m!==null&&A.types!==null&&(m.types=A.types),F.T=m}}else try{m=r(g,c),Tg(n,s,m)}catch(j){du(n,s,j)}}function Tg(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){xg(n,s,c)},function(c){return du(n,s,c)}):xg(n,s,r)}function xg(n,s,r){s.status="fulfilled",s.value=r,Rg(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,Cg(n,r)))}function du(n,s,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,Rg(s),s=s.next;while(s!==c)}n.action=null}function Rg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Mg(n,s){return s}function Dg(n,s){if(Lt){var r=Yt.formState;if(r!==null){t:{var c=St;if(Lt){if(Wt){e:{for(var g=Wt,m=bn;g.nodeType!==8;){if(!m){g=null;break e}if(g=An(g.nextSibling),g===null){g=null;break e}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Wt=An(g.nextSibling),c=g.data==="F!";break t}}_i(c)}c=!1}c&&(s=r[0])}}return r=Pe(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:s},r.queue=c,r=Wg.bind(null,St,c),c.dispatch=r,c=hu(!1),m=bu.bind(null,St,!1,c.queue),c=Pe(),g={state:s,dispatch:null,action:n,pending:null},c.queue=g,r=iA.bind(null,St,g,m,r),g.dispatch=r,c.memoizedState=n,[s,r,!1]}function Lg(n){var s=oe();return Ng(s,It,n)}function Ng(n,s,r){if(s=cu(n,s,Mg)[0],n=Ho(ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=rr(s)}catch(A){throw A===$s?Lo:A}else c=s;s=oe();var g=s.queue,m=g.dispatch;return r!==s.memoizedState&&(St.flags|=2048,ea(9,{destroy:void 0},sA.bind(null,g,r),null)),[c,m,n]}function sA(n,s){n.action=s}function Og(n){var s=oe(),r=It;if(r!==null)return Ng(s,r,n);oe(),s=s.memoizedState,r=oe();var c=r.queue.dispatch;return r.memoizedState=n,[s,c,!1]}function ea(n,s,r,c){return n={tag:n,create:r,deps:c,inst:s,next:null},s=St.updateQueue,s===null&&(s=Io(),St.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,s.lastEffect=n),n}function kg(){return oe().memoizedState}function jo(n,s,r,c){var g=Pe();St.flags|=n,g.memoizedState=ea(1|s,{destroy:void 0},r,c===void 0?null:c)}function Go(n,s,r,c){var g=oe();c=c===void 0?null:c;var m=g.memoizedState.inst;It!==null&&c!==null&&iu(c,It.memoizedState.deps)?g.memoizedState=ea(s,m,r,c):(St.flags|=n,g.memoizedState=ea(1|s,m,r,c))}function Bg(n,s){jo(8390656,8,n,s)}function fu(n,s){Go(2048,8,n,s)}function aA(n){St.flags|=4;var s=St.updateQueue;if(s===null)s=Io(),St.updateQueue=s,s.events=[n];else{var r=s.events;r===null?s.events=[n]:r.push(n)}}function Pg(n){var s=oe().memoizedState;return aA({ref:s,nextImpl:n}),function(){if((Bt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Fg(n,s){return Go(4,2,n,s)}function zg(n,s){return Go(4,4,n,s)}function Ig(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ug(n,s,r){r=r!=null?r.concat([n]):null,Go(4,4,Ig.bind(null,s,n),r)}function gu(){}function Hg(n,s){var r=oe();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&iu(s,c[1])?c[0]:(r.memoizedState=[n,s],n)}function jg(n,s){var r=oe();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&iu(s,c[1]))return c[0];if(c=n(),cs){vi(!0);try{n()}finally{vi(!1)}}return r.memoizedState=[c,s],c}function pu(n,s,r){return r===void 0||(ni&1073741824)!==0&&(Rt&261930)===0?n.memoizedState=s:(n.memoizedState=r,n=Gp(),St.lanes|=n,Oi|=n,r)}function Gg(n,s,r,c){return Ze(r,s)?r:Zs.current!==null?(n=pu(n,r,c),Ze(n,s)||(fe=!0),n):(ni&42)===0||(ni&1073741824)!==0&&(Rt&261930)===0?(fe=!0,n.memoizedState=r):(n=Gp(),St.lanes|=n,Oi|=n,s)}function qg(n,s,r,c,g){var m=Y.p;Y.p=m!==0&&8>m?m:8;var A=F.T,C={};F.T=C,bu(n,!1,s,r);try{var L=g(),j=F.S;if(j!==null&&j(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=tA(L,c);or(n,s,W,an(n))}else or(n,s,c,an(n))}catch(Q){or(n,s,{then:function(){},status:"rejected",reason:Q},an())}finally{Y.p=m,A!==null&&C.types!==null&&(A.types=C.types),F.T=A}}function rA(){}function mu(n,s,r,c){if(n.tag!==5)throw Error(i(476));var g=Vg(n).queue;qg(n,g,s,nt,r===null?rA:function(){return Yg(n),r(c)})}function Vg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:nt},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Yg(n){var s=Vg(n);s.next===null&&(s=n.alternate.memoizedState),or(n,s.next.queue,{},an())}function yu(){return _e(_r)}function Xg(){return oe().memoizedState}function Kg(){return oe().memoizedState}function oA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=an();n=xi(r);var c=Ri(s,n,r);c!==null&&(Ye(c,s,r),nr(c,s,r)),s={cache:Yc()},n.payload=s;return}s=s.return}}function lA(n,s,r){var c=an();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qo(n)?$g(s,r):(r=Bc(n,s,r,c),r!==null&&(Ye(r,n,c),Qg(r,s,c)))}function Wg(n,s,r){var c=an();or(n,s,r,c)}function or(n,s,r,c){var g={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(qo(n))$g(s,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var A=s.lastRenderedState,C=m(A,r);if(g.hasEagerState=!0,g.eagerState=C,Ze(C,A))return _o(n,s,g,0),Yt===null&&wo(),!1}catch{}if(r=Bc(n,s,g,c),r!==null)return Ye(r,n,c),Qg(r,s,c),!0}return!1}function bu(n,s,r,c){if(c={lane:2,revertLane:$u(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},qo(n)){if(s)throw Error(i(479))}else s=Bc(n,r,c,2),s!==null&&Ye(s,n,2)}function qo(n){var s=n.alternate;return n===St||s!==null&&s===St}function $g(n,s){Js=Fo=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Qg(n,s,r){if((r&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,ef(n,r)}}var lr={readContext:_e,use:Uo,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se};lr.useEffectEvent=se;var Zg={readContext:_e,use:Uo,useCallback:function(n,s){return Pe().memoizedState=[n,s===void 0?null:s],n},useContext:_e,useEffect:Bg,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,jo(4194308,4,Ig.bind(null,s,n),r)},useLayoutEffect:function(n,s){return jo(4194308,4,n,s)},useInsertionEffect:function(n,s){jo(4,2,n,s)},useMemo:function(n,s){var r=Pe();s=s===void 0?null:s;var c=n();if(cs){vi(!0);try{n()}finally{vi(!1)}}return r.memoizedState=[c,s],c},useReducer:function(n,s,r){var c=Pe();if(r!==void 0){var g=r(s);if(cs){vi(!0);try{r(s)}finally{vi(!1)}}}else g=s;return c.memoizedState=c.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},c.queue=n,n=n.dispatch=lA.bind(null,St,n),[c.memoizedState,n]},useRef:function(n){var s=Pe();return n={current:n},s.memoizedState=n},useState:function(n){n=hu(n);var s=n.queue,r=Wg.bind(null,St,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:gu,useDeferredValue:function(n,s){var r=Pe();return pu(r,n,s)},useTransition:function(){var n=hu(!1);return n=qg.bind(null,St,n.queue,!0,!1),Pe().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var c=St,g=Pe();if(Lt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Yt===null)throw Error(i(349));(Rt&127)!==0||vg(c,s,r)}g.memoizedState=r;var m={value:r,getSnapshot:s};return g.queue=m,Bg(Sg.bind(null,c,m,n),[n]),c.flags|=2048,ea(9,{destroy:void 0},Ag.bind(null,c,m,r,s),null),r},useId:function(){var n=Pe(),s=Yt.identifierPrefix;if(Lt){var r=kn,c=On;r=(c&~(1<<32-Qe(c)-1)).toString(32)+r,s="_"+s+"R_"+r,r=zo++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=eA++,s="_"+s+"r_"+r.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:yu,useFormState:Dg,useActionState:Dg,useOptimistic:function(n){var s=Pe();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=bu.bind(null,St,!0,r),r.dispatch=s,[n,s]},useMemoCache:lu,useCacheRefresh:function(){return Pe().memoizedState=oA.bind(null,St)},useEffectEvent:function(n){var s=Pe(),r={impl:n};return s.memoizedState=r,function(){if((Bt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},vu={readContext:_e,use:Uo,useCallback:Hg,useContext:_e,useEffect:fu,useImperativeHandle:Ug,useInsertionEffect:Fg,useLayoutEffect:zg,useMemo:jg,useReducer:Ho,useRef:kg,useState:function(){return Ho(ii)},useDebugValue:gu,useDeferredValue:function(n,s){var r=oe();return Gg(r,It.memoizedState,n,s)},useTransition:function(){var n=Ho(ii)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:rr(n),s]},useSyncExternalStore:bg,useId:Xg,useHostTransitionStatus:yu,useFormState:Lg,useActionState:Lg,useOptimistic:function(n,s){var r=oe();return _g(r,It,n,s)},useMemoCache:lu,useCacheRefresh:Kg};vu.useEffectEvent=Pg;var Jg={readContext:_e,use:Uo,useCallback:Hg,useContext:_e,useEffect:fu,useImperativeHandle:Ug,useInsertionEffect:Fg,useLayoutEffect:zg,useMemo:jg,useReducer:uu,useRef:kg,useState:function(){return uu(ii)},useDebugValue:gu,useDeferredValue:function(n,s){var r=oe();return It===null?pu(r,n,s):Gg(r,It.memoizedState,n,s)},useTransition:function(){var n=uu(ii)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:rr(n),s]},useSyncExternalStore:bg,useId:Xg,useHostTransitionStatus:yu,useFormState:Og,useActionState:Og,useOptimistic:function(n,s){var r=oe();return It!==null?_g(r,It,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:lu,useCacheRefresh:Kg};Jg.useEffectEvent=Pg;function Au(n,s,r,c){s=n.memoizedState,r=r(c,s),r=r==null?s:y({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Su={enqueueSetState:function(n,s,r){n=n._reactInternals;var c=an(),g=xi(c);g.payload=s,r!=null&&(g.callback=r),s=Ri(n,g,c),s!==null&&(Ye(s,n,c),nr(s,n,c))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var c=an(),g=xi(c);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=Ri(n,g,c),s!==null&&(Ye(s,n,c),nr(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=an(),c=xi(r);c.tag=2,s!=null&&(c.callback=s),s=Ri(n,c,r),s!==null&&(Ye(s,n,r),nr(s,n,r))}};function tp(n,s,r,c,g,m,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,A):s.prototype&&s.prototype.isPureReactComponent?!Ka(r,c)||!Ka(g,m):!0}function ep(n,s,r,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==n&&Su.enqueueReplaceState(s,s.state,null)}function us(n,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(n=n.defaultProps){r===s&&(r=y({},r));for(var g in n)r[g]===void 0&&(r[g]=n[g])}return r}function np(n){Eo(n)}function ip(n){console.error(n)}function sp(n){Eo(n)}function Vo(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function ap(n,s,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Eu(n,s,r){return r=xi(r),r.tag=3,r.payload={element:null},r.callback=function(){Vo(n,s)},r}function rp(n){return n=xi(n),n.tag=3,n}function op(n,s,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var m=c.value;n.payload=function(){return g(m)},n.callback=function(){ap(s,r,c)}}var A=r.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){ap(s,r,c),typeof g!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function cA(n,s,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&Xs(s,r,g,!0),r=tn.current,r!==null){switch(r.tag){case 31:case 13:return vn===null?il():r.alternate===null&&ae===0&&(ae=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===No?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),Xu(n,c,g)),!1;case 22:return r.flags|=65536,c===No?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),Xu(n,c,g)),!1}throw Error(i(435,r.tag))}return Xu(n,c,g),il(),!1}if(Lt)return s=tn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==Hc&&(n=Error(i(422),{cause:c}),Qa(pn(n,r)))):(c!==Hc&&(s=Error(i(423),{cause:c}),Qa(pn(s,r))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,c=pn(c,r),g=Eu(n.stateNode,c,g),Zc(n,g),ae!==4&&(ae=2)),!1;var m=Error(i(520),{cause:c});if(m=pn(m,r),mr===null?mr=[m]:mr.push(m),ae!==4&&(ae=2),s===null)return!0;c=pn(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=g&-g,r.lanes|=n,n=Eu(r.stateNode,c,n),Zc(r,n),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ki===null||!ki.has(m))))return r.flags|=65536,g&=-g,r.lanes|=g,g=rp(g),op(g,n,r,c),Zc(r,g),!1}r=r.return}while(r!==null);return!1}var wu=Error(i(461)),fe=!1;function Ce(n,s,r,c){s.child=n===null?hg(s,null,r,c):ls(s,n.child,r,c)}function lp(n,s,r,c,g){r=r.render;var m=s.ref;if("ref"in c){var A={};for(var C in c)C!=="ref"&&(A[C]=c[C])}else A=c;return ss(s),c=su(n,s,r,A,m,g),C=au(),n!==null&&!fe?(ru(n,s,g),si(n,s,g)):(Lt&&C&&Ic(s),s.flags|=1,Ce(n,s,c,g),s.child)}function cp(n,s,r,c,g){if(n===null){var m=r.type;return typeof m=="function"&&!Pc(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,up(n,s,m,c,g)):(n=To(r.type,null,c,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Lu(n,g)){var A=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ka,r(A,c)&&n.ref===s.ref)return si(n,s,g)}return s.flags|=1,n=Zn(m,c),n.ref=s.ref,n.return=s,s.child=n}function up(n,s,r,c,g){if(n!==null){var m=n.memoizedProps;if(Ka(m,c)&&n.ref===s.ref)if(fe=!1,s.pendingProps=c=m,Lu(n,g))(n.flags&131072)!==0&&(fe=!0);else return s.lanes=n.lanes,si(n,s,g)}return _u(n,s,r,c,g)}function hp(n,s,r,c){var g=c.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,n!==null){for(c=s.child=n.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~m}else c=0,s.child=null;return dp(n,s,m,r,c)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Do(s,m!==null?m.cachePool:null),m!==null?gg(s,m):tu(),pg(s);else return c=s.lanes=536870912,dp(n,s,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Do(s,m.cachePool),gg(s,m),Di(),s.memoizedState=null):(n!==null&&Do(s,null),tu(),Di());return Ce(n,s,g,r),s.child}function cr(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function dp(n,s,r,c,g){var m=Kc();return m=m===null?null:{parent:he._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},n!==null&&Do(s,null),tu(),pg(s),n!==null&&Xs(n,s,c,!0),s.childLanes=g,null}function Yo(n,s){return s=Ko({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function fp(n,s,r){return ls(s,n.child,null,r),n=Yo(s,s.pendingProps),n.flags|=2,en(s),s.memoizedState=null,n}function uA(n,s,r){var c=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Lt){if(c.mode==="hidden")return n=Yo(s,c),s.lanes=536870912,cr(null,n);if(nu(s),(n=Wt)?(n=Cm(n,bn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ei!==null?{id:On,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},r=$f(n),r.return=s,s.child=r,we=s,Wt=null)):n=null,n===null)throw _i(s);return s.lanes=536870912,null}return Yo(s,c)}var m=n.memoizedState;if(m!==null){var A=m.dehydrated;if(nu(s),g)if(s.flags&256)s.flags&=-257,s=fp(n,s,r);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(fe||Xs(n,s,r,!1),g=(r&n.childLanes)!==0,fe||g){if(c=Yt,c!==null&&(A=nf(c,r),A!==0&&A!==m.retryLane))throw m.retryLane=A,ts(n,A),Ye(c,n,A),wu;il(),s=fp(n,s,r)}else n=m.treeContext,Wt=An(A.nextSibling),we=s,Lt=!0,wi=null,bn=!1,n!==null&&Jf(s,n),s=Yo(s,c),s.flags|=4096;return s}return n=Zn(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Xo(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function _u(n,s,r,c,g){return ss(s),r=su(n,s,r,c,void 0,g),c=au(),n!==null&&!fe?(ru(n,s,g),si(n,s,g)):(Lt&&c&&Ic(s),s.flags|=1,Ce(n,s,r,g),s.child)}function gp(n,s,r,c,g,m){return ss(s),s.updateQueue=null,r=yg(s,c,r,g),mg(n),c=au(),n!==null&&!fe?(ru(n,s,m),si(n,s,m)):(Lt&&c&&Ic(s),s.flags|=1,Ce(n,s,r,m),s.child)}function pp(n,s,r,c,g){if(ss(s),s.stateNode===null){var m=Gs,A=r.contextType;typeof A=="object"&&A!==null&&(m=_e(A)),m=new r(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Su,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},$c(s),A=r.contextType,m.context=typeof A=="object"&&A!==null?_e(A):Gs,m.state=s.memoizedState,A=r.getDerivedStateFromProps,typeof A=="function"&&(Au(s,r,A,c),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&Su.enqueueReplaceState(m,m.state,null),sr(s,c,m,g),ir(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){m=s.stateNode;var C=s.memoizedProps,L=us(r,C);m.props=L;var j=m.context,W=r.contextType;A=Gs,typeof W=="object"&&W!==null&&(A=_e(W));var Q=r.getDerivedStateFromProps;W=typeof Q=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||j!==A)&&ep(s,m,c,A),Ti=!1;var G=s.memoizedState;m.state=G,sr(s,c,m,g),ir(),j=s.memoizedState,C||G!==j||Ti?(typeof Q=="function"&&(Au(s,r,Q,c),j=s.memoizedState),(L=Ti||tp(s,r,L,c,G,j,A))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),m.props=c,m.state=j,m.context=A,c=L):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,Qc(n,s),A=s.memoizedProps,W=us(r,A),m.props=W,Q=s.pendingProps,G=m.context,j=r.contextType,L=Gs,typeof j=="object"&&j!==null&&(L=_e(j)),C=r.getDerivedStateFromProps,(j=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==Q||G!==L)&&ep(s,m,c,L),Ti=!1,G=s.memoizedState,m.state=G,sr(s,c,m,g),ir();var X=s.memoizedState;A!==Q||G!==X||Ti||n!==null&&n.dependencies!==null&&Ro(n.dependencies)?(typeof C=="function"&&(Au(s,r,C,c),X=s.memoizedState),(W=Ti||tp(s,r,W,c,G,X,L)||n!==null&&n.dependencies!==null&&Ro(n.dependencies))?(j||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,X,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,X,L)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),m.props=c,m.state=X,m.context=L,c=W):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return m=c,Xo(n,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&c?(s.child=ls(s,n.child,null,g),s.child=ls(s,null,r,g)):Ce(n,s,r,g),s.memoizedState=m.state,n=s.child):n=si(n,s,g),n}function mp(n,s,r,c){return ns(),s.flags|=256,Ce(n,s,r,c),s.child}var Cu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tu(n){return{baseLanes:n,cachePool:ag()}}function xu(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=sn),n}function yp(n,s,r){var c=s.pendingProps,g=!1,m=(s.flags&128)!==0,A;if((A=m)||(A=n!==null&&n.memoizedState===null?!1:(re.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,n===null){if(Lt){if(g?Mi(s):Di(),(n=Wt)?(n=Cm(n,bn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ei!==null?{id:On,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},r=$f(n),r.return=s,s.child=r,we=s,Wt=null)):n=null,n===null)throw _i(s);return ch(n)?s.lanes=32:s.lanes=536870912,null}var C=c.children;return c=c.fallback,g?(Di(),g=s.mode,C=Ko({mode:"hidden",children:C},g),c=es(c,g,r,null),C.return=s,c.return=s,C.sibling=c,s.child=C,c=s.child,c.memoizedState=Tu(r),c.childLanes=xu(n,A,r),s.memoizedState=Cu,cr(null,c)):(Mi(s),Ru(s,C))}var L=n.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(m)s.flags&256?(Mi(s),s.flags&=-257,s=Mu(n,s,r)):s.memoizedState!==null?(Di(),s.child=n.child,s.flags|=128,s=null):(Di(),C=c.fallback,g=s.mode,c=Ko({mode:"visible",children:c.children},g),C=es(C,g,r,null),C.flags|=2,c.return=s,C.return=s,c.sibling=C,s.child=c,ls(s,n.child,null,r),c=s.child,c.memoizedState=Tu(r),c.childLanes=xu(n,A,r),s.memoizedState=Cu,s=cr(null,c));else if(Mi(s),ch(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var j=A.dgst;A=j,c=Error(i(419)),c.stack="",c.digest=A,Qa({value:c,source:null,stack:null}),s=Mu(n,s,r)}else if(fe||Xs(n,s,r,!1),A=(r&n.childLanes)!==0,fe||A){if(A=Yt,A!==null&&(c=nf(A,r),c!==0&&c!==L.retryLane))throw L.retryLane=c,ts(n,c),Ye(A,n,c),wu;lh(C)||il(),s=Mu(n,s,r)}else lh(C)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,Wt=An(C.nextSibling),we=s,Lt=!0,wi=null,bn=!1,n!==null&&Jf(s,n),s=Ru(s,c.children),s.flags|=4096);return s}return g?(Di(),C=c.fallback,g=s.mode,L=n.child,j=L.sibling,c=Zn(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,j!==null?C=Zn(j,C):(C=es(C,g,r,null),C.flags|=2),C.return=s,c.return=s,c.sibling=C,s.child=c,cr(null,c),c=s.child,C=n.child.memoizedState,C===null?C=Tu(r):(g=C.cachePool,g!==null?(L=he._currentValue,g=g.parent!==L?{parent:L,pool:L}:g):g=ag(),C={baseLanes:C.baseLanes|r,cachePool:g}),c.memoizedState=C,c.childLanes=xu(n,A,r),s.memoizedState=Cu,cr(n.child,c)):(Mi(s),r=n.child,n=r.sibling,r=Zn(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,n!==null&&(A=s.deletions,A===null?(s.deletions=[n],s.flags|=16):A.push(n)),s.child=r,s.memoizedState=null,r)}function Ru(n,s){return s=Ko({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ko(n,s){return n=Je(22,n,null,s),n.lanes=0,n}function Mu(n,s,r){return ls(s,n.child,null,r),n=Ru(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function bp(n,s,r){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),qc(n.return,s,r)}function Du(n,s,r,c,g,m){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g,treeForkCount:m}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=r,A.tailMode=g,A.treeForkCount=m)}function vp(n,s,r){var c=s.pendingProps,g=c.revealOrder,m=c.tail;c=c.children;var A=re.current,C=(A&2)!==0;if(C?(A=A&1|2,s.flags|=128):A&=1,tt(re,A),Ce(n,s,c,r),c=Lt?$a:0,!C&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bp(n,r,s);else if(n.tag===19)bp(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(r=s.child,g=null;r!==null;)n=r.alternate,n!==null&&Po(n)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),Du(s,!1,g,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Po(n)===null){s.child=g;break}n=g.sibling,g.sibling=r,r=g,g=n}Du(s,!0,r,null,m,c);break;case"together":Du(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function si(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),Oi|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(Xs(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,r=Zn(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=Zn(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function Lu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ro(n)))}function hA(n,s,r){switch(s.tag){case 3:Ct(s,s.stateNode.containerInfo),Ci(s,he,n.memoizedState.cache),ns();break;case 27:case 5:Oe(s);break;case 4:Ct(s,s.stateNode.containerInfo);break;case 10:Ci(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,nu(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Mi(s),s.flags|=128,null):(r&s.child.childLanes)!==0?yp(n,s,r):(Mi(s),n=si(n,s,r),n!==null?n.sibling:null);Mi(s);break;case 19:var g=(n.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(Xs(n,s,r,!1),c=(r&s.childLanes)!==0),g){if(c)return vp(n,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(re,re.current),c)break;return null;case 22:return s.lanes=0,hp(n,s,r,s.pendingProps);case 24:Ci(s,he,n.memoizedState.cache)}return si(n,s,r)}function Ap(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)fe=!0;else{if(!Lu(n,r)&&(s.flags&128)===0)return fe=!1,hA(n,s,r);fe=(n.flags&131072)!==0}else fe=!1,Lt&&(s.flags&1048576)!==0&&Zf(s,$a,s.index);switch(s.lanes=0,s.tag){case 16:t:{var c=s.pendingProps;if(n=rs(s.elementType),s.type=n,typeof n=="function")Pc(n)?(c=us(n,c),s.tag=1,s=pp(null,s,n,c,r)):(s.tag=0,s=_u(null,s,n,c,r));else{if(n!=null){var g=n.$$typeof;if(g===M){s.tag=11,s=lp(null,s,n,c,r);break t}else if(g===D){s.tag=14,s=cp(null,s,n,c,r);break t}}throw s=J(n)||n,Error(i(306,s,""))}}return s;case 0:return _u(n,s,s.type,s.pendingProps,r);case 1:return c=s.type,g=us(c,s.pendingProps),pp(n,s,c,g,r);case 3:t:{if(Ct(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var m=s.memoizedState;g=m.element,Qc(n,s),sr(s,c,null,r);var A=s.memoizedState;if(c=A.cache,Ci(s,he,c),c!==m.cache&&Vc(s,[he],r,!0),ir(),c=A.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=mp(n,s,c,r);break t}else if(c!==g){g=pn(Error(i(424)),s),Qa(g),s=mp(n,s,c,r);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Wt=An(n.firstChild),we=s,Lt=!0,wi=null,bn=!0,r=hg(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ns(),c===g){s=si(n,s,r);break t}Ce(n,s,c,r)}s=s.child}return s;case 26:return Xo(n,s),n===null?(r=Lm(s.type,null,s.pendingProps,null))?s.memoizedState=r:Lt||(r=s.type,n=s.pendingProps,c=ul(dt.current).createElement(r),c[Ee]=s,c[Ue]=n,Te(c,r,n),ye(c),s.stateNode=c):s.memoizedState=Lm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Oe(s),n===null&&Lt&&(c=s.stateNode=Rm(s.type,s.pendingProps,dt.current),we=s,bn=!0,g=Wt,zi(s.type)?(uh=g,Wt=An(c.firstChild)):Wt=g),Ce(n,s,s.pendingProps.children,r),Xo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Lt&&((g=c=Wt)&&(c=HA(c,s.type,s.pendingProps,bn),c!==null?(s.stateNode=c,we=s,Wt=An(c.firstChild),bn=!1,g=!0):g=!1),g||_i(s)),Oe(s),g=s.type,m=s.pendingProps,A=n!==null?n.memoizedProps:null,c=m.children,ah(g,m)?c=null:A!==null&&ah(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=su(n,s,nA,null,null,r),_r._currentValue=g),Xo(n,s),Ce(n,s,c,r),s.child;case 6:return n===null&&Lt&&((n=r=Wt)&&(r=jA(r,s.pendingProps,bn),r!==null?(s.stateNode=r,we=s,Wt=null,n=!0):n=!1),n||_i(s)),null;case 13:return yp(n,s,r);case 4:return Ct(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ls(s,null,c,r):Ce(n,s,c,r),s.child;case 11:return lp(n,s,s.type,s.pendingProps,r);case 7:return Ce(n,s,s.pendingProps,r),s.child;case 8:return Ce(n,s,s.pendingProps.children,r),s.child;case 12:return Ce(n,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Ci(s,s.type,c.value),Ce(n,s,c.children,r),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,ss(s),g=_e(g),c=c(g),s.flags|=1,Ce(n,s,c,r),s.child;case 14:return cp(n,s,s.type,s.pendingProps,r);case 15:return up(n,s,s.type,s.pendingProps,r);case 19:return vp(n,s,r);case 31:return uA(n,s,r);case 22:return hp(n,s,r,s.pendingProps);case 24:return ss(s),c=_e(he),n===null?(g=Kc(),g===null&&(g=Yt,m=Yc(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=r),g=m),s.memoizedState={parent:c,cache:g},$c(s),Ci(s,he,g)):((n.lanes&r)!==0&&(Qc(n,s),sr(s,null,null,r),ir()),g=n.memoizedState,m=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ci(s,he,c)):(c=m.cache,Ci(s,he,c),c!==g.cache&&Vc(s,[he],r,!0))),Ce(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ai(n){n.flags|=4}function Nu(n,s,r,c,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Xp())n.flags|=8192;else throw os=No,Wc}else n.flags&=-16777217}function Sp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Pm(s))if(Xp())n.flags|=8192;else throw os=No,Wc}function Wo(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jd():536870912,n.lanes|=s,aa|=s)}function ur(n,s){if(!Lt)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(s)for(var g=n.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=c,n.childLanes=r,s}function dA(n,s,r){var c=s.pendingProps;switch(Uc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return $t(s),null;case 3:return r=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ei(he),Et(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ys(s)?ai(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jc())),$t(s),null;case 26:var g=s.type,m=s.memoizedState;return n===null?(ai(s),m!==null?($t(s),Sp(s,m)):($t(s),Nu(s,g,null,c,r))):m?m!==n.memoizedState?(ai(s),$t(s),Sp(s,m)):($t(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&ai(s),$t(s),Nu(s,g,n,c,r)),null;case 27:if(Me(s),r=dt.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}n=it.current,Ys(s)?tg(s):(n=Rm(g,c,r),s.stateNode=n,ai(s))}return $t(s),null;case 5:if(Me(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}if(m=it.current,Ys(s))tg(s);else{var A=ul(dt.current);switch(m){case 1:m=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:m=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":m=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":m=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":m=A.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?A.createElement(g,{is:c.is}):A.createElement(g)}}m[Ee]=s,m[Ue]=c;t:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)m.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break t;for(;A.sibling===null;){if(A.return===null||A.return===s)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=m;t:switch(Te(m,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ai(s)}}return $t(s),Nu(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,r),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=dt.current,Ys(s)){if(n=s.stateNode,r=s.memoizedProps,c=null,g=we,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}n[Ee]=s,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||ym(n.nodeValue,r)),n||_i(s,!0)}else n=ul(n).createTextNode(c),n[Ee]=s,s.stateNode=n}return $t(s),null;case 31:if(r=s.memoizedState,n===null||n.memoizedState!==null){if(c=Ys(s),r!==null){if(n===null){if(!c)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ee]=s}else ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),n=!1}else r=jc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return s.flags&256?(en(s),s):(en(s),null);if((s.flags&128)!==0)throw Error(i(558))}return $t(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ys(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ee]=s}else ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),g=!1}else g=jc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(en(s),s):(en(s),null)}return en(s),(s.flags&128)!==0?(s.lanes=r,s):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048)),r!==n&&r&&(s.child.flags|=8192),Wo(s,s.updateQueue),$t(s),null);case 4:return Et(),n===null&&th(s.stateNode.containerInfo),$t(s),null;case 10:return ei(s.type),$t(s),null;case 19:if(K(re),c=s.memoizedState,c===null)return $t(s),null;if(g=(s.flags&128)!==0,m=c.rendering,m===null)if(g)ur(c,!1);else{if(ae!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Po(n),m!==null){for(s.flags|=128,ur(c,!1),n=m.updateQueue,s.updateQueue=n,Wo(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)Wf(r,n),r=r.sibling;return tt(re,re.current&1|2),Lt&&Jn(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&Be()>tl&&(s.flags|=128,g=!0,ur(c,!1),s.lanes=4194304)}else{if(!g)if(n=Po(m),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Wo(s,n),ur(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Lt)return $t(s),null}else 2*Be()-c.renderingStartTime>tl&&r!==536870912&&(s.flags|=128,g=!0,ur(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(n=c.last,n!==null?n.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Be(),n.sibling=null,r=re.current,tt(re,g?r&1|2:r&1),Lt&&Jn(s,c.treeForkCount),n):($t(s),null);case 22:case 23:return en(s),eu(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),r=s.updateQueue,r!==null&&Wo(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),n!==null&&K(as),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ei(he),$t(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function fA(n,s){switch(Uc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ei(he),Et(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(en(s),s.alternate===null)throw Error(i(340));ns()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(en(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ns()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return K(re),null;case 4:return Et(),null;case 10:return ei(s.type),null;case 22:case 23:return en(s),eu(),n!==null&&K(as),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ei(he),null;case 25:return null;default:return null}}function Ep(n,s){switch(Uc(s),s.tag){case 3:ei(he),Et();break;case 26:case 27:case 5:Me(s);break;case 4:Et();break;case 31:s.memoizedState!==null&&en(s);break;case 13:en(s);break;case 19:K(re);break;case 10:ei(s.type);break;case 22:case 23:en(s),eu(),n!==null&&K(as);break;case 24:ei(he)}}function hr(n,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&n)===n){c=void 0;var m=r.create,A=r.inst;c=m(),A.destroy=c}r=r.next}while(r!==g)}}catch(C){zt(s,s.return,C)}}function Li(n,s,r){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var m=g.next;c=m;do{if((c.tag&n)===n){var A=c.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,g=s;var L=r,j=C;try{j()}catch(W){zt(g,L,W)}}}c=c.next}while(c!==m)}}catch(W){zt(s,s.return,W)}}function wp(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{fg(s,r)}catch(c){zt(n,n.return,c)}}}function _p(n,s,r){r.props=us(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){zt(n,s,c)}}function dr(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(g){zt(n,s,g)}}function Bn(n,s){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){zt(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){zt(n,s,g)}else r.current=null}function Cp(n){var s=n.type,r=n.memoizedProps,c=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){zt(n,n.return,g)}}function Ou(n,s,r){try{var c=n.stateNode;BA(c,n.type,r,s),c[Ue]=s}catch(g){zt(n,n.return,g)}}function Tp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&zi(n.type)||n.tag===4}function ku(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Tp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bu(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=$n));else if(c!==4&&(c===27&&zi(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Bu(n,s,r),n=n.sibling;n!==null;)Bu(n,s,r),n=n.sibling}function $o(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(c!==4&&(c===27&&zi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for($o(n,s,r),n=n.sibling;n!==null;)$o(n,s,r),n=n.sibling}function xp(n){var s=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Te(s,c,r),s[Ee]=n,s[Ue]=r}catch(m){zt(n,n.return,m)}}var ri=!1,ge=!1,Pu=!1,Rp=typeof WeakSet=="function"?WeakSet:Set,be=null;function gA(n,s){if(n=n.containerInfo,ih=yl,n=Uf(n),Mc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var A=0,C=-1,L=-1,j=0,W=0,Q=n,G=null;e:for(;;){for(var X;Q!==r||g!==0&&Q.nodeType!==3||(C=A+g),Q!==m||c!==0&&Q.nodeType!==3||(L=A+c),Q.nodeType===3&&(A+=Q.nodeValue.length),(X=Q.firstChild)!==null;)G=Q,Q=X;for(;;){if(Q===n)break e;if(G===r&&++j===g&&(C=A),G===m&&++W===c&&(L=A),(X=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=X}r=C===-1||L===-1?null:{start:C,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(sh={focusedElem:n,selectionRange:r},yl=!1,be=s;be!==null;)if(s=be,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,be=n;else for(;be!==null;){switch(s=be,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)g=n[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,r=s,g=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var lt=us(r.type,g);n=c.getSnapshotBeforeUpdate(lt,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(pt){zt(r,r.return,pt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)oh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":oh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,be=n;break}be=s.return}}function Mp(n,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:li(n,r),c&4&&hr(5,r);break;case 1:if(li(n,r),c&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(A){zt(r,r.return,A)}else{var g=us(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(A){zt(r,r.return,A)}}c&64&&wp(r),c&512&&dr(r,r.return);break;case 3:if(li(n,r),c&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{fg(n,s)}catch(A){zt(r,r.return,A)}}break;case 27:s===null&&c&4&&xp(r);case 26:case 5:li(n,r),s===null&&c&4&&Cp(r),c&512&&dr(r,r.return);break;case 12:li(n,r);break;case 31:li(n,r),c&4&&Np(n,r);break;case 13:li(n,r),c&4&&Op(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=wA.bind(null,r),GA(n,r))));break;case 22:if(c=r.memoizedState!==null||ri,!c){s=s!==null&&s.memoizedState!==null||ge,g=ri;var m=ge;ri=c,(ge=s)&&!m?ci(n,r,(r.subtreeFlags&8772)!==0):li(n,r),ri=g,ge=m}break;case 30:break;default:li(n,r)}}function Dp(n){var s=n.alternate;s!==null&&(n.alternate=null,Dp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&dc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qt=null,je=!1;function oi(n,s,r){for(r=r.child;r!==null;)Lp(n,s,r),r=r.sibling}function Lp(n,s,r){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Pa,r)}catch{}switch(r.tag){case 26:ge||Bn(r,s),oi(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ge||Bn(r,s);var c=Qt,g=je;zi(r.type)&&(Qt=r.stateNode,je=!1),oi(n,s,r),Sr(r.stateNode),Qt=c,je=g;break;case 5:ge||Bn(r,s);case 6:if(c=Qt,g=je,Qt=null,oi(n,s,r),Qt=c,je=g,Qt!==null)if(je)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(r.stateNode)}catch(m){zt(r,s,m)}else try{Qt.removeChild(r.stateNode)}catch(m){zt(r,s,m)}break;case 18:Qt!==null&&(je?(n=Qt,wm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),fa(n)):wm(Qt,r.stateNode));break;case 4:c=Qt,g=je,Qt=r.stateNode.containerInfo,je=!0,oi(n,s,r),Qt=c,je=g;break;case 0:case 11:case 14:case 15:Li(2,r,s),ge||Li(4,r,s),oi(n,s,r);break;case 1:ge||(Bn(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&_p(r,s,c)),oi(n,s,r);break;case 21:oi(n,s,r);break;case 22:ge=(c=ge)||r.memoizedState!==null,oi(n,s,r),ge=c;break;default:oi(n,s,r)}}function Np(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{fa(n)}catch(r){zt(s,s.return,r)}}}function Op(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fa(n)}catch(r){zt(s,s.return,r)}}function pA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Rp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Rp),s;default:throw Error(i(435,n.tag))}}function Qo(n,s){var r=pA(n);s.forEach(function(c){if(!r.has(c)){r.add(c);var g=_A.bind(null,n,c);c.then(g,g)}})}function Ge(n,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],m=n,A=s,C=A;t:for(;C!==null;){switch(C.tag){case 27:if(zi(C.type)){Qt=C.stateNode,je=!1;break t}break;case 5:Qt=C.stateNode,je=!1;break t;case 3:case 4:Qt=C.stateNode.containerInfo,je=!0;break t}C=C.return}if(Qt===null)throw Error(i(160));Lp(m,A,g),Qt=null,je=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)kp(s,n),s=s.sibling}var xn=null;function kp(n,s){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ge(s,n),qe(n),c&4&&(Li(3,n,n.return),hr(3,n),Li(5,n,n.return));break;case 1:Ge(s,n),qe(n),c&512&&(ge||r===null||Bn(r,r.return)),c&64&&ri&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=xn;if(Ge(s,n),qe(n),c&512&&(ge||r===null||Bn(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){t:{c=n.type,r=n.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Ia]||m[Ee]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(c),g.head.insertBefore(m,g.querySelector("head > title"))),Te(m,c,r),m[Ee]=n,ye(m),c=m;break t;case"link":var A=km("link","href",g).get(c+(r.href||""));if(A){for(var C=0;C<A.length;C++)if(m=A[C],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){A.splice(C,1);break e}}m=g.createElement(c),Te(m,c,r),g.head.appendChild(m);break;case"meta":if(A=km("meta","content",g).get(c+(r.content||""))){for(C=0;C<A.length;C++)if(m=A[C],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){A.splice(C,1);break e}}m=g.createElement(c),Te(m,c,r),g.head.appendChild(m);break;default:throw Error(i(468,c))}m[Ee]=n,ye(m),c=m}n.stateNode=c}else Bm(g,n.type,n.stateNode);else n.stateNode=Om(g,c,n.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Bm(g,n.type,n.stateNode):Om(g,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Ou(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ge(s,n),qe(n),c&512&&(ge||r===null||Bn(r,r.return)),r!==null&&c&4&&Ou(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ge(s,n),qe(n),c&512&&(ge||r===null||Bn(r,r.return)),n.flags&32){g=n.stateNode;try{Ps(g,"")}catch(lt){zt(n,n.return,lt)}}c&4&&n.stateNode!=null&&(g=n.memoizedProps,Ou(n,g,r!==null?r.memoizedProps:g)),c&1024&&(Pu=!0);break;case 6:if(Ge(s,n),qe(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(lt){zt(n,n.return,lt)}}break;case 3:if(fl=null,g=xn,xn=hl(s.containerInfo),Ge(s,n),xn=g,qe(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{fa(s.containerInfo)}catch(lt){zt(n,n.return,lt)}Pu&&(Pu=!1,Bp(n));break;case 4:c=xn,xn=hl(n.stateNode.containerInfo),Ge(s,n),qe(n),xn=c;break;case 12:Ge(s,n),qe(n);break;case 31:Ge(s,n),qe(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Qo(n,c)));break;case 13:Ge(s,n),qe(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Jo=Be()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Qo(n,c)));break;case 22:g=n.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,j=ri,W=ge;if(ri=j||g,ge=W||L,Ge(s,n),ge=W,ri=j,qe(n),c&8192)t:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||L||ri||ge||hs(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){L=r=s;try{if(m=L.stateNode,g)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=L.stateNode;var Q=L.memoizedProps.style,G=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;C.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(lt){zt(L,L.return,lt)}}}else if(s.tag===6){if(r===null){L=s;try{L.stateNode.nodeValue=g?"":L.memoizedProps}catch(lt){zt(L,L.return,lt)}}}else if(s.tag===18){if(r===null){L=s;try{var X=L.stateNode;g?_m(X,!0):_m(L.stateNode,!1)}catch(lt){zt(L,L.return,lt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Qo(n,r))));break;case 19:Ge(s,n),qe(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Qo(n,c)));break;case 30:break;case 21:break;default:Ge(s,n),qe(n)}}function qe(n){var s=n.flags;if(s&2){try{for(var r,c=n.return;c!==null;){if(Tp(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,m=ku(n);$o(n,m,g);break;case 5:var A=r.stateNode;r.flags&32&&(Ps(A,""),r.flags&=-33);var C=ku(n);$o(n,C,A);break;case 3:case 4:var L=r.stateNode.containerInfo,j=ku(n);Bu(n,j,L);break;default:throw Error(i(161))}}catch(W){zt(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Bp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Bp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function li(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Mp(n,s.alternate,s),s=s.sibling}function hs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Li(4,s,s.return),hs(s);break;case 1:Bn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&_p(s,s.return,r),hs(s);break;case 27:Sr(s.stateNode);case 26:case 5:Bn(s,s.return),hs(s);break;case 22:s.memoizedState===null&&hs(s);break;case 30:hs(s);break;default:hs(s)}n=n.sibling}}function ci(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=n,m=s,A=m.flags;switch(m.tag){case 0:case 11:case 15:ci(g,m,r),hr(4,m);break;case 1:if(ci(g,m,r),c=m,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(j){zt(c,c.return,j)}if(c=m,g=c.updateQueue,g!==null){var C=c.stateNode;try{var L=g.shared.hiddenCallbacks;if(L!==null)for(g.shared.hiddenCallbacks=null,g=0;g<L.length;g++)dg(L[g],C)}catch(j){zt(c,c.return,j)}}r&&A&64&&wp(m),dr(m,m.return);break;case 27:xp(m);case 26:case 5:ci(g,m,r),r&&c===null&&A&4&&Cp(m),dr(m,m.return);break;case 12:ci(g,m,r);break;case 31:ci(g,m,r),r&&A&4&&Np(g,m);break;case 13:ci(g,m,r),r&&A&4&&Op(g,m);break;case 22:m.memoizedState===null&&ci(g,m,r),dr(m,m.return);break;case 30:break;default:ci(g,m,r)}s=s.sibling}}function Fu(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Za(r))}function zu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Za(n))}function Rn(n,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Pp(n,s,r,c),s=s.sibling}function Pp(n,s,r,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Rn(n,s,r,c),g&2048&&hr(9,s);break;case 1:Rn(n,s,r,c);break;case 3:Rn(n,s,r,c),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Za(n)));break;case 12:if(g&2048){Rn(n,s,r,c),n=s.stateNode;try{var m=s.memoizedProps,A=m.id,C=m.onPostCommit;typeof C=="function"&&C(A,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){zt(s,s.return,L)}}else Rn(n,s,r,c);break;case 31:Rn(n,s,r,c);break;case 13:Rn(n,s,r,c);break;case 23:break;case 22:m=s.stateNode,A=s.alternate,s.memoizedState!==null?m._visibility&2?Rn(n,s,r,c):fr(n,s):m._visibility&2?Rn(n,s,r,c):(m._visibility|=2,na(n,s,r,c,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Fu(A,s);break;case 24:Rn(n,s,r,c),g&2048&&zu(s.alternate,s);break;default:Rn(n,s,r,c)}}function na(n,s,r,c,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,A=s,C=r,L=c,j=A.flags;switch(A.tag){case 0:case 11:case 15:na(m,A,C,L,g),hr(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?na(m,A,C,L,g):fr(m,A):(W._visibility|=2,na(m,A,C,L,g)),g&&j&2048&&Fu(A.alternate,A);break;case 24:na(m,A,C,L,g),g&&j&2048&&zu(A.alternate,A);break;default:na(m,A,C,L,g)}s=s.sibling}}function fr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,c=s,g=c.flags;switch(c.tag){case 22:fr(r,c),g&2048&&Fu(c.alternate,c);break;case 24:fr(r,c),g&2048&&zu(c.alternate,c);break;default:fr(r,c)}s=s.sibling}}var gr=8192;function ia(n,s,r){if(n.subtreeFlags&gr)for(n=n.child;n!==null;)Fp(n,s,r),n=n.sibling}function Fp(n,s,r){switch(n.tag){case 26:ia(n,s,r),n.flags&gr&&n.memoizedState!==null&&eS(r,xn,n.memoizedState,n.memoizedProps);break;case 5:ia(n,s,r);break;case 3:case 4:var c=xn;xn=hl(n.stateNode.containerInfo),ia(n,s,r),xn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=gr,gr=16777216,ia(n,s,r),gr=c):ia(n,s,r));break;default:ia(n,s,r)}}function zp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function pr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];be=c,Up(c,n)}zp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ip(n),n=n.sibling}function Ip(n){switch(n.tag){case 0:case 11:case 15:pr(n),n.flags&2048&&Li(9,n,n.return);break;case 3:pr(n);break;case 12:pr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Zo(n)):pr(n);break;default:pr(n)}}function Zo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];be=c,Up(c,n)}zp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Li(8,s,s.return),Zo(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Zo(s));break;default:Zo(s)}n=n.sibling}}function Up(n,s){for(;be!==null;){var r=be;switch(r.tag){case 0:case 11:case 15:Li(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Za(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,be=c;else t:for(r=n;be!==null;){c=be;var g=c.sibling,m=c.return;if(Dp(c),c===r){be=null;break t}if(g!==null){g.return=m,be=g;break t}be=m}}}var mA={getCacheForType:function(n){var s=_e(he),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r},cacheSignal:function(){return _e(he).controller.signal}},yA=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Yt=null,Tt=null,Rt=0,Ft=0,nn=null,Ni=!1,sa=!1,Iu=!1,ui=0,ae=0,Oi=0,ds=0,Uu=0,sn=0,aa=0,mr=null,Ve=null,Hu=!1,Jo=0,Hp=0,tl=1/0,el=null,ki=null,me=0,Bi=null,ra=null,hi=0,ju=0,Gu=null,jp=null,yr=0,qu=null;function an(){return(Bt&2)!==0&&Rt!==0?Rt&-Rt:F.T!==null?$u():sf()}function Gp(){if(sn===0)if((Rt&536870912)===0||Lt){var n=lo;lo<<=1,(lo&3932160)===0&&(lo=262144),sn=n}else sn=536870912;return n=tn.current,n!==null&&(n.flags|=32),sn}function Ye(n,s,r){(n===Yt&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)&&(oa(n,0),Pi(n,Rt,sn,!1)),za(n,r),((Bt&2)===0||n!==Yt)&&(n===Yt&&((Bt&2)===0&&(ds|=r),ae===4&&Pi(n,Rt,sn,!1)),Pn(n))}function qp(n,s,r){if((Bt&6)!==0)throw Error(i(327));var c=!r&&(s&127)===0&&(s&n.expiredLanes)===0||Fa(n,s),g=c?AA(n,s):Yu(n,s,!0),m=c;do{if(g===0){sa&&!c&&Pi(n,s,0,!1);break}else{if(r=n.current.alternate,m&&!bA(r)){g=Yu(n,s,!1),m=!1;continue}if(g===2){if(m=s,n.errorRecoveryDisabledLanes&m)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;t:{var C=n;g=mr;var L=C.current.memoizedState.isDehydrated;if(L&&(oa(C,A).flags|=256),A=Yu(C,A,!1),A!==2){if(Iu&&!L){C.errorRecoveryDisabledLanes|=m,ds|=m,g=4;break t}m=Ve,Ve=g,m!==null&&(Ve===null?Ve=m:Ve.push.apply(Ve,m))}g=A}if(m=!1,g!==2)continue}}if(g===1){oa(n,0),Pi(n,s,0,!0);break}t:{switch(c=n,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Pi(c,s,sn,!Ni);break t;case 2:Ve=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Jo+300-Be(),10<g)){if(Pi(c,s,sn,!Ni),uo(c,0,!0)!==0)break t;hi=s,c.timeoutHandle=Sm(Vp.bind(null,c,r,Ve,el,Hu,s,sn,ds,aa,Ni,m,"Throttled",-0,0),g);break t}Vp(c,r,Ve,el,Hu,s,sn,ds,aa,Ni,m,null,-0,0)}}break}while(!0);Pn(n)}function Vp(n,s,r,c,g,m,A,C,L,j,W,Q,G,X){if(n.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},Fp(s,m,Q);var lt=(m&62914560)===m?Jo-Be():(m&4194048)===m?Hp-Be():0;if(lt=nS(Q,lt),lt!==null){hi=m,n.cancelPendingCommit=lt(Jp.bind(null,n,s,m,r,c,g,A,C,L,W,Q,null,G,X)),Pi(n,m,A,!j);return}}Jp(n,s,m,r,c,g,A,C,L)}function bA(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],m=g.getSnapshot;g=g.value;try{if(!Ze(m(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pi(n,s,r,c){s&=~Uu,s&=~ds,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var g=s;0<g;){var m=31-Qe(g),A=1<<m;c[m]=-1,g&=~A}r!==0&&tf(n,r,s)}function nl(){return(Bt&6)===0?(br(0),!1):!0}function Vu(){if(Tt!==null){if(Ft===0)var n=Tt.return;else n=Tt,ti=is=null,ou(n),Qs=null,tr=0,n=Tt;for(;n!==null;)Ep(n.alternate,n),n=n.return;Tt=null}}function oa(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,zA(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),hi=0,Vu(),Yt=n,Tt=r=Zn(n.current,null),Rt=s,Ft=0,nn=null,Ni=!1,sa=Fa(n,s),Iu=!1,aa=sn=Uu=ds=Oi=ae=0,Ve=mr=null,Hu=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var g=31-Qe(c),m=1<<g;s|=n[g],c&=~m}return ui=s,wo(),r}function Yp(n,s){St=null,F.H=lr,s===$s||s===Lo?(s=lg(),Ft=3):s===Wc?(s=lg(),Ft=4):Ft=s===wu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,nn=s,Tt===null&&(ae=1,Vo(n,pn(s,n.current)))}function Xp(){var n=tn.current;return n===null?!0:(Rt&4194048)===Rt?vn===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?n===vn:!1}function Kp(){var n=F.H;return F.H=lr,n===null?lr:n}function Wp(){var n=F.A;return F.A=mA,n}function il(){ae=4,Ni||(Rt&4194048)!==Rt&&tn.current!==null||(sa=!0),(Oi&134217727)===0&&(ds&134217727)===0||Yt===null||Pi(Yt,Rt,sn,!1)}function Yu(n,s,r){var c=Bt;Bt|=2;var g=Kp(),m=Wp();(Yt!==n||Rt!==s)&&(el=null,oa(n,s)),s=!1;var A=ae;t:do try{if(Ft!==0&&Tt!==null){var C=Tt,L=nn;switch(Ft){case 8:Vu(),A=6;break t;case 3:case 2:case 9:case 6:tn.current===null&&(s=!0);var j=Ft;if(Ft=0,nn=null,la(n,C,L,j),r&&sa){A=0;break t}break;default:j=Ft,Ft=0,nn=null,la(n,C,L,j)}}vA(),A=ae;break}catch(W){Yp(n,W)}while(!0);return s&&n.shellSuspendCounter++,ti=is=null,Bt=c,F.H=g,F.A=m,Tt===null&&(Yt=null,Rt=0,wo()),A}function vA(){for(;Tt!==null;)$p(Tt)}function AA(n,s){var r=Bt;Bt|=2;var c=Kp(),g=Wp();Yt!==n||Rt!==s?(el=null,tl=Be()+500,oa(n,s)):sa=Fa(n,s);t:do try{if(Ft!==0&&Tt!==null){s=Tt;var m=nn;e:switch(Ft){case 1:Ft=0,nn=null,la(n,s,m,1);break;case 2:case 9:if(rg(m)){Ft=0,nn=null,Qp(s);break}s=function(){Ft!==2&&Ft!==9||Yt!==n||(Ft=7),Pn(n)},m.then(s,s);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:rg(m)?(Ft=0,nn=null,Qp(s)):(Ft=0,nn=null,la(n,s,m,7));break;case 5:var A=null;switch(Tt.tag){case 26:A=Tt.memoizedState;case 5:case 27:var C=Tt;if(A?Pm(A):C.stateNode.complete){Ft=0,nn=null;var L=C.sibling;if(L!==null)Tt=L;else{var j=C.return;j!==null?(Tt=j,sl(j)):Tt=null}break e}}Ft=0,nn=null,la(n,s,m,5);break;case 6:Ft=0,nn=null,la(n,s,m,6);break;case 8:Vu(),ae=6;break t;default:throw Error(i(462))}}SA();break}catch(W){Yp(n,W)}while(!0);return ti=is=null,F.H=c,F.A=g,Bt=r,Tt!==null?0:(Yt=null,Rt=0,wo(),ae)}function SA(){for(;Tt!==null&&!rc();)$p(Tt)}function $p(n){var s=Ap(n.alternate,n,ui);n.memoizedProps=n.pendingProps,s===null?sl(n):Tt=s}function Qp(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=gp(r,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=gp(r,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:ou(s);default:Ep(r,s),s=Tt=Wf(s,ui),s=Ap(r,s,ui)}n.memoizedProps=n.pendingProps,s===null?sl(n):Tt=s}function la(n,s,r,c){ti=is=null,ou(s),Qs=null,tr=0;var g=s.return;try{if(cA(n,g,s,r,Rt)){ae=1,Vo(n,pn(r,n.current)),Tt=null;return}}catch(m){if(g!==null)throw Tt=g,m;ae=1,Vo(n,pn(r,n.current)),Tt=null;return}s.flags&32768?(Lt||c===1?n=!0:sa||(Rt&536870912)!==0?n=!1:(Ni=n=!0,(c===2||c===9||c===3||c===6)&&(c=tn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zp(s,n)):sl(s)}function sl(n){var s=n;do{if((s.flags&32768)!==0){Zp(s,Ni);return}n=s.return;var r=dA(s.alternate,s,ui);if(r!==null){Tt=r;return}if(s=s.sibling,s!==null){Tt=s;return}Tt=s=n}while(s!==null);ae===0&&(ae=5)}function Zp(n,s){do{var r=fA(n.alternate,n);if(r!==null){r.flags&=32767,Tt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){Tt=n;return}Tt=n=r}while(n!==null);ae=6,Tt=null}function Jp(n,s,r,c,g,m,A,C,L){n.cancelPendingCommit=null;do al();while(me!==0);if((Bt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=kc,tv(n,r,m,A,C,L),n===Yt&&(Tt=Yt=null,Rt=0),ra=s,Bi=n,hi=r,ju=m,Gu=g,jp=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,CA(Ms,function(){return sm(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,g=Y.p,Y.p=2,A=Bt,Bt|=4;try{gA(n,s,r)}finally{Bt=A,Y.p=g,F.T=c}}me=1,tm(),em(),nm()}}function tm(){if(me===1){me=0;var n=Bi,s=ra,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=F.T,F.T=null;var c=Y.p;Y.p=2;var g=Bt;Bt|=4;try{kp(s,n);var m=sh,A=Uf(n.containerInfo),C=m.focusedElem,L=m.selectionRange;if(A!==C&&C&&C.ownerDocument&&If(C.ownerDocument.documentElement,C)){if(L!==null&&Mc(C)){var j=L.start,W=L.end;if(W===void 0&&(W=j),"selectionStart"in C)C.selectionStart=j,C.selectionEnd=Math.min(W,C.value.length);else{var Q=C.ownerDocument||document,G=Q&&Q.defaultView||window;if(G.getSelection){var X=G.getSelection(),lt=C.textContent.length,pt=Math.min(L.start,lt),Ht=L.end===void 0?pt:Math.min(L.end,lt);!X.extend&&pt>Ht&&(A=Ht,Ht=pt,pt=A);var I=zf(C,pt),k=zf(C,Ht);if(I&&k&&(X.rangeCount!==1||X.anchorNode!==I.node||X.anchorOffset!==I.offset||X.focusNode!==k.node||X.focusOffset!==k.offset)){var H=Q.createRange();H.setStart(I.node,I.offset),X.removeAllRanges(),pt>Ht?(X.addRange(H),X.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),X.addRange(H))}}}}for(Q=[],X=C;X=X.parentNode;)X.nodeType===1&&Q.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Q.length;C++){var $=Q[C];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}yl=!!ih,sh=ih=null}finally{Bt=g,Y.p=c,F.T=r}}n.current=s,me=2}}function em(){if(me===2){me=0;var n=Bi,s=ra,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=F.T,F.T=null;var c=Y.p;Y.p=2;var g=Bt;Bt|=4;try{Mp(n,s.alternate,s)}finally{Bt=g,Y.p=c,F.T=r}}me=3}}function nm(){if(me===4||me===3){me=0,Rs();var n=Bi,s=ra,r=hi,c=jp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?me=5:(me=0,ra=Bi=null,im(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(ki=null),uc(r),s=s.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Pa,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=F.T,g=Y.p,Y.p=2,F.T=null;try{for(var m=n.onRecoverableError,A=0;A<c.length;A++){var C=c[A];m(C.value,{componentStack:C.stack})}}finally{F.T=s,Y.p=g}}(hi&3)!==0&&al(),Pn(n),g=n.pendingLanes,(r&261930)!==0&&(g&42)!==0?n===qu?yr++:(yr=0,qu=n):yr=0,br(0)}}function im(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Za(s)))}function al(){return tm(),em(),nm(),sm()}function sm(){if(me!==5)return!1;var n=Bi,s=ju;ju=0;var r=uc(hi),c=F.T,g=Y.p;try{Y.p=32>r?32:r,F.T=null,r=Gu,Gu=null;var m=Bi,A=hi;if(me=0,ra=Bi=null,hi=0,(Bt&6)!==0)throw Error(i(331));var C=Bt;if(Bt|=4,Ip(m.current),Pp(m,m.current,A,r),Bt=C,br(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Pa,m)}catch{}return!0}finally{Y.p=g,F.T=c,im(n,s)}}function am(n,s,r){s=pn(r,s),s=Eu(n.stateNode,s,2),n=Ri(n,s,2),n!==null&&(za(n,2),Pn(n))}function zt(n,s,r){if(n.tag===3)am(n,n,r);else for(;s!==null;){if(s.tag===3){am(s,n,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ki===null||!ki.has(c))){n=pn(r,n),r=rp(2),c=Ri(s,r,2),c!==null&&(op(r,c,s,n),za(c,2),Pn(c));break}}s=s.return}}function Xu(n,s,r){var c=n.pingCache;if(c===null){c=n.pingCache=new yA;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(r)||(Iu=!0,g.add(r),n=EA.bind(null,n,s,r),s.then(n,n))}function EA(n,s,r){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Yt===n&&(Rt&r)===r&&(ae===4||ae===3&&(Rt&62914560)===Rt&&300>Be()-Jo?(Bt&2)===0&&oa(n,0):Uu|=r,aa===Rt&&(aa=0)),Pn(n)}function rm(n,s){s===0&&(s=Jd()),n=ts(n,s),n!==null&&(za(n,s),Pn(n))}function wA(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),rm(n,r)}function _A(n,s){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,g=n.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),rm(n,r)}function CA(n,s){return ka(n,s)}var rl=null,ca=null,Ku=!1,ol=!1,Wu=!1,Fi=0;function Pn(n){n!==ca&&n.next===null&&(ca===null?rl=ca=n:ca=ca.next=n),ol=!0,Ku||(Ku=!0,xA())}function br(n,s){if(!Wu&&ol){Wu=!0;do for(var r=!1,c=rl;c!==null;){if(n!==0){var g=c.pendingLanes;if(g===0)var m=0;else{var A=c.suspendedLanes,C=c.pingedLanes;m=(1<<31-Qe(42|n)+1)-1,m&=g&~(A&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,um(c,m))}else m=Rt,m=uo(c,c===Yt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Fa(c,m)||(r=!0,um(c,m));c=c.next}while(r);Wu=!1}}function TA(){om()}function om(){ol=Ku=!1;var n=0;Fi!==0&&FA()&&(n=Fi);for(var s=Be(),r=null,c=rl;c!==null;){var g=c.next,m=lm(c,s);m===0?(c.next=null,r===null?rl=g:r.next=g,g===null&&(ca=r)):(r=c,(n!==0||(m&3)!==0)&&(ol=!0)),c=g}me!==0&&me!==5||br(n),Fi!==0&&(Fi=0)}function lm(n,s){for(var r=n.suspendedLanes,c=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var A=31-Qe(m),C=1<<A,L=g[A];L===-1?((C&r)===0||(C&c)!==0)&&(g[A]=Jb(C,s)):L<=s&&(n.expiredLanes|=C),m&=~C}if(s=Yt,r=Rt,r=uo(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===s&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ki(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Fa(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(c!==null&&Ki(c),uc(r)){case 2:case 8:r=ro;break;case 32:r=Ms;break;case 268435456:r=Kn;break;default:r=Ms}return c=cm.bind(null,n),r=ka(r,c),n.callbackPriority=s,n.callbackNode=r,s}return c!==null&&c!==null&&Ki(c),n.callbackPriority=2,n.callbackNode=null,2}function cm(n,s){if(me!==0&&me!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(al()&&n.callbackNode!==r)return null;var c=Rt;return c=uo(n,n===Yt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(qp(n,c,s),lm(n,Be()),n.callbackNode!=null&&n.callbackNode===r?cm.bind(null,n):null)}function um(n,s){if(al())return null;qp(n,s,!0)}function xA(){IA(function(){(Bt&6)!==0?ka(ao,TA):om()})}function $u(){if(Fi===0){var n=Ks;n===0&&(n=oo,oo<<=1,(oo&261888)===0&&(oo=256)),Fi=n}return Fi}function hm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:po(""+n)}function dm(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function RA(n,s,r,c,g){if(s==="submit"&&r&&r.stateNode===g){var m=hm((g[Ue]||null).action),A=c.submitter;A&&(s=(s=A[Ue]||null)?hm(s.formAction):A.getAttribute("formAction"),s!==null&&(m=s,A=null));var C=new vo("action","action",null,c,g);n.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fi!==0){var L=A?dm(g,A):new FormData(g);mu(r,{pending:!0,data:L,method:g.method,action:m},null,L)}}else typeof m=="function"&&(C.preventDefault(),L=A?dm(g,A):new FormData(g),mu(r,{pending:!0,data:L,method:g.method,action:m},m,L))},currentTarget:g}]})}}for(var Qu=0;Qu<Oc.length;Qu++){var Zu=Oc[Qu],MA=Zu.toLowerCase(),DA=Zu[0].toUpperCase()+Zu.slice(1);Tn(MA,"on"+DA)}Tn(Gf,"onAnimationEnd"),Tn(qf,"onAnimationIteration"),Tn(Vf,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Yv,"onTransitionRun"),Tn(Xv,"onTransitionStart"),Tn(Kv,"onTransitionCancel"),Tn(Yf,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vr));function fm(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],g=c.event;c=c.listeners;t:{var m=void 0;if(s)for(var A=c.length-1;0<=A;A--){var C=c[A],L=C.instance,j=C.currentTarget;if(C=C.listener,L!==m&&g.isPropagationStopped())break t;m=C,g.currentTarget=j;try{m(g)}catch(W){Eo(W)}g.currentTarget=null,m=L}else for(A=0;A<c.length;A++){if(C=c[A],L=C.instance,j=C.currentTarget,C=C.listener,L!==m&&g.isPropagationStopped())break t;m=C,g.currentTarget=j;try{m(g)}catch(W){Eo(W)}g.currentTarget=null,m=L}}}}function xt(n,s){var r=s[hc];r===void 0&&(r=s[hc]=new Set);var c=n+"__bubble";r.has(c)||(gm(s,n,2,!1),r.add(c))}function Ju(n,s,r){var c=0;s&&(c|=4),gm(r,n,c,s)}var ll="_reactListening"+Math.random().toString(36).slice(2);function th(n){if(!n[ll]){n[ll]=!0,of.forEach(function(r){r!=="selectionchange"&&(LA.has(r)||Ju(r,!1,n),Ju(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ll]||(s[ll]=!0,Ju("selectionchange",!1,s))}}function gm(n,s,r,c){switch(Gm(s)){case 2:var g=aS;break;case 8:g=rS;break;default:g=ph}r=g.bind(null,s,r,n),g=void 0,!Ac||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?n.addEventListener(s,r,{capture:!0,passive:g}):n.addEventListener(s,r,!0):g!==void 0?n.addEventListener(s,r,{passive:g}):n.addEventListener(s,r,!1)}function eh(n,s,r,c,g){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var C=c.stateNode.containerInfo;if(C===g)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;C!==null;){if(A=Ls(C),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=m=A;continue t}C=C.parentNode}}c=c.return}vf(function(){var j=m,W=bc(r),Q=[];t:{var G=Xf.get(n);if(G!==void 0){var X=vo,lt=n;switch(n){case"keypress":if(yo(r)===0)break t;case"keydown":case"keyup":X=_v;break;case"focusin":lt="focus",X=_c;break;case"focusout":lt="blur",X=_c;break;case"beforeblur":case"afterblur":X=_c;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=dv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=xv;break;case Gf:case qf:case Vf:X=pv;break;case Yf:X=Mv;break;case"scroll":case"scrollend":X=uv;break;case"wheel":X=Lv;break;case"copy":case"cut":case"paste":X=yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=_f;break;case"toggle":case"beforetoggle":X=Ov}var pt=(s&4)!==0,Ht=!pt&&(n==="scroll"||n==="scrollend"),I=pt?G!==null?G+"Capture":null:G;pt=[];for(var k=j,H;k!==null;){var $=k;if(H=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||H===null||I===null||($=Ha(k,I),$!=null&&pt.push(Ar(k,$,H))),Ht)break;k=k.return}0<pt.length&&(G=new X(G,lt,null,r,W),Q.push({event:G,listeners:pt}))}}if((s&7)===0){t:{if(G=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",G&&r!==yc&&(lt=r.relatedTarget||r.fromElement)&&(Ls(lt)||lt[Ds]))break t;if((X||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,X?(lt=r.relatedTarget||r.toElement,X=j,lt=lt?Ls(lt):null,lt!==null&&(Ht=o(lt),pt=lt.tag,lt!==Ht||pt!==5&&pt!==27&&pt!==6)&&(lt=null)):(X=null,lt=j),X!==lt)){if(pt=Ef,$="onMouseLeave",I="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(pt=_f,$="onPointerLeave",I="onPointerEnter",k="pointer"),Ht=X==null?G:Ua(X),H=lt==null?G:Ua(lt),G=new pt($,k+"leave",X,r,W),G.target=Ht,G.relatedTarget=H,$=null,Ls(W)===j&&(pt=new pt(I,k+"enter",lt,r,W),pt.target=H,pt.relatedTarget=Ht,$=pt),Ht=$,X&&lt)e:{for(pt=NA,I=X,k=lt,H=0,$=I;$;$=pt($))H++;$=0;for(var ft=k;ft;ft=pt(ft))$++;for(;0<H-$;)I=pt(I),H--;for(;0<$-H;)k=pt(k),$--;for(;H--;){if(I===k||k!==null&&I===k.alternate){pt=I;break e}I=pt(I),k=pt(k)}pt=null}else pt=null;X!==null&&pm(Q,G,X,pt,!1),lt!==null&&Ht!==null&&pm(Q,Ht,lt,pt,!0)}}t:{if(G=j?Ua(j):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var Ot=Nf;else if(Df(G))if(Of)Ot=Gv;else{Ot=Hv;var ht=Uv}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&mc(j.elementType)&&(Ot=Nf):Ot=jv;if(Ot&&(Ot=Ot(n,j))){Lf(Q,Ot,r,W);break t}ht&&ht(n,G,j),n==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&pc(G,"number",G.value)}switch(ht=j?Ua(j):window,n){case"focusin":(Df(ht)||ht.contentEditable==="true")&&(Us=ht,Dc=j,Wa=null);break;case"focusout":Wa=Dc=Us=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,Hf(Q,r,W);break;case"selectionchange":if(Vv)break;case"keydown":case"keyup":Hf(Q,r,W)}var wt;if(Tc)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Is?Rf(n,r)&&(Mt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Mt="onCompositionStart");Mt&&(Cf&&r.locale!=="ko"&&(Is||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Is&&(wt=Af()):(Si=W,Sc="value"in Si?Si.value:Si.textContent,Is=!0)),ht=cl(j,Mt),0<ht.length&&(Mt=new wf(Mt,n,null,r,W),Q.push({event:Mt,listeners:ht}),wt?Mt.data=wt:(wt=Mf(r),wt!==null&&(Mt.data=wt)))),(wt=Bv?Pv(n,r):Fv(n,r))&&(Mt=cl(j,"onBeforeInput"),0<Mt.length&&(ht=new wf("onBeforeInput","beforeinput",null,r,W),Q.push({event:ht,listeners:Mt}),ht.data=wt)),RA(Q,n,j,r,W)}fm(Q,s)})}function Ar(n,s,r){return{instance:n,listener:s,currentTarget:r}}function cl(n,s){for(var r=s+"Capture",c=[];n!==null;){var g=n,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=Ha(n,r),g!=null&&c.unshift(Ar(n,g,m)),g=Ha(n,s),g!=null&&c.push(Ar(n,g,m))),n.tag===3)return c;n=n.return}return[]}function NA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function pm(n,s,r,c,g){for(var m=s._reactName,A=[];r!==null&&r!==c;){var C=r,L=C.alternate,j=C.stateNode;if(C=C.tag,L!==null&&L===c)break;C!==5&&C!==26&&C!==27||j===null||(L=j,g?(j=Ha(r,m),j!=null&&A.unshift(Ar(r,j,L))):g||(j=Ha(r,m),j!=null&&A.push(Ar(r,j,L)))),r=r.return}A.length!==0&&n.push({event:s,listeners:A})}var OA=/\r\n?/g,kA=/\u0000|\uFFFD/g;function mm(n){return(typeof n=="string"?n:""+n).replace(OA,`
`).replace(kA,"")}function ym(n,s){return s=mm(s),mm(n)===s}function Ut(n,s,r,c,g,m){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Ps(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Ps(n,""+c);break;case"className":fo(n,"class",c);break;case"tabIndex":fo(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":fo(n,r,c);break;case"style":yf(n,c,m);break;case"data":if(s!=="object"){fo(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=po(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&Ut(n,s,"name",g.name,g,null),Ut(n,s,"formEncType",g.formEncType,g,null),Ut(n,s,"formMethod",g.formMethod,g,null),Ut(n,s,"formTarget",g.formTarget,g,null)):(Ut(n,s,"encType",g.encType,g,null),Ut(n,s,"method",g.method,g,null),Ut(n,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=po(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=$n);break;case"onScroll":c!=null&&xt("scroll",n);break;case"onScrollEnd":c!=null&&xt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=po(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":xt("beforetoggle",n),xt("toggle",n),ho(n,"popover",c);break;case"xlinkActuate":Wn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Wn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Wn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Wn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Wn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Wn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Wn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Wn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Wn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ho(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=lv.get(r)||r,ho(n,r,c))}}function nh(n,s,r,c,g,m){switch(r){case"style":yf(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Ps(n,c):(typeof c=="number"||typeof c=="bigint")&&Ps(n,""+c);break;case"onScroll":c!=null&&xt("scroll",n);break;case"onScrollEnd":c!=null&&xt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),m=n[Ue]||null,m=m!=null?m[r]:null,typeof m=="function"&&n.removeEventListener(s,m,g),typeof c=="function")){typeof m!="function"&&m!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,c,g);break t}r in n?n[r]=c:c===!0?n.setAttribute(r,""):ho(n,r,c)}}}function Te(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",n),xt("load",n);var c=!1,g=!1,m;for(m in r)if(r.hasOwnProperty(m)){var A=r[m];if(A!=null)switch(m){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,m,A,r,null)}}g&&Ut(n,s,"srcSet",r.srcSet,r,null),c&&Ut(n,s,"src",r.src,r,null);return;case"input":xt("invalid",n);var C=m=A=g=null,L=null,j=null;for(c in r)if(r.hasOwnProperty(c)){var W=r[c];if(W!=null)switch(c){case"name":g=W;break;case"type":A=W;break;case"checked":L=W;break;case"defaultChecked":j=W;break;case"value":m=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:Ut(n,s,c,W,r,null)}}ff(n,m,C,L,j,A,g,!1);return;case"select":xt("invalid",n),c=A=m=null;for(g in r)if(r.hasOwnProperty(g)&&(C=r[g],C!=null))switch(g){case"value":m=C;break;case"defaultValue":A=C;break;case"multiple":c=C;default:Ut(n,s,g,C,r,null)}s=m,r=A,n.multiple=!!c,s!=null?Bs(n,!!c,s,!1):r!=null&&Bs(n,!!c,r,!0);return;case"textarea":xt("invalid",n),m=g=c=null;for(A in r)if(r.hasOwnProperty(A)&&(C=r[A],C!=null))switch(A){case"value":c=C;break;case"defaultValue":g=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Ut(n,s,A,C,r,null)}pf(n,c,g,m);return;case"option":for(L in r)r.hasOwnProperty(L)&&(c=r[L],c!=null)&&(L==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Ut(n,s,L,c,r,null));return;case"dialog":xt("beforetoggle",n),xt("toggle",n),xt("cancel",n),xt("close",n);break;case"iframe":case"object":xt("load",n);break;case"video":case"audio":for(c=0;c<vr.length;c++)xt(vr[c],n);break;case"image":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"embed":case"source":case"link":xt("error",n),xt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in r)if(r.hasOwnProperty(j)&&(c=r[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,j,c,r,null)}return;default:if(mc(s)){for(W in r)r.hasOwnProperty(W)&&(c=r[W],c!==void 0&&nh(n,s,W,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&Ut(n,s,C,c,r,null))}function BA(n,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,A=null,C=null,L=null,j=null,W=null;for(X in r){var Q=r[X];if(r.hasOwnProperty(X)&&Q!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":L=Q;default:c.hasOwnProperty(X)||Ut(n,s,X,null,c,Q)}}for(var G in c){var X=c[G];if(Q=r[G],c.hasOwnProperty(G)&&(X!=null||Q!=null))switch(G){case"type":m=X;break;case"name":g=X;break;case"checked":j=X;break;case"defaultChecked":W=X;break;case"value":A=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==Q&&Ut(n,s,G,X,c,Q)}}gc(n,A,C,L,j,W,m,g);return;case"select":X=A=C=G=null;for(m in r)if(L=r[m],r.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":X=L;default:c.hasOwnProperty(m)||Ut(n,s,m,null,c,L)}for(g in c)if(m=c[g],L=r[g],c.hasOwnProperty(g)&&(m!=null||L!=null))switch(g){case"value":G=m;break;case"defaultValue":C=m;break;case"multiple":A=m;default:m!==L&&Ut(n,s,g,m,c,L)}s=C,r=A,c=X,G!=null?Bs(n,!!r,G,!1):!!c!=!!r&&(s!=null?Bs(n,!!r,s,!0):Bs(n,!!r,r?[]:"",!1));return;case"textarea":X=G=null;for(C in r)if(g=r[C],r.hasOwnProperty(C)&&g!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ut(n,s,C,null,c,g)}for(A in c)if(g=c[A],m=r[A],c.hasOwnProperty(A)&&(g!=null||m!=null))switch(A){case"value":G=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&Ut(n,s,A,g,c,m)}gf(n,G,X);return;case"option":for(var lt in r)G=r[lt],r.hasOwnProperty(lt)&&G!=null&&!c.hasOwnProperty(lt)&&(lt==="selected"?n.selected=!1:Ut(n,s,lt,null,c,G));for(L in c)G=c[L],X=r[L],c.hasOwnProperty(L)&&G!==X&&(G!=null||X!=null)&&(L==="selected"?n.selected=G&&typeof G!="function"&&typeof G!="symbol":Ut(n,s,L,G,c,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in r)G=r[pt],r.hasOwnProperty(pt)&&G!=null&&!c.hasOwnProperty(pt)&&Ut(n,s,pt,null,c,G);for(j in c)if(G=c[j],X=r[j],c.hasOwnProperty(j)&&G!==X&&(G!=null||X!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:Ut(n,s,j,G,c,X)}return;default:if(mc(s)){for(var Ht in r)G=r[Ht],r.hasOwnProperty(Ht)&&G!==void 0&&!c.hasOwnProperty(Ht)&&nh(n,s,Ht,void 0,c,G);for(W in c)G=c[W],X=r[W],!c.hasOwnProperty(W)||G===X||G===void 0&&X===void 0||nh(n,s,W,G,c,X);return}}for(var I in r)G=r[I],r.hasOwnProperty(I)&&G!=null&&!c.hasOwnProperty(I)&&Ut(n,s,I,null,c,G);for(Q in c)G=c[Q],X=r[Q],!c.hasOwnProperty(Q)||G===X||G==null&&X==null||Ut(n,s,Q,G,c,X)}function bm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var g=r[c],m=g.transferSize,A=g.initiatorType,C=g.duration;if(m&&C&&bm(A)){for(A=0,C=g.responseEnd,c+=1;c<r.length;c++){var L=r[c],j=L.startTime;if(j>C)break;var W=L.transferSize,Q=L.initiatorType;W&&bm(Q)&&(L=L.responseEnd,A+=W*(L<C?1:(C-j)/(L-j)))}if(--c,s+=8*(m+A)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ih=null,sh=null;function ul(n){return n.nodeType===9?n:n.ownerDocument}function vm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Am(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function ah(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rh=null;function FA(){var n=window.event;return n&&n.type==="popstate"?n===rh?!1:(rh=n,!0):(rh=null,!1)}var Sm=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,IA=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(n){return Em.resolve(null).then(n).catch(UA)}:Sm;function UA(n){setTimeout(function(){throw n})}function zi(n){return n==="head"}function wm(n,s){var r=s,c=0;do{var g=r.nextSibling;if(n.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(g),fa(s);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Sr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Sr(r);for(var m=r.firstChild;m;){var A=m.nextSibling,C=m.nodeName;m[Ia]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=A}}else r==="body"&&Sr(n.ownerDocument.body);r=g}while(r);fa(s)}function _m(n,s){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function oh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":oh(r),dc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function HA(n,s,r,c){for(;n.nodeType===1;){var g=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ia])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=An(n.nextSibling),n===null)break}return null}function jA(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=An(n.nextSibling),n===null))return null;return n}function Cm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=An(n.nextSibling),n===null))return null;return n}function lh(n){return n.data==="$?"||n.data==="$~"}function ch(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function GA(n,s){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||r.readyState!=="loading")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function An(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var uh=null;function Tm(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(s===0)return An(n.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}n=n.nextSibling}return null}function xm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return n;s--}else r!=="/$"&&r!=="/&"||s++}n=n.previousSibling}return null}function Rm(n,s,r){switch(s=ul(r),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Sr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);dc(n)}var Sn=new Map,Mm=new Set;function hl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var di=Y.d;Y.d={f:qA,r:VA,D:YA,C:XA,L:KA,m:WA,X:QA,S:$A,M:ZA};function qA(){var n=di.f(),s=nl();return n||s}function VA(n){var s=Ns(n);s!==null&&s.tag===5&&s.type==="form"?Yg(s):di.r(n)}var ua=typeof document>"u"?null:document;function Dm(n,s,r){var c=ua;if(c&&typeof s=="string"&&s){var g=fn(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),Mm.has(g)||(Mm.add(g),n={rel:n,crossOrigin:r,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),Te(s,"link",n),ye(s),c.head.appendChild(s)))}}function YA(n){di.D(n),Dm("dns-prefetch",n,null)}function XA(n,s){di.C(n,s),Dm("preconnect",n,s)}function KA(n,s,r){di.L(n,s,r);var c=ua;if(c&&n&&s){var g='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+fn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+fn(r.imageSizes)+'"]')):g+='[href="'+fn(n)+'"]';var m=g;switch(s){case"style":m=ha(n);break;case"script":m=da(n)}Sn.has(m)||(n=y({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),Sn.set(m,n),c.querySelector(g)!==null||s==="style"&&c.querySelector(Er(m))||s==="script"&&c.querySelector(wr(m))||(s=c.createElement("link"),Te(s,"link",n),ye(s),c.head.appendChild(s)))}}function WA(n,s){di.m(n,s);var r=ua;if(r&&n){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(n)+'"]',m=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=da(n)}if(!Sn.has(m)&&(n=y({rel:"modulepreload",href:n},s),Sn.set(m,n),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(wr(m)))return}c=r.createElement("link"),Te(c,"link",n),ye(c),r.head.appendChild(c)}}}function $A(n,s,r){di.S(n,s,r);var c=ua;if(c&&n){var g=Os(c).hoistableStyles,m=ha(n);s=s||"default";var A=g.get(m);if(!A){var C={loading:0,preload:null};if(A=c.querySelector(Er(m)))C.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},r),(r=Sn.get(m))&&hh(n,r);var L=A=c.createElement("link");ye(L),Te(L,"link",n),L._p=new Promise(function(j,W){L.onload=j,L.onerror=W}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,dl(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:C},g.set(m,A)}}}function QA(n,s){di.X(n,s);var r=ua;if(r&&n){var c=Os(r).hoistableScripts,g=da(n),m=c.get(g);m||(m=r.querySelector(wr(g)),m||(n=y({src:n,async:!0},s),(s=Sn.get(g))&&dh(n,s),m=r.createElement("script"),ye(m),Te(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(g,m))}}function ZA(n,s){di.M(n,s);var r=ua;if(r&&n){var c=Os(r).hoistableScripts,g=da(n),m=c.get(g);m||(m=r.querySelector(wr(g)),m||(n=y({src:n,async:!0,type:"module"},s),(s=Sn.get(g))&&dh(n,s),m=r.createElement("script"),ye(m),Te(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(g,m))}}function Lm(n,s,r,c){var g=(g=dt.current)?hl(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=ha(r.href),r=Os(g).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=ha(r.href);var m=Os(g).hoistableStyles,A=m.get(n);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,A),(m=g.querySelector(Er(n)))&&!m._p&&(A.instance=m,A.state.loading=5),Sn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Sn.set(n,r),m||JA(g,n,r,A.state))),s&&c===null)throw Error(i(528,""));return A}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=da(r),r=Os(g).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ha(n){return'href="'+fn(n)+'"'}function Er(n){return'link[rel="stylesheet"]['+n+"]"}function Nm(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function JA(n,s,r,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Te(s,"link",r),ye(s),n.head.appendChild(s))}function da(n){return'[src="'+fn(n)+'"]'}function wr(n){return"script[async]"+n}function Om(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+fn(r.href)+'"]');if(c)return s.instance=c,ye(c),c;var g=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),ye(c),Te(c,"style",g),dl(c,r.precedence,n),s.instance=c;case"stylesheet":g=ha(r.href);var m=n.querySelector(Er(g));if(m)return s.state.loading|=4,s.instance=m,ye(m),m;c=Nm(r),(g=Sn.get(g))&&hh(c,g),m=(n.ownerDocument||n).createElement("link"),ye(m);var A=m;return A._p=new Promise(function(C,L){A.onload=C,A.onerror=L}),Te(m,"link",c),s.state.loading|=4,dl(m,r.precedence,n),s.instance=m;case"script":return m=da(r.src),(g=n.querySelector(wr(m)))?(s.instance=g,ye(g),g):(c=r,(g=Sn.get(m))&&(c=y({},r),dh(c,g)),n=n.ownerDocument||n,g=n.createElement("script"),ye(g),Te(g,"link",c),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,dl(c,r.precedence,n));return s.instance}function dl(n,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,m=g,A=0;A<c.length;A++){var C=c[A];if(C.dataset.precedence===s)m=C;else if(m!==g)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function hh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function dh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var fl=null;function km(n,s,r){if(fl===null){var c=new Map,g=fl=new Map;g.set(r,c)}else g=fl,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),g=0;g<r.length;g++){var m=r[g];if(!(m[Ia]||m[Ee]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(s)||"";A=n+A;var C=c.get(A);C?C.push(m):c.set(A,[m])}}return c}function Bm(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function tS(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Pm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function eS(n,s,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=ha(c.href),m=s.querySelector(Er(g));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=gl.bind(n),s.then(n,n)),r.state.loading|=4,r.instance=m,ye(m);return}m=s.ownerDocument||s,c=Nm(c),(g=Sn.get(g))&&hh(c,g),m=m.createElement("link"),ye(m);var A=m;A._p=new Promise(function(C,L){A.onload=C,A.onerror=L}),Te(m,"link",c),r.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=gl.bind(n),s.addEventListener("load",r),s.addEventListener("error",r))}}var fh=0;function nS(n,s){return n.stylesheets&&n.count===0&&ml(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&ml(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&fh===0&&(fh=62500*PA());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ml(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>fh?50:800)+s);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function gl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ml(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pl=null;function ml(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pl=new Map,s.forEach(iS,n),pl=null,gl.call(n))}function iS(n,s){if(!(s.state.loading&4)){var r=pl.get(n);if(r)var c=r.get(null);else{r=new Map,pl.set(n,r);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var A=g[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(r.set(A.dataset.precedence,A),c=A)}c&&r.set(null,c)}g=s.instance,A=g.getAttribute("data-precedence"),m=r.get(A)||c,m===c&&r.set(null,g),r.set(A,g),this.count++,c=gl.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),m?m.parentNode.insertBefore(g,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var _r={$$typeof:T,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function sS(n,s,r,c,g,m,A,C,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lc(0),this.hiddenUpdates=lc(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Fm(n,s,r,c,g,m,A,C,L,j,W,Q){return n=new sS(n,s,r,A,L,j,W,Q,C),s=1,m===!0&&(s|=24),m=Je(3,null,null,s),n.current=m,m.stateNode=n,s=Yc(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:s},$c(m),n}function zm(n){return n?(n=Gs,n):Gs}function Im(n,s,r,c,g,m){g=zm(g),c.context===null?c.context=g:c.pendingContext=g,c=xi(s),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ri(n,c,s),r!==null&&(Ye(r,n,s),nr(r,n,s))}function Um(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function gh(n,s){Um(n,s),(n=n.alternate)&&Um(n,s)}function Hm(n){if(n.tag===13||n.tag===31){var s=ts(n,67108864);s!==null&&Ye(s,n,67108864),gh(n,67108864)}}function jm(n){if(n.tag===13||n.tag===31){var s=an();s=cc(s);var r=ts(n,s);r!==null&&Ye(r,n,s),gh(n,s)}}var yl=!0;function aS(n,s,r,c){var g=F.T;F.T=null;var m=Y.p;try{Y.p=2,ph(n,s,r,c)}finally{Y.p=m,F.T=g}}function rS(n,s,r,c){var g=F.T;F.T=null;var m=Y.p;try{Y.p=8,ph(n,s,r,c)}finally{Y.p=m,F.T=g}}function ph(n,s,r,c){if(yl){var g=mh(c);if(g===null)eh(n,s,c,bl,r),qm(n,c);else if(lS(g,n,s,r,c))c.stopPropagation();else if(qm(n,c),s&4&&-1<oS.indexOf(n)){for(;g!==null;){var m=Ns(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=Wi(m.pendingLanes);if(A!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var L=1<<31-Qe(A);C.entanglements[1]|=L,A&=~L}Pn(m),(Bt&6)===0&&(tl=Be()+500,br(0))}}break;case 31:case 13:C=ts(m,2),C!==null&&Ye(C,m,2),nl(),gh(m,2)}if(m=mh(c),m===null&&eh(n,s,c,bl,r),m===g)break;g=m}g!==null&&c.stopPropagation()}else eh(n,s,c,null,r)}}function mh(n){return n=bc(n),yh(n)}var bl=null;function yh(n){if(bl=null,n=Ls(n),n!==null){var s=o(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=l(s),n!==null)return n;n=null}else if(r===31){if(n=u(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return bl=n,null}function Gm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oc()){case ao:return 2;case ro:return 8;case Ms:case Ln:return 32;case Kn:return 268435456;default:return 32}default:return 32}}var bh=!1,Ii=null,Ui=null,Hi=null,Cr=new Map,Tr=new Map,ji=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qm(n,s){switch(n){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Cr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tr.delete(s.pointerId)}}function xr(n,s,r,c,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[g]},s!==null&&(s=Ns(s),s!==null&&Hm(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function lS(n,s,r,c,g){switch(s){case"focusin":return Ii=xr(Ii,n,s,r,c,g),!0;case"dragenter":return Ui=xr(Ui,n,s,r,c,g),!0;case"mouseover":return Hi=xr(Hi,n,s,r,c,g),!0;case"pointerover":var m=g.pointerId;return Cr.set(m,xr(Cr.get(m)||null,n,s,r,c,g)),!0;case"gotpointercapture":return m=g.pointerId,Tr.set(m,xr(Tr.get(m)||null,n,s,r,c,g)),!0}return!1}function Vm(n){var s=Ls(n.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=l(r),s!==null){n.blockedOn=s,af(n.priority,function(){jm(r)});return}}else if(s===31){if(s=u(r),s!==null){n.blockedOn=s,af(n.priority,function(){jm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=mh(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);yc=c,r.target.dispatchEvent(c),yc=null}else return s=Ns(r),s!==null&&Hm(s),n.blockedOn=r,!1;s.shift()}return!0}function Ym(n,s,r){vl(n)&&r.delete(s)}function cS(){bh=!1,Ii!==null&&vl(Ii)&&(Ii=null),Ui!==null&&vl(Ui)&&(Ui=null),Hi!==null&&vl(Hi)&&(Hi=null),Cr.forEach(Ym),Tr.forEach(Ym)}function Al(n,s){n.blockedOn===s&&(n.blockedOn=null,bh||(bh=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,cS)))}var Sl=null;function Xm(n){Sl!==n&&(Sl=n,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Sl===n&&(Sl=null);for(var s=0;s<n.length;s+=3){var r=n[s],c=n[s+1],g=n[s+2];if(typeof c!="function"){if(yh(c||r)===null)continue;break}var m=Ns(r);m!==null&&(n.splice(s,3),s-=3,mu(m,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function fa(n){function s(L){return Al(L,n)}Ii!==null&&Al(Ii,n),Ui!==null&&Al(Ui,n),Hi!==null&&Al(Hi,n),Cr.forEach(s),Tr.forEach(s);for(var r=0;r<ji.length;r++){var c=ji[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ji.length&&(r=ji[0],r.blockedOn===null);)Vm(r),r.blockedOn===null&&ji.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],m=r[c+1],A=g[Ue]||null;if(typeof m=="function")A||Xm(r);else if(A){var C=null;if(m&&m.hasAttribute("formAction")){if(g=m,A=m[Ue]||null)C=A.formAction;else if(yh(g)!==null)continue}else C=A.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),Xm(r)}}}function Km(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function vh(n){this._internalRoot=n}El.prototype.render=vh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,c=an();Im(r,c,n,s,null,null)},El.prototype.unmount=vh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Im(n.current,2,null,n,null,null),nl(),s[Ds]=null}};function El(n){this._internalRoot=n}El.prototype.unstable_scheduleHydration=function(n){if(n){var s=sf();n={blockedOn:null,target:n,priority:s};for(var r=0;r<ji.length&&s!==0&&s<ji[r].priority;r++);ji.splice(r,0,n),r===0&&Vm(n)}};var Wm=t.version;if(Wm!=="19.2.4")throw Error(i(527,Wm,"19.2.4"));Y.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var uS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Pa=wl.inject(uS),$e=wl}catch{}}return Mr.createRoot=function(n,s){if(!a(n))throw Error(i(299));var r=!1,c="",g=np,m=ip,A=sp;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Fm(n,1,!1,null,null,r,c,null,g,m,A,Km),n[Ds]=s.current,th(n),new vh(s)},Mr.hydrateRoot=function(n,s,r){if(!a(n))throw Error(i(299));var c=!1,g="",m=np,A=ip,C=sp,L=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(A=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),s=Fm(n,1,!0,s,r??null,c,g,L,m,A,C,Km),s.context=zm(null),r=s.current,c=an(),c=cc(c),g=xi(c),g.callback=null,Ri(r,g,c),r=c,s.current.lanes=r,za(s,r),Pn(s),n[Ds]=s.current,th(n),new El(s)},Mr.version="19.2.4",Mr}var oy;function SS(){if(oy)return wh.exports;oy=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),wh.exports=AS(),wh.exports}var ES=SS();const wS=Yl(ES);var ly="popstate";function cy(h){return typeof h=="object"&&h!=null&&"pathname"in h&&"search"in h&&"hash"in h&&"state"in h&&"key"in h}function _S(h={}){function t(a,o){let{pathname:l="/",search:u="",hash:d=""}=ws(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),ld("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let l=a.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=a.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Hr(o))}function i(a,o){Cn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return TS(t,e,i,h)}function te(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Cn(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function CS(){return Math.random().toString(36).substring(2,10)}function uy(h,t){return{usr:h.state,key:h.key,idx:t,masked:h.unstable_mask?{pathname:h.pathname,search:h.search,hash:h.hash}:void 0}}function ld(h,t,e=null,i,a){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?ws(t):t,state:e,key:t&&t.key||i||CS(),unstable_mask:a}}function Hr({pathname:h="/",search:t="",hash:e=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(h+=e.charAt(0)==="#"?e:"#"+e),h}function ws(h){let t={};if(h){let e=h.indexOf("#");e>=0&&(t.hash=h.substring(e),h=h.substring(0,e));let i=h.indexOf("?");i>=0&&(t.search=h.substring(i),h=h.substring(0,i)),h&&(t.pathname=h)}return t}function TS(h,t,e,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=p(),w=_==null?null:_-f;f=_,d&&d({action:u,location:S.location,delta:w})}function b(_,w){u="PUSH";let x=cy(_)?_:ld(S.location,_,w);e&&e(x,_),f=p()+1;let T=uy(x,f),M=S.createHref(x.unstable_mask||x);try{l.pushState(T,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(M)}o&&d&&d({action:u,location:S.location,delta:1})}function v(_,w){u="REPLACE";let x=cy(_)?_:ld(S.location,_,w);e&&e(x,_),f=p();let T=uy(x,f),M=S.createHref(x.unstable_mask||x);l.replaceState(T,"",M),o&&d&&d({action:u,location:S.location,delta:0})}function E(_){return xS(_)}let S={get action(){return u},get location(){return h(a,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(ly,y),d=_,()=>{a.removeEventListener(ly,y),d=null}},createHref(_){return t(a,_)},createURL:E,encodeLocation(_){let w=E(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:v,go(_){return l.go(_)}};return S}function xS(h,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),te(e,"No window.location.(origin|href) available to create URL");let i=typeof h=="string"?h:Hr(h);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function x0(h,t,e="/"){return RS(h,t,e,!1)}function RS(h,t,e,i){let a=typeof t=="string"?ws(t):t,o=pi(a.pathname||"/",e);if(o==null)return null;let l=R0(h);MS(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=US(o);u=zS(l[d],f,i)}return u}function R0(h,t=[],e=[],i="",a=!1){let o=(l,u,d=a,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&d)return;te(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let y=Yn([i,p.relativePath]),b=e.concat(p);l.children&&l.children.length>0&&(te(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),R0(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:PS(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of M0(l.path))o(l,u,!0,d)}),t}function M0(h){let t=h.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=M0(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function MS(h){h.sort((t,e)=>t.score!==e.score?e.score-t.score:FS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var DS=/^:[\w-]+$/,LS=3,NS=2,OS=1,kS=10,BS=-2,hy=h=>h==="*";function PS(h,t){let e=h.split("/"),i=e.length;return e.some(hy)&&(i+=BS),t&&(i+=NS),e.filter(a=>!hy(a)).reduce((a,o)=>a+(DS.test(o)?LS:o===""?OS:kS),i)}function FS(h,t){return h.length===t.length&&h.slice(0,-1).every((i,a)=>i===t[a])?h[h.length-1]-t[t.length-1]:0}function zS(h,t,e=!1){let{routesMeta:i}=h,a={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=o==="/"?t:t.slice(o.length)||"/",y=Ul({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),b=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=Ul({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:Yn([o,y.pathname]),pathnameBase:qS(Yn([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Yn([o,y.pathnameBase]))}return l}function Ul(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[e,i]=IS(h.path,h.caseSensitive,h.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:y},b)=>{if(p==="*"){let E=u[b]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const v=u[b];return y&&!v?f[p]=void 0:f[p]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:h}}function IS(h,t=!1,e=!0){Cn(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let i=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d,f,p)=>{if(i.push({paramName:u,isOptional:d!=null}),d){let y=p.charAt(f+l.length);return y&&y!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(i.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function US(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cn(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function pi(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=h.charAt(e);return i&&i!=="/"?null:h.slice(e)||"/"}var HS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jS(h,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof h=="string"?ws(h):h,o;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?o=dy(e.substring(1),"/"):o=dy(e,t)):o=t,{pathname:o,search:VS(i),hash:YS(a)}}function dy(h,t){let e=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function xh(h,t,e,i){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GS(h){return h.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function _d(h){let t=GS(h);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Xl(h,t,e,i=!1){let a;typeof h=="string"?a=ws(h):(a={...h},te(!a.pathname||!a.pathname.includes("?"),xh("?","pathname","search",a)),te(!a.pathname||!a.pathname.includes("#"),xh("#","pathname","hash",a)),te(!a.search||!a.search.includes("#"),xh("#","search","hash",a)));let o=h===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=e;else{let y=t.length-1;if(!i&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=jS(a,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Yn=h=>h.join("/").replace(/\/\/+/g,"/"),qS=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),VS=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,YS=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h,XS=class{constructor(h,t,e,i=!1){this.status=h,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function KS(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}function WS(h){return h.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var D0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function L0(h,t){let e=h;if(typeof e!="string"||!HS.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,a=!1;if(D0)try{let o=new URL(window.location.href),l=e.startsWith("//")?new URL(o.protocol+e):new URL(e),u=pi(l.pathname,t);l.origin===o.origin&&u!=null?e=u+l.search+l.hash:a=!0}catch{Cn(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var N0=["POST","PUT","PATCH","DELETE"];new Set(N0);var $S=["GET",...N0];new Set($S);var Ma=P.createContext(null);Ma.displayName="DataRouter";var Kl=P.createContext(null);Kl.displayName="DataRouterState";var QS=P.createContext(!1),O0=P.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var ZS=P.createContext(new Map);ZS.displayName="Fetchers";var JS=P.createContext(null);JS.displayName="Await";var hn=P.createContext(null);hn.displayName="Navigation";var Kr=P.createContext(null);Kr.displayName="Location";var Xn=P.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var Cd=P.createContext(null);Cd.displayName="RouteError";var k0="REACT_ROUTER_ERROR",tE="REDIRECT",eE="ROUTE_ERROR_RESPONSE";function nE(h){if(h.startsWith(`${k0}:${tE}:{`))try{let t=JSON.parse(h.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function iE(h){if(h.startsWith(`${k0}:${eE}:{`))try{let t=JSON.parse(h.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new XS(t.status,t.statusText,t.data)}catch{}}function sE(h,{relative:t}={}){te(Da(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=P.useContext(hn),{hash:a,pathname:o,search:l}=Wr(h,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:Yn([e,o])),i.createHref({pathname:u,search:l,hash:a})}function Da(){return P.useContext(Kr)!=null}function bi(){return te(Da(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Kr).location}var B0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P0(h){P.useContext(hn).static||P.useLayoutEffect(h)}function F0(){let{isDataRoute:h}=P.useContext(Xn);return h?yE():aE()}function aE(){te(Da(),"useNavigate() may be used only in the context of a <Router> component.");let h=P.useContext(Ma),{basename:t,navigator:e}=P.useContext(hn),{matches:i}=P.useContext(Xn),{pathname:a}=bi(),o=JSON.stringify(_d(i)),l=P.useRef(!1);return P0(()=>{l.current=!0}),P.useCallback((d,f={})=>{if(Cn(l.current,B0),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=Xl(d,JSON.parse(o),a,f.relative==="path");h==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Yn([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,o,a,h])}P.createContext(null);function Wr(h,{relative:t}={}){let{matches:e}=P.useContext(Xn),{pathname:i}=bi(),a=JSON.stringify(_d(e));return P.useMemo(()=>Xl(h,JSON.parse(a),i,t==="path"),[h,a,i,t])}function rE(h,t){return z0(h,t)}function z0(h,t,e){te(Da(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(hn),{matches:a}=P.useContext(Xn),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let _=f&&f.path||"";U0(u,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=bi(),y;if(t){let _=typeof t=="string"?ws(t):t;te(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),y=_}else y=p;let b=y.pathname||"/",v=b;if(d!=="/"){let _=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=x0(h,{pathname:v});Cn(f||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Cn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=hE(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Yn([d,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Yn([d,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),a,e);return t&&S?P.createElement(Kr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...y},navigationType:"POP"}},S):S}function oE(){let h=mE(),t=KS(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),e=h instanceof Error?h.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),e?P.createElement("pre",{style:a},e):null,l)}var lE=P.createElement(oE,null),I0=class extends P.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.onError?this.props.onError(h,t):console.error("React Router caught the following error during render",h)}render(){let h=this.state.error;if(this.context&&typeof h=="object"&&h&&"digest"in h&&typeof h.digest=="string"){const e=iE(h.digest);e&&(h=e)}let t=h!==void 0?P.createElement(Xn.Provider,{value:this.props.routeContext},P.createElement(Cd.Provider,{value:h,children:this.props.component})):this.props.children;return this.context?P.createElement(cE,{error:h},t):t}};I0.contextType=QS;var Rh=new WeakMap;function cE({children:h,error:t}){let{basename:e}=P.useContext(hn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=nE(t.digest);if(i){let a=Rh.get(t);if(a)throw a;let o=L0(i.location,e);if(D0&&!Rh.get(t))if(o.isExternal||i.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:i.replace}));throw Rh.set(t,l),l}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return h}function uE({routeContext:h,match:t,children:e}){let i=P.useContext(Ma);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Xn.Provider,{value:h},e)}function hE(h,t=[],e){let i=e?.state;if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let a=h,o=i?.errors;if(o!=null){let p=a.findIndex(y=>y.route.id&&o?.[y.route.id]!==void 0);te(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let l=!1,u=-1;if(e&&i){l=i.renderFallback;for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(u=p),y.route.id){let{loaderData:b,errors:v}=i,E=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!v||v[y.route.id]===void 0);if(y.route.lazy||E){e.isStatic&&(l=!0),u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}}let d=e?.onError,f=i&&d?(p,y)=>{d(p,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:WS(i.matches),errorInfo:y})}:void 0;return a.reduceRight((p,y,b)=>{let v,E=!1,S=null,_=null;i&&(v=o&&y.route.id?o[y.route.id]:void 0,S=y.route.errorElement||lE,l&&(u<0&&b===0?(U0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,_=null):u===b&&(E=!0,_=y.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,b+1)),x=()=>{let T;return v?T=S:E?T=_:y.route.Component?T=P.createElement(y.route.Component,null):y.route.element?T=y.route.element:T=p,P.createElement(uE,{match:y,routeContext:{outlet:p,matches:w,isDataRoute:i!=null},children:T})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?P.createElement(I0,{location:i.location,revalidation:i.revalidation,component:S,error:v,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:f}):x()},null)}function Td(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dE(h){let t=P.useContext(Ma);return te(t,Td(h)),t}function fE(h){let t=P.useContext(Kl);return te(t,Td(h)),t}function gE(h){let t=P.useContext(Xn);return te(t,Td(h)),t}function xd(h){let t=gE(h),e=t.matches[t.matches.length-1];return te(e.route.id,`${h} can only be used on routes that contain a unique "id"`),e.route.id}function pE(){return xd("useRouteId")}function mE(){let h=P.useContext(Cd),t=fE("useRouteError"),e=xd("useRouteError");return h!==void 0?h:t.errors?.[e]}function yE(){let{router:h}=dE("useNavigate"),t=xd("useNavigate"),e=P.useRef(!1);return P0(()=>{e.current=!0}),P.useCallback(async(a,o={})=>{Cn(e.current,B0),e.current&&(typeof a=="number"?await h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var fy={};function U0(h,t,e){!t&&!fy[h]&&(fy[h]=!0,Cn(!1,e))}P.memo(bE);function bE({routes:h,future:t,state:e,isStatic:i,onError:a}){return z0(h,void 0,{state:e,isStatic:i,onError:a})}function vE({to:h,replace:t,state:e,relative:i}){te(Da(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(hn);Cn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(Xn),{pathname:l}=bi(),u=F0(),d=Xl(h,_d(o),l,i==="path"),f=JSON.stringify(d);return P.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:i})},[u,f,i,t,e]),null}function gs(h){te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AE({basename:h="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){te(!Da(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=h.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[u,a,o,l]);typeof e=="string"&&(e=ws(e));let{pathname:f="/",search:p="",hash:y="",state:b=null,key:v="default",unstable_mask:E}=e,S=P.useMemo(()=>{let _=pi(f,u);return _==null?null:{location:{pathname:_,search:p,hash:y,state:b,key:v,unstable_mask:E},navigationType:i}},[u,f,p,y,b,v,i,E]);return Cn(S!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:P.createElement(hn.Provider,{value:d},P.createElement(Kr.Provider,{children:t,value:S}))}function SE({children:h,location:t}){return rE(cd(h),t)}function cd(h,t=[]){let e=[];return P.Children.forEach(h,(i,a)=>{if(!P.isValidElement(i))return;let o=[...t,a];if(i.type===P.Fragment){e.push.apply(e,cd(i.props.children,o));return}te(i.type===gs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),te(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=cd(i.props.children,o)),e.push(l)}),e}var Pl="get",Fl="application/x-www-form-urlencoded";function Wl(h){return typeof HTMLElement<"u"&&h instanceof HTMLElement}function EE(h){return Wl(h)&&h.tagName.toLowerCase()==="button"}function wE(h){return Wl(h)&&h.tagName.toLowerCase()==="form"}function _E(h){return Wl(h)&&h.tagName.toLowerCase()==="input"}function CE(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function TE(h,t){return h.button===0&&(!t||t==="_self")&&!CE(h)}var _l=null;function xE(){if(_l===null)try{new FormData(document.createElement("form"),0),_l=!1}catch{_l=!0}return _l}var RE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mh(h){return h!=null&&!RE.has(h)?(Cn(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fl}"`),null):h}function ME(h,t){let e,i,a,o,l;if(wE(h)){let u=h.getAttribute("action");i=u?pi(u,t):null,e=h.getAttribute("method")||Pl,a=Mh(h.getAttribute("enctype"))||Fl,o=new FormData(h)}else if(EE(h)||_E(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(i=d?pi(d,t):null,e=h.getAttribute("formmethod")||u.getAttribute("method")||Pl,a=Mh(h.getAttribute("formenctype"))||Mh(u.getAttribute("enctype"))||Fl,o=new FormData(u,h),!xE()){let{name:f,type:p,value:y}=h;if(p==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(Wl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Pl,i=null,a=Fl,l=h}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rd(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function DE(h,t,e,i){let a=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&pi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function LE(h,t){if(h.id in t)return t[h.id];try{let e=await import(h.module);return t[h.id]=e,e}catch(e){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NE(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function OE(h,t,e){let i=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await LE(o,e);return l.links?l.links():[]}return[]}));return FE(i.flat(1).filter(NE).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function gy(h,t,e,i,a,o){let l=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function kE(h,t,{includeHydrateFallback:e}={}){return BE(h.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function BE(h){return[...new Set(h)]}function PE(h){let t={},e=Object.keys(h).sort();for(let i of e)t[i]=h[i];return t}function FE(h,t){let e=new Set;return new Set(t),h.reduce((i,a)=>{let o=JSON.stringify(PE(a));return e.has(o)||(e.add(o),i.push({key:o,link:a})),i},[])}function H0(){let h=P.useContext(Ma);return Rd(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function zE(){let h=P.useContext(Kl);return Rd(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var Md=P.createContext(void 0);Md.displayName="FrameworkContext";function j0(){let h=P.useContext(Md);return Rd(h,"You must render this element inside a <HydratedRouter> element"),h}function IE(h,t){let e=P.useContext(Md),[i,a]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=t,b=P.useRef(null);P.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=w=>{w.forEach(x=>{l(x.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[h]),P.useEffect(()=>{if(i){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[i]);let v=()=>{a(!0)},E=()=>{a(!1),l(!1)};return e?h!=="intent"?[o,b,{}]:[o,b,{onFocus:Dr(u,v),onBlur:Dr(d,E),onMouseEnter:Dr(f,v),onMouseLeave:Dr(p,E),onTouchStart:Dr(y,v)}]:[!1,b,{}]}function Dr(h,t){return e=>{h&&h(e),e.defaultPrevented||t(e)}}function UE({page:h,...t}){let{router:e}=H0(),i=P.useMemo(()=>x0(e.routes,h,e.basename),[e.routes,h,e.basename]);return i?P.createElement(jE,{page:h,matches:i,...t}):null}function HE(h){let{manifest:t,routeModules:e}=j0(),[i,a]=P.useState([]);return P.useEffect(()=>{let o=!1;return OE(h,t,e).then(l=>{o||a(l)}),()=>{o=!0}},[h,t,e]),i}function jE({page:h,matches:t,...e}){let i=bi(),{future:a,manifest:o,routeModules:l}=j0(),{basename:u}=H0(),{loaderData:d,matches:f}=zE(),p=P.useMemo(()=>gy(h,t,f,o,i,"data"),[h,t,f,o,i]),y=P.useMemo(()=>gy(h,t,f,o,i,"assets"),[h,t,f,o,i]),b=P.useMemo(()=>{if(h===i.pathname+i.search+i.hash)return[];let S=new Set,_=!1;if(t.forEach(x=>{let T=o.routes[x.route.id];!T||!T.hasLoader||(!p.some(M=>M.route.id===x.route.id)&&x.route.id in d&&l[x.route.id]?.shouldRevalidate||T.hasClientLoader?_=!0:S.add(x.route.id))}),S.size===0)return[];let w=DE(h,u,a.unstable_trailingSlashAwareDataRequests,"data");return _&&S.size>0&&w.searchParams.set("_routes",t.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[u,a.unstable_trailingSlashAwareDataRequests,d,i,o,p,t,h,l]),v=P.useMemo(()=>kE(y,o),[y,o]),E=HE(y);return P.createElement(P.Fragment,null,b.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),E.map(({key:S,link:_})=>P.createElement("link",{key:S,nonce:e.nonce,..._,crossOrigin:_.crossOrigin??e.crossOrigin})))}function GE(...h){return t=>{h.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var qE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qE&&(window.__reactRouterVersion="7.13.1")}catch{}function VE({basename:h,children:t,unstable_useTransitions:e,window:i}){let a=P.useRef();a.current==null&&(a.current=_S({window:i,v5Compat:!0}));let o=a.current,[l,u]=P.useState({action:o.action,location:o.location}),d=P.useCallback(f=>{e===!1?u(f):P.startTransition(()=>u(f))},[e]);return P.useLayoutEffect(()=>o.listen(d),[o,d]),P.createElement(AE,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:e})}var G0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q0=P.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,unstable_mask:u,state:d,target:f,to:p,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:v,...E},S){let{basename:_,navigator:w,unstable_useTransitions:x}=P.useContext(hn),T=typeof p=="string"&&G0.test(p),M=L0(p,_);p=M.to;let N=sE(p,{relative:a}),R=bi(),D=null;if(u){let ot=Xl(u,[],R.unstable_mask?R.unstable_mask.pathname:"/",!0);_!=="/"&&(ot.pathname=ot.pathname==="/"?_:Yn([_,ot.pathname])),D=w.createHref(ot)}let[z,U,q]=IE(i,E),V=KE(p,{replace:l,unstable_mask:u,state:d,target:f,preventScrollReset:y,relative:a,viewTransition:b,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});function Z(ot){t&&t(ot),ot.defaultPrevented||V(ot)}let et=!(M.isExternal||o),J=P.createElement("a",{...E,...q,href:(et?D:void 0)||M.absoluteURL||N,onClick:et?Z:t,ref:GE(S,U),target:f,"data-discover":!T&&e==="render"?"true":void 0});return z&&!T?P.createElement(P.Fragment,null,J,P.createElement(UE,{page:N})):J});q0.displayName="Link";var ud=P.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},p){let y=Wr(l,{relative:f.relative}),b=bi(),v=P.useContext(Kl),{navigator:E,basename:S}=P.useContext(hn),_=v!=null&&JE(y)&&u===!0,w=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,x=b.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(x=x.toLowerCase(),T=T?T.toLowerCase():null,w=w.toLowerCase()),T&&S&&(T=pi(T,S)||T);const M=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=x===w||!a&&x.startsWith(w)&&x.charAt(M)==="/",R=T!=null&&(T===w||!a&&T.startsWith(w)&&T.charAt(w.length)==="/"),D={isActive:N,isPending:R,isTransitioning:_},z=N?t:void 0,U;typeof i=="function"?U=i(D):U=[i,N?"active":null,R?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(D):o;return P.createElement(q0,{...f,"aria-current":z,className:U,ref:p,style:q,to:l,viewTransition:u},typeof d=="function"?d(D):d)});ud.displayName="NavLink";var YE=P.forwardRef(({discover:h="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:o,method:l=Pl,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,unstable_defaultShouldRevalidate:b,...v},E)=>{let{unstable_useTransitions:S}=P.useContext(hn),_=QE(),w=ZE(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&G0.test(u),M=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let R=N.nativeEvent.submitter,D=R?.getAttribute("formmethod")||l,z=()=>_(R||N.currentTarget,{fetcherKey:t,method:D,navigate:e,replace:a,state:o,relative:f,preventScrollReset:p,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&e!==!1?P.startTransition(()=>z()):z()};return P.createElement("form",{ref:E,method:x,action:w,onSubmit:i?d:M,...v,"data-discover":!T&&h==="render"?"true":void 0})});YE.displayName="Form";function XE(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V0(h){let t=P.useContext(Ma);return te(t,XE(h)),t}function KE(h,{target:t,replace:e,unstable_mask:i,state:a,preventScrollReset:o,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let p=F0(),y=bi(),b=Wr(h,{relative:l});return P.useCallback(v=>{if(TE(v,t)){v.preventDefault();let E=e!==void 0?e:Hr(y)===Hr(b),S=()=>p(h,{replace:E,unstable_mask:i,state:a,preventScrollReset:o,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:d});f?P.startTransition(()=>S()):S()}},[y,p,b,e,i,a,t,h,o,l,u,d,f])}var WE=0,$E=()=>`__${String(++WE)}__`;function QE(){let{router:h}=V0("useSubmit"),{basename:t}=P.useContext(hn),e=pE(),i=h.fetch,a=h.navigate;return P.useCallback(async(o,l={})=>{let{action:u,method:d,encType:f,formData:p,body:y}=ME(o,t);if(l.navigate===!1){let b=l.fetcherKey||$E();await i(b,e,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:y,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await a(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:y,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,a,t,e])}function ZE(h,{relative:t}={}){let{basename:e}=P.useContext(hn),i=P.useContext(Xn);te(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Wr(h||".",{relative:t})},l=bi();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();o.search=p?`?${p}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Yn([e,o.pathname])),Hr(o)}function JE(h,{relative:t}={}){let e=P.useContext(O0);te(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=V0("useViewTransitionState"),a=Wr(h,{relative:t});if(!e.isTransitioning)return!1;let o=pi(e.currentLocation.pathname,i)||e.currentLocation.pathname,l=pi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Ul(a.pathname,l)!=null||Ul(a.pathname,o)!=null}const py=[{to:"/",label:"Home"},{to:"/about",label:"About"},{to:"/resume",label:"Resume"},{to:"/quick-glance",label:"Quick Glance"},{to:"/projects",label:"Projects"}];function t1(){const[h,t]=P.useState(!1),e=P.useRef(null);return P.useEffect(()=>{const i=a=>{a.key==="Escape"&&t(!1)};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[]),P.useEffect(()=>{if(!h)return;const i=a=>{e.current&&(e.current.contains(a.target)||t(!1))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[h]),P.useEffect(()=>(document.body.style.overflow=h?"hidden":"",()=>{document.body.style.overflow=""}),[h]),B.jsxs("header",{className:"header",children:[B.jsxs("div",{className:"header-inner",children:[B.jsxs("div",{className:"brand",children:[B.jsx("div",{className:"brand-title",children:"Mike Lalonde"}),B.jsx("div",{className:"brand-subtitle",children:"mlalonde@yrmindinsite.ca  Halifax, NS"}),B.jsx("div",{className:"brand-phone",children:"902 225 6527"}),B.jsx("div",{className:"brand-meta",children:"AI  Web  Embedded"})]}),B.jsx("nav",{className:"nav","aria-label":"Primary navigation",children:py.map(i=>B.jsx(ud,{to:i.to,className:({isActive:a})=>a?"nav-link active":"nav-link",children:i.label},i.to))}),B.jsx("a",{href:"https://github.com/Mike-Lalonde",target:"_blank",rel:"noreferrer",className:"nav-link nav-github",children:"GitHub"}),B.jsxs("button",{className:"nav-burger",type:"button","aria-label":h?"Close menu":"Open menu","aria-expanded":h,onClick:()=>t(i=>!i),children:[B.jsx("span",{}),B.jsx("span",{}),B.jsx("span",{})]})]}),h&&B.jsx("div",{className:"nav-overlay",role:"presentation",children:B.jsxs("div",{className:"nav-panel",ref:e,role:"dialog","aria-modal":"true",children:[B.jsxs("div",{className:"nav-panel-head",children:[B.jsx("div",{className:"nav-panel-title",children:"Menu"}),B.jsx("button",{className:"nav-close",type:"button",onClick:()=>t(!1),children:""})]}),B.jsxs("div",{className:"nav-panel-links",children:[py.map(i=>B.jsx(ud,{to:i.to,className:({isActive:a})=>a?"nav-m-link active":"nav-m-link",onClick:()=>t(!1),children:i.label},i.to)),B.jsx("a",{href:"https://github.com/Mike-Lalonde",target:"_blank",rel:"noreferrer",className:"nav-m-link",onClick:()=>t(!1),children:"GitHub"})]})]})})]})}function e1(){const h=new Date().getFullYear();return B.jsx("footer",{className:"footer",children:B.jsxs("div",{className:"container footer-inner",children:[B.jsxs("div",{children:[" ",h," Mike Lalonde"]}),B.jsxs("div",{className:"footer-links",children:[B.jsx("a",{href:"https://github.com/Mike-Lalonde",target:"_blank",rel:"noreferrer",children:"GitHub"}),B.jsx("span",{className:"dot",children:"  "}),B.jsx("a",{href:"mailto:mlalonde@yrmindinsite.ca",children:"Email"})]})]})})}var ga={},Dh,my;function n1(){return my||(my=1,Dh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Dh}var Lh={},qi={},yy;function _s(){if(yy)return qi;yy=1;let h;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return qi.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},qi.getSymbolTotalCodewords=function(i){return t[i]},qi.getBCHDigit=function(e){let i=0;for(;e!==0;)i++,e>>>=1;return i},qi.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');h=i},qi.isKanjiModeEnabled=function(){return typeof h<"u"},qi.toSJIS=function(i){return h(i)},qi}var Nh={},by;function Dd(){return by||(by=1,(function(h){h.L={bit:1},h.M={bit:0},h.Q={bit:3},h.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return h.L;case"m":case"medium":return h.M;case"q":case"quartile":return h.Q;case"h":case"high":return h.H;default:throw new Error("Unknown EC Level: "+e)}}h.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},h.from=function(i,a){if(h.isValid(i))return i;try{return t(i)}catch{return a}}})(Nh)),Nh}var Oh,vy;function i1(){if(vy)return Oh;vy=1;function h(){this.buffer=[],this.length=0}return h.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let i=0;i<e;i++)this.putBit((t>>>e-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Oh=h,Oh}var kh,Ay;function s1(){if(Ay)return kh;Ay=1;function h(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return h.prototype.set=function(t,e,i,a){const o=t*this.size+e;this.data[o]=i,a&&(this.reservedBit[o]=!0)},h.prototype.get=function(t,e){return this.data[t*this.size+e]},h.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},h.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},kh=h,kh}var Bh={},Sy;function a1(){return Sy||(Sy=1,(function(h){const t=_s().getSymbolSize;h.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,o=t(i),l=o===145?26:Math.ceil((o-13)/(2*a-2))*2,u=[o-7];for(let d=1;d<a-1;d++)u[d]=u[d-1]-l;return u.push(6),u.reverse()},h.getPositions=function(i){const a=[],o=h.getRowColCoords(i),l=o.length;for(let u=0;u<l;u++)for(let d=0;d<l;d++)u===0&&d===0||u===0&&d===l-1||u===l-1&&d===0||a.push([o[u],o[d]]);return a}})(Bh)),Bh}var Ph={},Ey;function r1(){if(Ey)return Ph;Ey=1;const h=_s().getSymbolSize,t=7;return Ph.getPositions=function(i){const a=h(i);return[[0,0],[a-t,0],[0,a-t]]},Ph}var Fh={},wy;function o1(){return wy||(wy=1,(function(h){h.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};h.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},h.from=function(a){return h.isValid(a)?parseInt(a,10):void 0},h.getPenaltyN1=function(a){const o=a.size;let l=0,u=0,d=0,f=null,p=null;for(let y=0;y<o;y++){u=d=0,f=p=null;for(let b=0;b<o;b++){let v=a.get(y,b);v===f?u++:(u>=5&&(l+=t.N1+(u-5)),f=v,u=1),v=a.get(b,y),v===p?d++:(d>=5&&(l+=t.N1+(d-5)),p=v,d=1)}u>=5&&(l+=t.N1+(u-5)),d>=5&&(l+=t.N1+(d-5))}return l},h.getPenaltyN2=function(a){const o=a.size;let l=0;for(let u=0;u<o-1;u++)for(let d=0;d<o-1;d++){const f=a.get(u,d)+a.get(u,d+1)+a.get(u+1,d)+a.get(u+1,d+1);(f===4||f===0)&&l++}return l*t.N2},h.getPenaltyN3=function(a){const o=a.size;let l=0,u=0,d=0;for(let f=0;f<o;f++){u=d=0;for(let p=0;p<o;p++)u=u<<1&2047|a.get(f,p),p>=10&&(u===1488||u===93)&&l++,d=d<<1&2047|a.get(p,f),p>=10&&(d===1488||d===93)&&l++}return l*t.N3},h.getPenaltyN4=function(a){let o=0;const l=a.data.length;for(let d=0;d<l;d++)o+=a.data[d];return Math.abs(Math.ceil(o*100/l/5)-10)*t.N4};function e(i,a,o){switch(i){case h.Patterns.PATTERN000:return(a+o)%2===0;case h.Patterns.PATTERN001:return a%2===0;case h.Patterns.PATTERN010:return o%3===0;case h.Patterns.PATTERN011:return(a+o)%3===0;case h.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(o/3))%2===0;case h.Patterns.PATTERN101:return a*o%2+a*o%3===0;case h.Patterns.PATTERN110:return(a*o%2+a*o%3)%2===0;case h.Patterns.PATTERN111:return(a*o%3+(a+o)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}h.applyMask=function(a,o){const l=o.size;for(let u=0;u<l;u++)for(let d=0;d<l;d++)o.isReserved(d,u)||o.xor(d,u,e(a,d,u))},h.getBestMask=function(a,o){const l=Object.keys(h.Patterns).length;let u=0,d=1/0;for(let f=0;f<l;f++){o(f),h.applyMask(f,a);const p=h.getPenaltyN1(a)+h.getPenaltyN2(a)+h.getPenaltyN3(a)+h.getPenaltyN4(a);h.applyMask(f,a),p<d&&(d=p,u=f)}return u}})(Fh)),Fh}var Cl={},_y;function Y0(){if(_y)return Cl;_y=1;const h=Dd(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Cl.getBlocksCount=function(a,o){switch(o){case h.L:return t[(a-1)*4+0];case h.M:return t[(a-1)*4+1];case h.Q:return t[(a-1)*4+2];case h.H:return t[(a-1)*4+3];default:return}},Cl.getTotalCodewordsCount=function(a,o){switch(o){case h.L:return e[(a-1)*4+0];case h.M:return e[(a-1)*4+1];case h.Q:return e[(a-1)*4+2];case h.H:return e[(a-1)*4+3];default:return}},Cl}var zh={},Lr={},Cy;function l1(){if(Cy)return Lr;Cy=1;const h=new Uint8Array(512),t=new Uint8Array(256);return(function(){let i=1;for(let a=0;a<255;a++)h[a]=i,t[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)h[a]=h[a-255]})(),Lr.log=function(i){if(i<1)throw new Error("log("+i+")");return t[i]},Lr.exp=function(i){return h[i]},Lr.mul=function(i,a){return i===0||a===0?0:h[t[i]+t[a]]},Lr}var Ty;function c1(){return Ty||(Ty=1,(function(h){const t=l1();h.mul=function(i,a){const o=new Uint8Array(i.length+a.length-1);for(let l=0;l<i.length;l++)for(let u=0;u<a.length;u++)o[l+u]^=t.mul(i[l],a[u]);return o},h.mod=function(i,a){let o=new Uint8Array(i);for(;o.length-a.length>=0;){const l=o[0];for(let d=0;d<a.length;d++)o[d]^=t.mul(a[d],l);let u=0;for(;u<o.length&&o[u]===0;)u++;o=o.slice(u)}return o},h.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let o=0;o<i;o++)a=h.mul(a,new Uint8Array([1,t.exp(o)]));return a}})(zh)),zh}var Ih,xy;function u1(){if(xy)return Ih;xy=1;const h=c1();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(i){this.degree=i,this.genPoly=h.generateECPolynomial(this.degree)},t.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const o=h.mod(a,this.genPoly),l=this.degree-o.length;if(l>0){const u=new Uint8Array(this.degree);return u.set(o,l),u}return o},Ih=t,Ih}var Uh={},Hh={},jh={},Ry;function X0(){return Ry||(Ry=1,jh.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),jh}var In={},My;function K0(){if(My)return In;My=1;const h="[0-9]+",t="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;In.KANJI=new RegExp(e,"g"),In.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),In.BYTE=new RegExp(i,"g"),In.NUMERIC=new RegExp(h,"g"),In.ALPHANUMERIC=new RegExp(t,"g");const a=new RegExp("^"+e+"$"),o=new RegExp("^"+h+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return In.testKanji=function(d){return a.test(d)},In.testNumeric=function(d){return o.test(d)},In.testAlphanumeric=function(d){return l.test(d)},In}var Dy;function Cs(){return Dy||(Dy=1,(function(h){const t=X0(),e=K0();h.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},h.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},h.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},h.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},h.MIXED={bit:-1},h.getCharCountIndicator=function(o,l){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?o.ccBits[0]:l<27?o.ccBits[1]:o.ccBits[2]},h.getBestModeForData=function(o){return e.testNumeric(o)?h.NUMERIC:e.testAlphanumeric(o)?h.ALPHANUMERIC:e.testKanji(o)?h.KANJI:h.BYTE},h.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},h.isValid=function(o){return o&&o.bit&&o.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return h.NUMERIC;case"alphanumeric":return h.ALPHANUMERIC;case"kanji":return h.KANJI;case"byte":return h.BYTE;default:throw new Error("Unknown mode: "+a)}}h.from=function(o,l){if(h.isValid(o))return o;try{return i(o)}catch{return l}}})(Hh)),Hh}var Ly;function h1(){return Ly||(Ly=1,(function(h){const t=_s(),e=Y0(),i=Dd(),a=Cs(),o=X0(),l=7973,u=t.getBCHDigit(l);function d(b,v,E){for(let S=1;S<=40;S++)if(v<=h.getCapacity(S,E,b))return S}function f(b,v){return a.getCharCountIndicator(b,v)+4}function p(b,v){let E=0;return b.forEach(function(S){const _=f(S.mode,v);E+=_+S.getBitsLength()}),E}function y(b,v){for(let E=1;E<=40;E++)if(p(b,E)<=h.getCapacity(E,v,a.MIXED))return E}h.from=function(v,E){return o.isValid(v)?parseInt(v,10):E},h.getCapacity=function(v,E,S){if(!o.isValid(v))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=a.BYTE);const _=t.getSymbolTotalCodewords(v),w=e.getTotalCodewordsCount(v,E),x=(_-w)*8;if(S===a.MIXED)return x;const T=x-f(S,v);switch(S){case a.NUMERIC:return Math.floor(T/10*3);case a.ALPHANUMERIC:return Math.floor(T/11*2);case a.KANJI:return Math.floor(T/13);case a.BYTE:default:return Math.floor(T/8)}},h.getBestVersionForData=function(v,E){let S;const _=i.from(E,i.M);if(Array.isArray(v)){if(v.length>1)return y(v,_);if(v.length===0)return 1;S=v[0]}else S=v;return d(S.mode,S.getLength(),_)},h.getEncodedBits=function(v){if(!o.isValid(v)||v<7)throw new Error("Invalid QR Code version");let E=v<<12;for(;t.getBCHDigit(E)-u>=0;)E^=l<<t.getBCHDigit(E)-u;return v<<12|E}})(Uh)),Uh}var Gh={},Ny;function d1(){if(Ny)return Gh;Ny=1;const h=_s(),t=1335,e=21522,i=h.getBCHDigit(t);return Gh.getEncodedBits=function(o,l){const u=o.bit<<3|l;let d=u<<10;for(;h.getBCHDigit(d)-i>=0;)d^=t<<h.getBCHDigit(d)-i;return(u<<10|d)^e},Gh}var qh={},Vh,Oy;function f1(){if(Oy)return Vh;Oy=1;const h=Cs();function t(e){this.mode=h.NUMERIC,this.data=e.toString()}return t.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a,o,l;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),l=parseInt(o,10),i.put(l,10);const u=this.data.length-a;u>0&&(o=this.data.substr(a),l=parseInt(o,10),i.put(l,u*3+1))},Vh=t,Vh}var Yh,ky;function g1(){if(ky)return Yh;ky=1;const h=Cs(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(i){this.mode=h.ALPHANUMERIC,this.data=i}return e.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let o;for(o=0;o+2<=this.data.length;o+=2){let l=t.indexOf(this.data[o])*45;l+=t.indexOf(this.data[o+1]),a.put(l,11)}this.data.length%2&&a.put(t.indexOf(this.data[o]),6)},Yh=e,Yh}var Xh,By;function p1(){if(By)return Xh;By=1;const h=Cs();function t(e){this.mode=h.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return t.getBitsLength=function(i){return i*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let i=0,a=this.data.length;i<a;i++)e.put(this.data[i],8)},Xh=t,Xh}var Kh,Py;function m1(){if(Py)return Kh;Py=1;const h=Cs(),t=_s();function e(i){this.mode=h.KANJI,this.data=i}return e.getBitsLength=function(a){return a*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let o=t.toSJIS(this.data[a]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),i.put(o,13)}},Kh=e,Kh}var Wh={exports:{}},Fy;function y1(){return Fy||(Fy=1,(function(h){var t={single_source_shortest_paths:function(e,i,a){var o={},l={};l[i]=0;var u=t.PriorityQueue.make();u.push(i,0);for(var d,f,p,y,b,v,E,S,_;!u.empty();){d=u.pop(),f=d.value,y=d.cost,b=e[f]||{};for(p in b)b.hasOwnProperty(p)&&(v=b[p],E=y+v,S=l[p],_=typeof l[p]>"u",(_||S>E)&&(l[p]=E,u.push(p,E),o[p]=f))}if(typeof a<"u"&&typeof l[a]>"u"){var w=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(w)}return o},extract_shortest_path_from_predecessor_list:function(e,i){for(var a=[],o=i;o;)a.push(o),e[o],o=e[o];return a.reverse(),a},find_path:function(e,i,a){var o=t.single_source_shortest_paths(e,i,a);return t.extract_shortest_path_from_predecessor_list(o,a)},PriorityQueue:{make:function(e){var i=t.PriorityQueue,a={},o;e=e||{};for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return a.queue=[],a.sorter=e.sorter||i.default_sorter,a},default_sorter:function(e,i){return e.cost-i.cost},push:function(e,i){var a={value:e,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};h.exports=t})(Wh)),Wh.exports}var zy;function b1(){return zy||(zy=1,(function(h){const t=Cs(),e=f1(),i=g1(),a=p1(),o=m1(),l=K0(),u=_s(),d=y1();function f(w){return unescape(encodeURIComponent(w)).length}function p(w,x,T){const M=[];let N;for(;(N=w.exec(T))!==null;)M.push({data:N[0],index:N.index,mode:x,length:N[0].length});return M}function y(w){const x=p(l.NUMERIC,t.NUMERIC,w),T=p(l.ALPHANUMERIC,t.ALPHANUMERIC,w);let M,N;return u.isKanjiModeEnabled()?(M=p(l.BYTE,t.BYTE,w),N=p(l.KANJI,t.KANJI,w)):(M=p(l.BYTE_KANJI,t.BYTE,w),N=[]),x.concat(T,M,N).sort(function(D,z){return D.index-z.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function b(w,x){switch(x){case t.NUMERIC:return e.getBitsLength(w);case t.ALPHANUMERIC:return i.getBitsLength(w);case t.KANJI:return o.getBitsLength(w);case t.BYTE:return a.getBitsLength(w)}}function v(w){return w.reduce(function(x,T){const M=x.length-1>=0?x[x.length-1]:null;return M&&M.mode===T.mode?(x[x.length-1].data+=T.data,x):(x.push(T),x)},[])}function E(w){const x=[];for(let T=0;T<w.length;T++){const M=w[T];switch(M.mode){case t.NUMERIC:x.push([M,{data:M.data,mode:t.ALPHANUMERIC,length:M.length},{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.ALPHANUMERIC:x.push([M,{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.KANJI:x.push([M,{data:M.data,mode:t.BYTE,length:f(M.data)}]);break;case t.BYTE:x.push([{data:M.data,mode:t.BYTE,length:f(M.data)}])}}return x}function S(w,x){const T={},M={start:{}};let N=["start"];for(let R=0;R<w.length;R++){const D=w[R],z=[];for(let U=0;U<D.length;U++){const q=D[U],V=""+R+U;z.push(V),T[V]={node:q,lastCount:0},M[V]={};for(let Z=0;Z<N.length;Z++){const et=N[Z];T[et]&&T[et].node.mode===q.mode?(M[et][V]=b(T[et].lastCount+q.length,q.mode)-b(T[et].lastCount,q.mode),T[et].lastCount+=q.length):(T[et]&&(T[et].lastCount=q.length),M[et][V]=b(q.length,q.mode)+4+t.getCharCountIndicator(q.mode,x))}}N=z}for(let R=0;R<N.length;R++)M[N[R]].end=0;return{map:M,table:T}}function _(w,x){let T;const M=t.getBestModeForData(w);if(T=t.from(x,M),T!==t.BYTE&&T.bit<M.bit)throw new Error('"'+w+'" cannot be encoded with mode '+t.toString(T)+`.
 Suggested mode is: `+t.toString(M));switch(T===t.KANJI&&!u.isKanjiModeEnabled()&&(T=t.BYTE),T){case t.NUMERIC:return new e(w);case t.ALPHANUMERIC:return new i(w);case t.KANJI:return new o(w);case t.BYTE:return new a(w)}}h.fromArray=function(x){return x.reduce(function(T,M){return typeof M=="string"?T.push(_(M,null)):M.data&&T.push(_(M.data,M.mode)),T},[])},h.fromString=function(x,T){const M=y(x,u.isKanjiModeEnabled()),N=E(M),R=S(N,T),D=d.find_path(R.map,"start","end"),z=[];for(let U=1;U<D.length-1;U++)z.push(R.table[D[U]].node);return h.fromArray(v(z))},h.rawSplit=function(x){return h.fromArray(y(x,u.isKanjiModeEnabled()))}})(qh)),qh}var Iy;function v1(){if(Iy)return Lh;Iy=1;const h=_s(),t=Dd(),e=i1(),i=s1(),a=a1(),o=r1(),l=o1(),u=Y0(),d=u1(),f=h1(),p=d1(),y=Cs(),b=b1();function v(R,D){const z=R.size,U=o.getPositions(D);for(let q=0;q<U.length;q++){const V=U[q][0],Z=U[q][1];for(let et=-1;et<=7;et++)if(!(V+et<=-1||z<=V+et))for(let J=-1;J<=7;J++)Z+J<=-1||z<=Z+J||(et>=0&&et<=6&&(J===0||J===6)||J>=0&&J<=6&&(et===0||et===6)||et>=2&&et<=4&&J>=2&&J<=4?R.set(V+et,Z+J,!0,!0):R.set(V+et,Z+J,!1,!0))}}function E(R){const D=R.size;for(let z=8;z<D-8;z++){const U=z%2===0;R.set(z,6,U,!0),R.set(6,z,U,!0)}}function S(R,D){const z=a.getPositions(D);for(let U=0;U<z.length;U++){const q=z[U][0],V=z[U][1];for(let Z=-2;Z<=2;Z++)for(let et=-2;et<=2;et++)Z===-2||Z===2||et===-2||et===2||Z===0&&et===0?R.set(q+Z,V+et,!0,!0):R.set(q+Z,V+et,!1,!0)}}function _(R,D){const z=R.size,U=f.getEncodedBits(D);let q,V,Z;for(let et=0;et<18;et++)q=Math.floor(et/3),V=et%3+z-8-3,Z=(U>>et&1)===1,R.set(q,V,Z,!0),R.set(V,q,Z,!0)}function w(R,D,z){const U=R.size,q=p.getEncodedBits(D,z);let V,Z;for(V=0;V<15;V++)Z=(q>>V&1)===1,V<6?R.set(V,8,Z,!0):V<8?R.set(V+1,8,Z,!0):R.set(U-15+V,8,Z,!0),V<8?R.set(8,U-V-1,Z,!0):V<9?R.set(8,15-V-1+1,Z,!0):R.set(8,15-V-1,Z,!0);R.set(U-8,8,1,!0)}function x(R,D){const z=R.size;let U=-1,q=z-1,V=7,Z=0;for(let et=z-1;et>0;et-=2)for(et===6&&et--;;){for(let J=0;J<2;J++)if(!R.isReserved(q,et-J)){let ot=!1;Z<D.length&&(ot=(D[Z]>>>V&1)===1),R.set(q,et-J,ot),V--,V===-1&&(Z++,V=7)}if(q+=U,q<0||z<=q){q-=U,U=-U;break}}}function T(R,D,z){const U=new e;z.forEach(function(J){U.put(J.mode.bit,4),U.put(J.getLength(),y.getCharCountIndicator(J.mode,R)),J.write(U)});const q=h.getSymbolTotalCodewords(R),V=u.getTotalCodewordsCount(R,D),Z=(q-V)*8;for(U.getLengthInBits()+4<=Z&&U.put(0,4);U.getLengthInBits()%8!==0;)U.putBit(0);const et=(Z-U.getLengthInBits())/8;for(let J=0;J<et;J++)U.put(J%2?17:236,8);return M(U,R,D)}function M(R,D,z){const U=h.getSymbolTotalCodewords(D),q=u.getTotalCodewordsCount(D,z),V=U-q,Z=u.getBlocksCount(D,z),et=U%Z,J=Z-et,ot=Math.floor(U/Z),F=Math.floor(V/Z),Y=F+1,nt=ot-F,ct=new d(nt);let yt=0;const O=new Array(Z),K=new Array(Z);let tt=0;const it=new Uint8Array(R.buffer);for(let Et=0;Et<Z;Et++){const Oe=Et<J?F:Y;O[Et]=it.slice(yt,yt+Oe),K[Et]=ct.encode(O[Et]),yt+=Oe,tt=Math.max(tt,Oe)}const ut=new Uint8Array(U);let dt=0,st,Ct;for(st=0;st<tt;st++)for(Ct=0;Ct<Z;Ct++)st<O[Ct].length&&(ut[dt++]=O[Ct][st]);for(st=0;st<nt;st++)for(Ct=0;Ct<Z;Ct++)ut[dt++]=K[Ct][st];return ut}function N(R,D,z,U){let q;if(Array.isArray(R))q=b.fromArray(R);else if(typeof R=="string"){let ot=D;if(!ot){const F=b.rawSplit(R);ot=f.getBestVersionForData(F,z)}q=b.fromString(R,ot||40)}else throw new Error("Invalid data");const V=f.getBestVersionForData(q,z);if(!V)throw new Error("The amount of data is too big to be stored in a QR Code");if(!D)D=V;else if(D<V)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+V+`.
`);const Z=T(D,z,q),et=h.getSymbolSize(D),J=new i(et);return v(J,D),E(J),S(J,D),w(J,z,0),D>=7&&_(J,D),x(J,Z),isNaN(U)&&(U=l.getBestMask(J,w.bind(null,J,z))),l.applyMask(U,J),w(J,z,U),{modules:J,version:D,errorCorrectionLevel:z,maskPattern:U,segments:q}}return Lh.create=function(D,z){if(typeof D>"u"||D==="")throw new Error("No input text");let U=t.M,q,V;return typeof z<"u"&&(U=t.from(z.errorCorrectionLevel,t.M),q=f.from(z.version),V=l.from(z.maskPattern),z.toSJISFunc&&h.setToSJISFunction(z.toSJISFunc)),N(D,q,U,V)},Lh}var $h={},Qh={},Uy;function W0(){return Uy||(Uy=1,(function(h){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let i=e.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+e);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(o){return[o,o]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}h.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,o=i.width&&i.width>=21?i.width:void 0,l=i.scale||4;return{width:o,scale:o?4:l,margin:a,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},h.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},h.getImageWidth=function(i,a){const o=h.getScale(i,a);return Math.floor((i+a.margin*2)*o)},h.qrToImageData=function(i,a,o){const l=a.modules.size,u=a.modules.data,d=h.getScale(l,o),f=Math.floor((l+o.margin*2)*d),p=o.margin*d,y=[o.color.light,o.color.dark];for(let b=0;b<f;b++)for(let v=0;v<f;v++){let E=(b*f+v)*4,S=o.color.light;if(b>=p&&v>=p&&b<f-p&&v<f-p){const _=Math.floor((b-p)/d),w=Math.floor((v-p)/d);S=y[u[_*l+w]?1:0]}i[E++]=S.r,i[E++]=S.g,i[E++]=S.b,i[E]=S.a}}})(Qh)),Qh}var Hy;function A1(){return Hy||(Hy=1,(function(h){const t=W0();function e(a,o,l){a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=l,o.width=l,o.style.height=l+"px",o.style.width=l+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}h.render=function(o,l,u){let d=u,f=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(f=i()),d=t.getOptions(d);const p=t.getImageWidth(o.modules.size,d),y=f.getContext("2d"),b=y.createImageData(p,p);return t.qrToImageData(b.data,o,d),e(y,f,p),y.putImageData(b,0,0),f},h.renderToDataURL=function(o,l,u){let d=u;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const f=h.render(o,l,d),p=d.type||"image/png",y=d.rendererOpts||{};return f.toDataURL(p,y.quality)}})($h)),$h}var Zh={},jy;function S1(){if(jy)return Zh;jy=1;const h=W0();function t(a,o){const l=a.a/255,u=o+'="'+a.hex+'"';return l<1?u+" "+o+'-opacity="'+l.toFixed(2).slice(1)+'"':u}function e(a,o,l){let u=a+o;return typeof l<"u"&&(u+=" "+l),u}function i(a,o,l){let u="",d=0,f=!1,p=0;for(let y=0;y<a.length;y++){const b=Math.floor(y%o),v=Math.floor(y/o);!b&&!f&&(f=!0),a[y]?(p++,y>0&&b>0&&a[y-1]||(u+=f?e("M",b+l,.5+v+l):e("m",d,0),d=0,f=!1),b+1<o&&a[y+1]||(u+=e("h",p),p=0)):d++}return u}return Zh.render=function(o,l,u){const d=h.getOptions(l),f=o.modules.size,p=o.modules.data,y=f+d.margin*2,b=d.color.light.a?"<path "+t(d.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",v="<path "+t(d.color.dark,"stroke")+' d="'+i(p,f,d.margin)+'"/>',E='viewBox="0 0 '+y+" "+y+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+E+' shape-rendering="crispEdges">'+b+v+`</svg>
`;return typeof u=="function"&&u(null,_),_},Zh}var Gy;function E1(){if(Gy)return ga;Gy=1;const h=n1(),t=v1(),e=A1(),i=S1();function a(o,l,u,d,f){const p=[].slice.call(arguments,1),y=p.length,b=typeof p[y-1]=="function";if(!b&&!h())throw new Error("Callback required as last argument");if(b){if(y<2)throw new Error("Too few arguments provided");y===2?(f=u,u=l,l=d=void 0):y===3&&(l.getContext&&typeof f>"u"?(f=d,d=void 0):(f=d,d=u,u=l,l=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(u=l,l=d=void 0):y===2&&!l.getContext&&(d=u,u=l,l=void 0),new Promise(function(v,E){try{const S=t.create(u,d);v(o(S,l,d))}catch(S){E(S)}})}try{const v=t.create(u,d);f(null,o(v,l,d))}catch(v){f(v)}}return ga.create=t.create,ga.toCanvas=a.bind(null,e.render),ga.toDataURL=a.bind(null,e.renderToDataURL),ga.toString=a.bind(null,function(o,l,u){return i.render(o,u)}),ga}var w1=E1();const _1=Yl(w1);function C1({url:h}){const[t,e]=P.useState("");return P.useEffect(()=>{let i=!0;return _1.toDataURL(h,{margin:1,scale:6}).then(a=>i&&e(a)).catch(()=>i&&e("")),()=>{i=!1}},[h]),B.jsxs("div",{className:"card-qr-card",children:[t?B.jsx("img",{className:"qr-img",src:t,alt:"Portfolio QR Code"}):B.jsx("div",{className:"muted",children:"QR code generating"}),B.jsx("a",{href:"https://mike-lalonde.github.io/",target:"_blank",rel:"noopener noreferrer",children:"Mike Lalonde's Tech Portfolio"})]})}function T1(){return B.jsxs("div",{className:"stack",children:[B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"tech-intro",children:B.jsx("h2",{children:"Welcome to My Technical Portfolio"})}),B.jsxs("p",{className:"muted",children:["This portfolio is a work in progress and was initiated on ",B.jsx("strong",{children:"February 18, 2026"}),". It is currently under active development and will continue to evolve over the next two weeks as additional projects and documentation are integrated."]}),B.jsx("p",{className:"muted",children:"My rsum is current and fully up to date."}),B.jsxs("p",{className:"muted",children:["This site will represent curated samples from more than ",B.jsx("strong",{children:"120 manually programmed projects"})," completed across three technical programs. The goal is to showcase representative work that demonstrates both breadth and depth of applied capability."]}),B.jsx("p",{className:"muted",children:"Please check back soon, as this portfolio will be fully updated and expanded within the next two weeks."}),B.jsx("div",{className:"muted",style:{marginTop:10},children:" Mike Lalonde"})]}),B.jsx("section",{className:"grid",children:B.jsx("div",{className:"card",children:B.jsx(C1,{url:"https://mike-lalonde.github.io/"})})})]})}function x1(){return B.jsxs("div",{className:"stack",children:[B.jsx("h2",{children:"About Me"}),B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"card-title",children:"Who I Am"}),B.jsx("p",{children:"I am an Artificial Intelligence programming student focused on building production-ready systems that combine software engineering discipline with applied machine learning. My work spans Python algorithm design, React-based web systems, and structured AI development."})]}),B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"card-title",children:"Technical Focus"}),B.jsxs("ul",{className:"list",children:[B.jsx("li",{children:"Applied Machine Learning & Model Integration"}),B.jsx("li",{children:"Algorithm Design & Mathematical Programming"}),B.jsx("li",{children:"Full-Stack Development (React + Backend Systems)"}),B.jsx("li",{children:"Data Processing & Analytics Pipelines"}),B.jsx("li",{children:"Structured, Maintainable Software Architecture"})]})]}),B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"card-title",children:"Current Direction"}),B.jsx("p",{children:"I am currently focused on building an AI engineering portfolio that demonstrates applied intelligence systems, production deployment, and strong foundational mathematics. My goal is to move into advanced AI engineering roles where systems thinking and technical depth matter."})]}),B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"card-title",children:"Philosophy"}),B.jsx("p",{children:"Clean architecture. Measurable outcomes. Practical intelligence. I believe AI systems should be understandable, testable, and engineered with the same rigor as any critical software system."})]})]})}const Fe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),hd=[.001,0,0,.001,0,0],Jh=1.35,rn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jr="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Dt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},$0={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ir={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},le={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ma={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$r={ERRORS:0,WARNINGS:1,INFOS:5},Ta={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Tl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Q0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $l=$r.WARNINGS;function R1(h){Number.isInteger(h)&&($l=h)}function M1(){return $l}function Ql(h){$l>=$r.INFOS&&console.info(`Info: ${h}`)}function At(h){$l>=$r.WARNINGS&&console.warn(`Warning: ${h}`)}function Kt(h){throw new Error(h)}function Nt(h,t){h||Kt(t)}function D1(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ld(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"&&(e.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),e.tryConvertEncoding))try{h=B1(h)}catch{}const i=t?URL.parse(h,t):URL.parse(h);return D1(i)?i:null}function Nd(h,t,e=!1){const i=URL.parse(h);return i?(i.hash=t,i.href):e&&Ld(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function _t(h,t,e,i=!1){return Object.defineProperty(h,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Ts=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class qy extends Ts{constructor(t,e){super(t,"PasswordException"),this.code=e}}class td extends Ts{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Hl extends Ts{constructor(t){super(t,"InvalidPDFException")}}class Gr extends Ts{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class L1 extends Ts{constructor(t){super(t,"FormatError")}}class mi extends Ts{constructor(t){super(t,"AbortException")}}function Z0(h){(typeof h!="object"||h?.length===void 0)&&Kt("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const i=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=h.subarray(a,o);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function Qr(h){typeof h!="string"&&Kt("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=h.charCodeAt(i)&255;return e}function N1(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function O1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function k1(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return _t(this,"isLittleEndian",O1())}static get isEvalSupported(){return _t(this,"isEvalSupported",k1())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _t(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return _t(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ed=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class rt{static makeHexColor(t,e,i){return`#${ed[t]}${ed[e]}${ed[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],o=t[i+1];t[i]=a*e[0]+o*e[2]+e[4],t[i+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const y=t[i+p],b=t[i+p+1];t[i+p]=y*a+b*l+d,t[i+p+1]=y*o+b*u+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,i){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5],p=t[0],y=t[1],b=t[2],v=t[3];let E=a*p+d,S=E,_=a*b+d,w=_,x=u*y+f,T=x,M=u*v+f,N=M;if(o!==0||l!==0){const R=o*p,D=o*b,z=l*y,U=l*v;E+=z,w+=z,_+=U,S+=U,x+=R,N+=R,M+=D,T+=D}i[0]=Math.min(i[0],E,_,S,w),i[1]=Math.min(i[1],x,M,T,N),i[2]=Math.max(i[2],E,_,S,w),i[3]=Math.max(i[3],x,M,T,N)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],o=t[2],l=t[3],u=i**2+a**2,d=i*o+a*l,f=o**2+l**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+y||1),e[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[i,o,a,l]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],e,a)}static#t(t,e,i,a,o,l,u,d,f,p){if(f<=0||f>=1)return;const y=1-f,b=f*f,v=b*f,E=y*(y*(y*t+3*f*e)+3*b*i)+v*a,S=y*(y*(y*o+3*f*l)+3*b*u)+v*d;p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],E),p[3]=Math.max(p[3],S)}static#e(t,e,i,a,o,l,u,d,f,p,y,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,i,a,o,l,u,d,-y/p,b);return}const v=p**2-4*y*f;if(v<0)return;const E=Math.sqrt(v),S=2*f;this.#t(t,e,i,a,o,l,u,d,(-p+E)/S,b),this.#t(t,e,i,a,o,l,u,d,(-p-E)/S,b)}static bezierBoundingBox(t,e,i,a,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,i,o,u,e,a,l,d,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),f),this.#e(t,i,o,u,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),f)}}function B1(h){return decodeURIComponent(escape(h))}let nd=null,Vy=null;function J0(h){return nd||(nd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vy=new Map([["","t"]])),h.replaceAll(nd,(t,e,i)=>e?e.normalize("NFKC"):Vy.get(i))}function Od(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Z0(h)}const kd="pdfjs_internal_id_";function P1(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...o]=e;if(!h(i)&&!Number.isInteger(i)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Le(h,t,e){return Math.min(Math.max(h,t),e)}function tb(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Z0(h))}function F1(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Qr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});class qr{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(qr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Bd{static setupStorage(t,e,i,a,o){const l=a.getValue(e,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?t.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of i.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(t,l.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:i});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&qr.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const p=[[a,-1,l]];for(;p.length>0;){const[y,b,v]=p.at(-1);if(b+1===y.children.length){p.pop();continue}const E=y.children[++p.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const w=document.createTextNode(E.value);f.push(w),v.append(w);continue}const _=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(v.append(_),E.attributes&&this.setAttributes({html:_,element:E,storage:e,intent:o,linkService:i}),E.children?.length>0)p.push([E,-1,_]);else if(E.value){const w=document.createTextNode(E.value);u&&qr.shouldBuildText(S)&&f.push(w),_.append(w)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const fi="http://www.w3.org/2000/svg";class As{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function La(h,t="text"){if(Pr(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class Zr{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=l,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,b,v;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,y=0,b=0,v=1;break;case 90:p=0,y=1,b=1,v=0;break;case 270:p=0,y=-1,b=-1,v=0;break;case 0:p=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let E,S,_,w;p===0?(E=Math.abs(f-t[1])*i+o,S=Math.abs(d-t[0])*i+l,_=(t[3]-t[1])*i,w=(t[2]-t[0])*i):(E=Math.abs(d-t[0])*i+o,S=Math.abs(f-t[1])*i+l,_=(t[2]-t[0])*i,w=(t[3]-t[1])*i),this.transform=[p*i,y*i,b*i,v*i,E-p*i*d-b*i*f,S-y*i*d-v*i*f],this.width=_,this.height=w}get rawDims(){const t=this.viewBox;return _t(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Zr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const i=[t,e];return rt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];rt.applyTransform(e,this.transform);const i=[t[2],t[3]];return rt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return rt.applyInverseTransform(i,this.transform),i}}class Zl extends Ts{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Jr(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function Jl(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function eb(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function nb(h,t="document.pdf"){if(typeof h!="string")return t;if(Jr(h))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!i)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=i.pathname.split("/").at(-1);if(o.test(l))return a(l);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class Yy{started=Object.create(null);times=[];time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Pr(h,t){const e=t?URL.parse(h,t):URL.parse(h);return e?.protocol==="http:"||e?.protocol==="https:"}function un(h){h.preventDefault()}function ne(h){h.preventDefault(),h.stopPropagation()}function z1(h){console.log("Deprecated API usage: "+h)}class jl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=p,u+=y):f==="+"&&(l-=p,u-=y),new Date(Date.UTC(i,a,o,l,u,d))}}function ib(h,{scale:t=1,rotation:e=0}){const{width:i,height:a}=h.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new Zr({viewBox:o,userUnit:1,scale:t,rotation:e})}function Na(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${h}"`),[0,0,0])}function I1(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of h.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;h.set(e,Na(i))}t.remove()}function ee(h){const{a:t,b:e,c:i,d:a,e:o,f:l}=h.getTransform();return[t,e,i,a,o,l]}function Un(h){const{a:t,b:e,c:i,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,e,i,a,o,l]}function Xi(h,t,e=!1,i=!0){if(t instanceof Zr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=Se.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=y):(l.width=y,l.height=p)}i&&h.setAttribute("data-main-rotation",t.rotation)}class Dn{constructor(){const{pixelRatio:t}=Dn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,o=-1){let l=1/0,u=1/0,d=1/0;i=Dn.capPixels(i,o),i>0&&(l=Math.sqrt(i/(t*e))),a!==-1&&(u=a/t,d=a/e);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Gl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class U1{static get isDarkMode(){return _t(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class sb{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),_t(this,"commentForegroundColor",Na(i))}}function ab(h,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return h=Math.round(h*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[h,t,e]}function Xy(h,t){const e=h[0]/255,i=h[1]/255,a=h[2]/255,o=Math.max(e,i,a),l=Math.min(e,i,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=u}function dd(h,t){const e=h[0],i=h[1],a=h[2],o=(1-Math.abs(2*a-1))*i,l=o*(1-Math.abs(e/60%2-1)),u=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function Ky(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function Wy(h,t,e){dd(h,e),e.map(Ky);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];dd(t,e),e.map(Ky);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const $y=new Map;function rb(h,t){const e=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=$y.get(e);if(i)return i;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Xy(h,l);const u=a.subarray(6,9);Xy(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Wy(l,u,o)<f){let p,y;d?(p=l[2],y=1):(p=0,y=l[2]);const b=.005;for(;y-p>b;){const v=l[2]=(p+y)/2;d===Wy(l,u,o)<f?p=v:y=v}l[2]=d?y:p}return dd(l,o),i=rt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),$y.set(e,i),i}function Pd({html:h,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else Bd.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),i.append(a)}class Ur{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,Ur.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",un,{signal:e}),t.addEventListener("pointerdown",Ur.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ne(t)}#h(t){this.#i._focusEventsAllowed=!0,ne(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",un,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Ur.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#s)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#a=this.#m;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class H1{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",un,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,a=0;for(const o of t){const l=o.y+o.height;if(l<i)continue;const u=o.x+(e?o.width:0);if(l>i){a=u,i=l;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,i]}show(t,e,i){const[a,o]=this.#r(e,i),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,i,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",i);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",un,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function ob(h,t,e){for(const i of e)t.addEventListener(i,h[i].bind(h))}class j1{#t=0;get id(){return`${jr}${this.#t++}`}}class Fd{#t=Od();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await La(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Fd._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},l.onload=async()=>{const y=i.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=p});l.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){At(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:o}=t;return this.#n(`${e}_${i}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class G1{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class to{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Se.platform;for(const[i,a,o={}]of t)for(const l of i){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=i;u&&!u(t,e)||(a.bind(t,...l,e)(),o||ne(e))}}class zd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return I1(t),_t(this,"_colors",t)}convert(t){const e=Na(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((o,l)=>o===e[l]))return zd._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?rt.makeHexColor(...e):t}}class yi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new G1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#C=null;#w=null;#A=null;#x=null;#E=!1;#_=null;#D=new j1;#R=!1;#M=!1;#F=!1;#N=null;#k=null;#z=null;#B=null;#q=null;#T=vt.NONE;#S=new Set;#O=null;#I=null;#H=null;#X=null;#Y=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#V=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=yi.prototype,e=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new to([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#V.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,i,a,o,l,u,d,f,p,y,b,v,E,S,_){const w=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=i,this.#s=a,this.#l=o,this.#I=l,this.#Y=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:w}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#C=d.filterFactory,this.#H=f,this.#x=p||null,this.#y=y,this.#v=b,this.#b=v,this.#q=E||null,this.viewParameters={realScale:As.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#_?.hide(),this.#_=null,this.#z?.destroy(),this.#z=null,this.#i=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return _t(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return _t(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return _t(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[a,o]of t){const l=a.endsWith("_HCM");if(i&&l){e.set(a.replace("_HCM",""),o);continue}!i&&!l&&e.set(a,o)}return _t(this,"highlightColors",e)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#z=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:a,y:o,width:l,height:u}=i.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+u)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*As.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=i,d=i.toString(),p=this.#Q(i).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;i.empty();const b=this.#tt(p),v=this.#T===vt.NONE,E=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(v){this.switchToMode(vt.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#_||=new H1(this),this.#_.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${jr}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#O&&(this.#_?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=e,this.#L({hasSelectedText:!0}),!(this.#T!==vt.HIGHLIGHT&&this.#T!==vt.NONE)&&(this.#T===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===vt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===vt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#k=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,e]=this.#k;this.#k=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){At(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){At(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==vt.NONE&&!this.isEditorHandlingKeyboard&&yi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([i,a])=>this.#K[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,t)}),this.#T===vt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Dt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#T!==vt.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===vt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===vt.NONE){this.setEditingState(!1),this.#gt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===vt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===vt.POPUP){this.#i||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:y}=d;f&&l.add(f),p&&!y&&u.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:p,contentsObj:y}=d;p&&y?.str&&!l.has(f)&&!this.#m.has(f)&&u.push(d)}this.#l?.showSidebar(u)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Dt.CREATE:this.currentLayer.addNewEditor(e);return;case Dt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#X?.get(Dt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Dt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#gt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}cleanUndoStack(t){this.#c.cleanType(t)}#$(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#st(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==vt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[a,o]=this.#j,l=[...this.#S],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#S)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,e||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const i=(a,o,l,u)=>{if(this.#n.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)i(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)i(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==vt.NONE}get imageManager(){return _t(this,"imageManager",new Fd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,b)=>({x:(p-a)/l,y:1-(f+y-i)/o,width:b/l,height:y/o});break;case"180":u=(f,p,y,b)=>({x:1-(f+y-i)/o,y:1-(p+b-a)/l,width:y/o,height:b/l});break;case"270":u=(f,p,y,b)=>({x:1-(p+b-a)/l,y:(f-i)/o,width:b/l,height:y/o});break;default:u=(f,p,y,b)=>({x:(f-i)/o,y:(p-a)/l,width:y/o,height:b/l});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:v,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(u(b,v,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#T===vt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#B?.get(t);a&&(a.setCanvas(e,i),this.#B.delete(t))}addMissingCanvas(t,e){(this.#B||=new Map).set(t,e)}}class Gn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Gn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Gn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Gn.#f.missing),e.setAttribute("data-l10n-id",Gn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",un,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:i}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Gn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Gn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Gn.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class xl{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+i-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",un,{signal:i}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ne(o)},{capture:!0,signal:i}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ne(o)},{capture:!0,signal:i})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:p,height:y,x:b,y:v}=this.#n;i=b+i*p,a=v+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+i*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class eo{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=i,this.#n=e,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Dn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#g.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ne,l),o.addEventListener("pointermove",ne,l),o.addEventListener("pointercancel",ne,l),o.addEventListener("pointerup",ne,l),this.#r?.()}if(ne(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ne(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:u}=i,d=this.#l,{touch0X:f,touch0Y:p,touch1X:y,touch1Y:b}=d,v=y-f,E=b-p,S=l-a,_=u-o,w=Math.hypot(S,_)||1,x=Math.hypot(v,E)||1;if(!this.#e&&Math.abs(x-w)<=eo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(a+l)/2,(o+u)/2];this.#s?.(T,x,w)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ne(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class gt{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#C=0;#w=0;#A=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#_=gt._zIndex++;static _borderLineWidth=-1;static _colorManager=new zd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=gt.prototype._resizeWithKeyboard,e=yi.TRANSLATE_SMALL,i=yi.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new to([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],gt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new q1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(gt._l10n??=t,gt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),gt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);gt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Kt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[o,l]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#D([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:p}=i;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=gt,a=i/t,o=i/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=i,d*=a,o*=i,l*=a,this._mustFixPosition)switch(t){case 0:o=Le(o,0,i-u),l=Le(l,0,a-d);break;case 90:o=Le(o,0,i-d),l=Le(l,u,a);break;case 180:o=Le(o,u,i),l=Le(l,d,a);break;case 270:o=Le(o,d,i),l=Le(l,0,a-u);break}this.x=o/=i,this.y=l/=a;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return gt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return gt.#R(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#N.bind(this,i),{signal:e}),a.addEventListener("contextmenu",un,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#N(t,e){e.preventDefault();const{isMac:i}=Se.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ne,{passive:!1,signal:l}),window.addEventListener("contextmenu",un,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#z()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#z(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===i&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[i,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=gt.MIN_SIZE/i,p=gt.MIN_SIZE/a,y=this.#M(this.rotation),b=(F,Y)=>[y[0]*F+y[2]*Y,y[1]*F+y[3]*Y],v=this.#M(360-this.rotation),E=(F,Y)=>[v[0]*F+v[2]*Y,v[1]*F+v[3]*Y];let S,_,w=!1,x=!1;switch(t){case"topLeft":w=!0,S=(F,Y)=>[0,0],_=(F,Y)=>[F,Y];break;case"topMiddle":S=(F,Y)=>[F/2,0],_=(F,Y)=>[F/2,Y];break;case"topRight":w=!0,S=(F,Y)=>[F,0],_=(F,Y)=>[0,Y];break;case"middleRight":x=!0,S=(F,Y)=>[F,Y/2],_=(F,Y)=>[0,Y/2];break;case"bottomRight":w=!0,S=(F,Y)=>[F,Y],_=(F,Y)=>[0,0];break;case"bottomMiddle":S=(F,Y)=>[F/2,Y],_=(F,Y)=>[F/2,0];break;case"bottomLeft":w=!0,S=(F,Y)=>[0,Y],_=(F,Y)=>[F,0];break;case"middleLeft":x=!0,S=(F,Y)=>[0,Y/2],_=(F,Y)=>[F,Y/2];break}const T=S(u,d),M=_(u,d);let N=b(...M);const R=gt._round(o+N[0]),D=gt._round(l+N[1]);let z=1,U=1,q,V;if(e.fromKeyboard)({deltaX:q,deltaY:V}=e);else{const{screenX:F,screenY:Y}=e,[nt,ct]=this.#l;[q,V]=this.screenToPageTranslation(F-nt,Y-ct),this.#l[0]=F,this.#l[1]=Y}if([q,V]=E(q/i,V/a),w){const F=Math.hypot(u,d);z=U=Math.max(Math.min(Math.hypot(M[0]-T[0]-q,M[1]-T[1]-V)/F,1/u,1/d),f/u,p/d)}else x?z=Le(Math.abs(M[0]-T[0]-q),f,1)/u:U=Le(Math.abs(M[1]-T[1]-V),p,1)/d;const Z=gt._round(u*z),et=gt._round(d*U);N=b(..._(Z,et));const J=R-N[0],ot=D-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=Z,this.height=et,this.x=J,this.y=ot,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Ur(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Gn.initialize(gt._l10n),this.#i=new Gn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new xl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new xl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new xl(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new xl(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),ob(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new eo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(R,D)=>[l[0]*R+l[2]*D,l[1]*R+l[3]*D],[d,f]=this.parentDimensions,p=this.x,y=this.y,b=this.width,v=this.height,E=gt.MIN_SIZE/d,S=gt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/v),E/b,S/v);const _=gt._round(b*o),w=gt._round(v*o);if(_===b&&w===v)return;this.#u||=[p,y,b,v];const x=u(b/2,v/2),T=gt._round(p+x[0]),M=gt._round(y+x[1]),N=u(_/2,w/2);this.x=T-N[0],this.y=M-N[1],this.width=_,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#z()}pointerdown(t){const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#I(t);return}this.#O(t)}#O(t){const{isMac:e}=Se.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#a=null,this.#g=!1,this._uiManager.endDragSession()||this.#O(f),i&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:b}=f;if(b!==this.#a){ne(f);return}const[v,E]=this.screenToPageTranslation(p-this.#C,y-this.#w);this.#C=p,this.#w=y,this._uiManager.dragSelectedEditors(v,E)},l),window.addEventListener("touchmove",ne,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&u(f),ne(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,p=e/a,y=this.x*o,b=this.y*l,v=this.width*o,E=this.height*l;switch(i){case 0:return[y+f+u,l-b-p-E+d,y+f+v+u,l-b-p+d];case 90:return[y+p+u,l-b+f+d,y+p+E+u,l-b+f+v+d];case 180:return[y-f-v+u,l-b+p+d,y-f+u,l-b+p+E+d];case 270:return[y-p-E+u,l-b-f-v+d,y-p+u,l-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,o,l]=t,u=o-i,d=l-a;switch(this.rotation){case 0:return[i,e-l,u,d];case 90:return[i,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&gt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:i||p,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,f,p]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=f/o,a.height=p/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#x?.destroy(),this.#x=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,o,l]=this.getPDFRect();return[gt._round(i+(o-i)*t),gt._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#X.bind(this),u=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#K.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",gt._l10nResizer[p])}}const i=this.#e[0];let a=0;for(const l of e){if(l===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",gt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){gt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#K(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#j(-1),this.#z()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let a=this.#A.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},gt._telemetryTimeout),this.#A.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class q1 extends gt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Qy=3285377520,En=4294901760,Hn=65535;class lb{constructor(t){this.h1=t?t&4294967295:Qy,this.h2=t?t&4294967295:Qy}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,_=t.length;S<_;S++){const w=t.charCodeAt(S);w<=255?e[i++]=w:(e[i++]=w>>>8,e[i++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,l=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,p=this.h2;const y=3432918353,b=461845907,v=y&Hn,E=b&Hn;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&En|u*v&Hn,u=u<<15|u>>>17,u=u*b&En|u*E&Hn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&En|d*v&Hn,d=d<<15|d>>>17,d=d*b&En|d*E&Hn,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&En|u*v&Hn,u=u<<15|u>>>17,u=u*b&En|u*E&Hn,a&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&En|t*36045&Hn,e=e*4283543511&En|((e<<16|t>>>16)*2950163797&En)>>>16,t^=e>>>1,t=t*444984403&En|t*60499&Hn,e=e*3301882366&En|((e<<16|t>>>16)*3120437893&En)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const fd=Object.freeze({map:null,hash:"",transfer:void 0});class Id{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof gt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof gt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[o,l]of Object.entries(e))i[o]!==l&&(a=!0,i[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof gt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cb(this)}get serializable(){if(this.#n.size===0)return fd;const t=new Map,e=new lb,i=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof gt?u.serialize(!1,a):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&i.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:fd}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const o of this.#n.values()){if(!(o instanceof gt)){o.popup&&(o.popup.deleted?a+=1:i+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(i+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(p)??0;y.set(p,b+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class cb extends Id{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:i,transfer:a}}get print(){Kt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class V1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(Nt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),i?.(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Kt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw At(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return _t(this,"isSyncFontLoadingSupported",Fe||Se.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Nt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(M,N){return M.charCodeAt(N)<<24|M.charCodeAt(N+1)<<16|M.charCodeAt(N+2)<<8|M.charCodeAt(N+3)&255}function a(M,N,R,D){const z=M.substring(0,N),U=M.substring(N+R);return z+D+U}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(M,N){if(++f>30){At("Load test font never loaded."),N();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(p.bind(null,M,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const E=16,S=1482184792;let _=i(b,E);for(o=0,l=y.length-3;o<l;o+=4)_=_-S+i(y,o)|0;o<y.length&&(_=_-S+i(y+"XXX",o)|0),b=a(b,E,4,N1(_));const w=`url(data:font/opentype;base64,${btoa(b)});`,x=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(x);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const M of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=M,T.append(N)}this._document.body.append(T),p(y,()=>{T.remove(),e.complete()})}}class Y1{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${tb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(l){At(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function X1(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Fe)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function K1(h){if(Fe&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Qr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rl(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const gd=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,W1=h=>typeof h=="object"&&typeof h?.name=="string",ub=P1.bind(null,gd,W1);class $1{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ml={DATA:1,ERROR:2},pe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Zy(){}function Ke(h){if(h instanceof mi||h instanceof Hl||h instanceof qy||h instanceof Gr||h instanceof td)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Kt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new mi(h.message);case"InvalidPDFException":return new Hl(h.message);case"PasswordException":return new qy(h.message,h.code);case"ResponseException":return new Gr(h.message,h.status,h.missing);case"UnknownErrorException":return new td(h.message,h.details)}return new td(h.message,h.toString())}class Fr{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ml.DATA)a.resolve(t.data);else if(t.callback===Ml.ERROR)a.reject(Ke(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:i,targetName:a,callback:Ml.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:i,targetName:a,callback:Ml.ERROR,callbackId:t.callbackId,reason:Ke(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,i,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:u,stream:pe.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Nt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:pe.CANCEL,streamId:o,reason:Ke(f)}),p.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:pe.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:pe.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Nt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:pe.ERROR,streamId:e,reason:Ke(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.START_COMPLETE,streamId:e,reason:Ke(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case pe.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ke(t.reason));break;case pe.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ke(t.reason));break;case pe.PULL:if(!u){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Zy).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,reason:Ke(f)})});break;case pe.ENQUEUE:if(Nt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case pe.CLOSE:if(Nt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case pe.ERROR:Nt(l,"error should have stream controller"),l.controller.error(Ke(t.reason)),this.#r(l,e);break;case pe.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ke(t.reason)),this.#r(l,e);break;case pe.CANCEL:if(!u)break;const d=Ke(t.reason);Promise.try(u.onCancel||Zy,d).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,reason:Ke(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class hb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Kt("Abstract method `_createCanvas` called.")}}class Q1 extends hb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class db{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class Jy extends db{async _fetch(t){const e=await La(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Qr(e)}}class fb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,o){return"none"}destroy(t=!1){}}class Z1 extends fb{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(fi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(fi,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const p=f.join(",");return[p,p,p]}const[e,i,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=i[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Jr(e)?At('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Nd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,o]=this.#d(t),l=t.length===1?i:`${i}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#g(u);return this.#p(i,a,o,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#v(t);t=rt.makeHexColor(...l);const u=this.#v(e);if(e=rt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const E=v/255;d[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#n}_hcm_filter`,y=o.filter=this.#g(p);this.#p(f,f,f,y),this.#m(y);const b=(v,E)=>{const S=l[v]/255,_=u[v]/255,w=new Array(E+1);for(let x=0;x<=E;x++)w[x]=S+x/E*(_-S);return w.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#y(i,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#f(u),t&&this.#y(i,u),l}addHighlightHCMFilter(t,e,i,a,o){const l=`${e}-${i}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[d,f]=[e,i].map(this.#v.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[a,o].map(this.#v.bind(this));y<p&&([p,y,b,v]=[y,p,v,b]),this.#l.style.color="";const E=(w,x,T)=>{const M=new Array(256),N=(y-p)/T,R=w/255,D=(x-w)/(255*T);let z=0;for(let U=0;U<=T;U++){const q=Math.round(p+U*N),V=R+U*D;for(let Z=z;Z<=q;Z++)M[Z]=V;z=q+1}for(let U=z;U<256;U++)M[U]=M[z-1];return M.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=u.filter=this.#g(S);return this.#m(_),this.#p(E(b[0],v[0],5),E(b[1],v[1],5),E(b[2],v[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(fi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(fi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(fi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#r.createElementNS(fi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#p(t,e,i,a){const o=this.#r.createElementNS(fi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(fi,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,Na(getComputedStyle(this.#l).getPropertyValue("color"))}}class gb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class t0 extends gb{async _fetch(t){const e=await La(t,"arraybuffer");return new Uint8Array(e)}}class pb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class e0 extends pb{async _fetch(t){const e=await La(t,"arraybuffer");return new Uint8Array(e)}}Fe&&At("Please use the `legacy` build in Node.js environments.");async function Ud(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class J1 extends fb{}class tw extends hb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ew extends db{async _fetch(t){return Ud(t)}}class nw extends gb{async _fetch(t){return Ud(t)}}class iw extends pb{async _fetch(t){return Ud(t)}}const pa="__forcedDependency",{floor:n0,ceil:i0}=Math;function Dl(h,t,e,i,a,o){h[t*4+0]=Math.min(h[t*4+0],e),h[t*4+1]=Math.min(h[t*4+1],i),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const pd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class sw{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===pd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ll=(h,t)=>{if(!h)return;let e=h.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},h.set(t,e)),e};class aw{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[pa]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(pd,e.length)):this.#u.fill(pd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[pa]:{__proto__:this.#e[pa]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(Ll(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Ll(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Ll(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(rt.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(pa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(pa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,o,l){const u=rt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];rt.axialAlignedBoundingBox([i,o,a,l],u,d);const f=rt.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,a,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=rt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(u[0]===-1/0)return rt.axialAlignedBoundingBox([i,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return rt.axialAlignedBoundingBox([i,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,i,a=1,o=0,l=0,u){const d=i.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(p=[0,0,0,0],rt.axialAlignedBoundingBox(d,i.fontMatrix,p),(a!==1||o!==0||l!==0)&&rt.scaleMinMax([a,0,0,-a,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&p&&f===void 0&&(f=p[0]<=o-y.actualBoundingBoxLeft&&p[2]>=o+y.actualBoundingBoxRight&&p[1]<=l-y.actualBoundingBoxAscent&&p[3]>=l+y.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?i.add(a[l]):l in o&&o[l].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[pa]),this.#p){const i=Ll(this.#p,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=n0(this.#o[0]*256/this.#f),a=n0(this.#o[1]*256/this.#m),o=i0(this.#o[2]*256/this.#f),l=i0(this.#o[3]*256/this.#m);Dl(this.#g,t,i,a,o,l);for(const u of this.#l)u!==t&&Dl(this.#g,u,i,a,o,l);for(const u of this.#n)u!==t&&Dl(this.#g,u,i,a,o,l);for(const u of this.#r)u!==t&&Dl(this.#g,u,i,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new sw(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class ql{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof ql&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,o,l),this}recordBBox(t,e,i,a,o,l){return this.#i||this.#t.recordBBox(this.#e,e,i,a,o,l),this}recordCharacterBBox(t,e,i,a,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const wn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function md(h,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),h.clip(a)}class Hd{isModifyingCurrentTransform(){return!1}getPattern(){Kt("Abstract method `getPattern` called.")}}class rw extends Hd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let o;if(a===Re.STROKE||a===Re.FILL){const l=e.current.getClippedPathBoundingBox(a,ee(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),i=rt.transform(i,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),md(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);o.setTransform(y)}else md(t,this._bbox),o=this._createGradient(t);return o}}function id(h,t,e,i,a,o,l,u){const d=t.coords,f=t.colors,p=h.data,y=h.width*4;let b;d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=o,o=l,l=b),d[i+1]>d[a+1]&&(b=i,i=a,a=b,b=l,l=u,u=b),d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=o,o=l,l=b);const v=(d[e]+t.offsetX)*t.scaleX,E=(d[e+1]+t.offsetY)*t.scaleY,S=(d[i]+t.offsetX)*t.scaleX,_=(d[i+1]+t.offsetY)*t.scaleY,w=(d[a]+t.offsetX)*t.scaleX,x=(d[a+1]+t.offsetY)*t.scaleY;if(E>=x)return;const T=f[o],M=f[o+1],N=f[o+2],R=f[l],D=f[l+1],z=f[l+2],U=f[u],q=f[u+1],V=f[u+2],Z=Math.round(E),et=Math.round(x);let J,ot,F,Y,nt,ct,yt,O;for(let K=Z;K<=et;K++){if(K<_){const st=K<E?0:(E-K)/(E-_);J=v-(v-S)*st,ot=T-(T-R)*st,F=M-(M-D)*st,Y=N-(N-z)*st}else{let st;K>x?st=1:_===x?st=0:st=(_-K)/(_-x),J=S-(S-w)*st,ot=R-(R-U)*st,F=D-(D-q)*st,Y=z-(z-V)*st}let tt;K<E?tt=0:K>x?tt=1:tt=(E-K)/(E-x),nt=v-(v-w)*tt,ct=T-(T-U)*tt,yt=M-(M-q)*tt,O=N-(N-V)*tt;const it=Math.round(Math.min(J,nt)),ut=Math.round(Math.max(J,nt));let dt=y*K+it*4;for(let st=it;st<=ut;st++)tt=(J-st)/(J-nt),tt<0?tt=0:tt>1&&(tt=1),p[dt++]=ot-(ot-ct)*tt|0,p[dt++]=F-(F-yt)*tt|0,p[dt++]=Y-(Y-O)*tt|0,p[dt++]=255}}function ow(h,t,e){const i=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(i.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let y=0;y<f;y++,p++)id(h,e,i[p],i[p+1],i[p+u],a[p],a[p+1],a[p+u]),id(h,e,i[p+u+1],i[p+1],i[p+u],a[p+u+1],a[p+1],a[p+u])}break;case"triangles":for(o=0,l=i.length;o<l;o+=3)id(h,e,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class lw extends Hd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),v=f/y,E=p/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/E},_=y+4,w=b+4,x=i.getCanvas("mesh",_,w),T=x.context,M=T.createImageData(y,b);if(e){const R=M.data;for(let D=0,z=R.length;D<z;D+=4)R[D]=e[0],R[D+1]=e[1],R[D+2]=e[2],R[D+3]=255}for(const R of this._figures)ow(M,R,S);return T.putImageData(M,2,2),{canvas:x.canvas,offsetX:u-2*v,offsetY:d-2*E,scaleX:v,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){md(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)rt.singularValueDecompose2dScale(ee(t),o);else if(this.matrix){rt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;rt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else rt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,e.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class cw extends Hd{getPattern(){return"hotpink"}}function uw(h){switch(h[0]){case"RadialAxial":return new rw(h);case"Mesh":return new lw(h);case"Dummy":return new cw}throw new Error(`Unknown IR type: ${h[0]}`)}const s0={COLORED:1,UNCOLORED:2};class jd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Ql("TilingType: "+l);const y=i[0],b=i[1],v=i[2],E=i[3],S=v-y,_=E-b,w=new Float32Array(2);rt.singularValueDecompose2dScale(this.matrix,w);const[x,T]=w;rt.singularValueDecompose2dScale(this.baseTransform,w);const M=x*w[0],N=T*w[1];let R=S,D=_,z=!1,U=!1;const q=Math.ceil(f*M),V=Math.ceil(p*N),Z=Math.ceil(S*M),et=Math.ceil(_*N);q>=Z?R=f:z=!0,V>=et?D=p:U=!0;const J=this.getSizeAndScale(R,this.ctx.canvas.width,M),ot=this.getSizeAndScale(D,this.ctx.canvas.height,N),F=t.cachedCanvases.getCanvas("pattern",J.size,ot.size),Y=F.context,nt=d.createCanvasGraphics(Y,e);if(nt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(nt,o,u),Y.translate(-J.scale*y,-ot.scale*b),nt.transform(0,J.scale,0,0,ot.scale,0,0),Y.save(),nt.dependencyTracker?.save(),this.clipBbox(nt,y,b,v,E),nt.baseTransform=ee(nt.ctx),nt.executeOperatorList(a),nt.endDrawing(),nt.dependencyTracker?.restore(),Y.restore(),z||U){const ct=F.canvas;z&&(R=f),U&&(D=p);const yt=this.getSizeAndScale(R,this.ctx.canvas.width,M),O=this.getSizeAndScale(D,this.ctx.canvas.height,N),K=yt.size,tt=O.size,it=t.cachedCanvases.getCanvas("pattern-workaround",K,tt),ut=it.context,dt=z?Math.floor(S/f):0,st=U?Math.floor(_/p):0;for(let Ct=0;Ct<=dt;Ct++)for(let Et=0;Et<=st;Et++)ut.drawImage(ct,K*Ct,tt*Et,K,tt,0,0,K,tt);return{canvas:it.canvas,scaleX:yt.scale,scaleY:O.scale,offsetX:y,offsetY:b}}return{canvas:F.canvas,scaleX:J.scale,scaleY:ot.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,i){const a=Math.max(jd.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=a?o=a:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,a,o){const l=a-e,u=o-i;t.ctx.rect(e,i,l,u),rt.axialAlignedBoundingBox([e,i,a,o],ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,o=t.current;switch(e){case s0.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case s0.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new L1(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,o){let l=i;a!==Re.SHADING&&(l=rt.transform(l,e.baseTransform),this.matrix&&(l=rt.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function hw({src:h,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Se.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],p=i>>3,y=i&7,b=h.length;e=new Uint32Array(e.buffer);let v=0;for(let E=0;E<a;E++){for(const _=t+p;t<_;t++){const w=t<b?h[t]:255;e[v++]=w&128?f:d,e[v++]=w&64?f:d,e[v++]=w&32?f:d,e[v++]=w&16?f:d,e[v++]=w&8?f:d,e[v++]=w&4?f:d,e[v++]=w&2?f:d,e[v++]=w&1?f:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let _=0;_<y;_++)e[v++]=S&1<<7-_?f:d}return{srcPos:t,destPos:v}}const a0=16,r0=100,dw=15,o0=10,We=16,sd=new DOMMatrix,ln=new Float32Array(2),ba=new Float32Array([1/0,1/0,-1/0,-1/0]);function fw(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},h.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},h.transform=function(e,i,a,o,l,u){t.transform(e,i,a,o,l,u),this.__originalTransform(e,i,a,o,l,u)},h.setTransform=function(e,i,a,o,l,u){t.setTransform(e,i,a,o,l,u),this.__originalSetTransform(e,i,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(e){t.rotate(e),this.__originalRotate(e)},h.clip=function(e){t.clip(e),this.__originalClip(e)},h.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},h.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},h.bezierCurveTo=function(e,i,a,o,l,u){t.bezierCurveTo(e,i,a,o,l,u),this.__originalBezierCurveTo(e,i,a,o,l,u)},h.rect=function(e,i,a,o){t.rect(e,i,a,o),this.__originalRect(e,i,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class gw{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Nl(h,t,e,i,a,o,l,u,d,f){const[p,y,b,v,E,S]=ee(h);if(y===0&&b===0){const x=l*p+E,T=Math.round(x),M=u*v+S,N=Math.round(M),R=(l+d)*p+E,D=Math.abs(Math.round(R)-T)||1,z=(u+f)*v+S,U=Math.abs(Math.round(z)-N)||1;return h.setTransform(Math.sign(p),0,0,Math.sign(v),T,N),h.drawImage(t,e,i,a,o,0,0,D,U),h.setTransform(p,y,b,v,E,S),[D,U]}if(p===0&&v===0){const x=u*b+E,T=Math.round(x),M=l*y+S,N=Math.round(M),R=(u+f)*b+E,D=Math.abs(Math.round(R)-T)||1,z=(l+d)*y+S,U=Math.abs(Math.round(z)-N)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,T,N),h.drawImage(t,e,i,a,o,0,0,U,D),h.setTransform(p,y,b,v,E,S),[U,D]}h.drawImage(t,e,i,a,o,l,u,d,f);const _=Math.hypot(p,y),w=Math.hypot(b,v);return[_*d,w*f]}class l0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=hd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=xe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ba.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,e=null){const i=this.minMax.slice();if(t===Re.STROKE){e||Kt("Stroke bounding box must include transform."),rt.singularValueDecompose2dScale(e,ln);const a=ln[0]*this.lineWidth/2,o=ln[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const t=rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ba,0)}getClippedPathBoundingBox(t=Re.FILL,e=null){return rt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function c0(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%We,o=(e-a)/We,l=a===0?o:o+1,u=h.createImageData(i,We);let d=0,f;const p=t.data,y=u.data;let b,v,E,S;if(t.kind===Ir.GRAYSCALE_1BPP){const _=p.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),x=w.length,T=i+7>>3,M=4294967295,N=Se.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(E=b<o?We:a,f=0,v=0;v<E;v++){const R=_-d;let D=0;const z=R>T?i:R*8-7,U=z&-8;let q=0,V=0;for(;D<U;D+=8)V=p[d++],w[f++]=V&128?M:N,w[f++]=V&64?M:N,w[f++]=V&32?M:N,w[f++]=V&16?M:N,w[f++]=V&8?M:N,w[f++]=V&4?M:N,w[f++]=V&2?M:N,w[f++]=V&1?M:N;for(;D<z;D++)q===0&&(V=p[d++],q=128),w[f++]=V&q?M:N,q>>=1}for(;f<x;)w[f++]=0;h.putImageData(u,0,b*We)}}else if(t.kind===Ir.RGBA_32BPP){for(v=0,S=i*We*4,b=0;b<o;b++)y.set(p.subarray(d,d+S)),d+=S,h.putImageData(u,0,v),v+=We;b<l&&(S=i*a*4,y.set(p.subarray(d,d+S)),h.putImageData(u,0,v))}else if(t.kind===Ir.RGB_24BPP)for(E=We,S=i*E,b=0;b<l;b++){for(b>=o&&(E=a,S=i*E),f=0,v=S;v--;)y[f++]=p[d++],y[f++]=p[d++],y[f++]=p[d++],y[f++]=255;h.putImageData(u,0,b*We)}else throw new Error(`bad image kind: ${t.kind}`)}function u0(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%We,o=(e-a)/We,l=a===0?o:o+1,u=h.createImageData(i,We);let d=0;const f=t.data,p=u.data;for(let y=0;y<l;y++){const b=y<o?We:a;({srcPos:d}=hw({src:f,srcPos:d,dest:p,width:i,height:b,nonBlackColor:0})),h.putImageData(u,0,y*We)}}function Nr(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)h[i]!==void 0&&(t[i]=h[i]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Ol(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function h0(h,t){if(t)return!0;rt.singularValueDecompose2dScale(h,ln);const e=Math.fround(Dn.pixelRatio*As.PDF_TO_CSS_UNITS);return ln[0]<=e&&ln[1]<=e}const pw=["butt","round","square"],mw=["miter","round","bevel"],yw={},d0={};class Aa{constructor(t,e,i,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new l0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new gw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,i){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ee(this.compositeCtx))}this.ctx.save(),Ol(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ee(this.ctx)}executeOperatorList(t,e,i,a,o){const l=t.argsArray,u=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const p=f-d>o0&&typeof i=="function",y=p?Date.now()+dw:0;let b=0;const v=this.commonObjs,E=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!o||o(d))if(S=u[d],_=l[d]??null,S!==Ta.dependency)_===null?this[S](d):this[S](d,..._);else for(const w of _){this.dependencyTracker?.recordNamedData(w,d);const x=w.startsWith("g_")?v:E;if(!x.has(w))return x.get(w,i),d}if(d++,d===f)return d;if(p&&++b>o0){if(Date.now()>y)return i(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=i,d=a,f="prescale1",p,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,v=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/v),p=this.cachedCanvases.getCanvas(f,b,v),y=p.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,u,d,0,0,b,v),t=p.canvas,u=b,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,d=ee(i);let f,p,y,b;if((e.bitmap||e.data)&&e.count>1){const q=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(q),f||(f=new Map,this._cachedBitmapsMap.set(q,f));const V=f.get(p);if(V&&!u){const Z=Math.round(Math.min(d[0],d[2])+d[4]),et=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,wn.transformAndFill),{canvas:V,offsetX:Z,offsetY:et}}y=V}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),u0(b.context,e));let v=rt.transform(d,[1/a,0,0,-1/o,0,0]);v=rt.transform(v,[1,0,0,1,0,-o]);const E=ba.slice();rt.axialAlignedBoundingBox([0,0,a,o],v,E);const[S,_,w,x]=E,T=Math.round(w-S)||1,M=Math.round(x-_)||1,N=this.cachedCanvases.getCanvas("fillCanvas",T,M),R=N.context,D=S,z=_;R.translate(-D,-z),R.transform(...v),y||(y=this._scaleImage(b.canvas,Un(R)),y=y.img,f&&u&&f.set(p,y)),R.imageSmoothingEnabled=h0(ee(R),e.interpolate),Nl(R,y,0,0,y.width,y.height,0,0,a,o),R.globalCompositeOperation="source-in";const U=rt.transform(Un(R),[1,0,0,1,-D,-z]);return R.fillStyle=u?l.getPattern(i,this,U,Re.FILL,t):l,R.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,N.canvas)),this.dependencyTracker?.recordDependencies(t,wn.transformAndFill),{canvas:N.canvas,offsetX:Math.round(D),offsetY:Math.round(z)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=pw[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=mw[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Nr(this.suspendedCtx,l),fw(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,i,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,o,l,u,d,f,p,y){let b=t.canvas,v=d-p,E=f-y;if(l)if(v<0||E<0||v+i>b.width||E+a>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,a),w=_.context;w.drawImage(b,-v,-E),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,i,a),w.globalCompositeOperation="source-over",b=_.canvas,v=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,E,i,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(v,E,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,i,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,v,E,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&Nr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Ta.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=i[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case Tl.moveTo:l.moveTo(o[u++],o[u++]);break;case Tl.lineTo:l.lineTo(o[u++],o[u++]);break;case Tl.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case Tl.closePath:l.closePath();break;default:At(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}rt.axialAlignedBoundingBox(a,ee(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Un(a),Re.STROKE,t),l){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,wn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Re.STROKE,ee(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Un(a),Re.FILL,t),f){const p=new Path2D;p.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,wn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,wn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=yw}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=d0}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:p}of e)p&&a.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||hd,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&At("Invalid font matrix for font "+e),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let p=i;i<a0?p=a0:i>r0&&(p=r0),this.current.fontSizeScale=i/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,o,l){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=p&xe.FILL_STROKE_MASK,v=!!(p&xe.ADD_TO_PATH_FLAG),E=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||v||E||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||E||S)){u.save(),u.translate(i,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(b===xe.FILL||b===xe.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const x=this.#i(_,w,o);u.fill(x)}else u.fill(_);if(b===xe.STROKE||b===xe.FILL_STROKE)if(l){w||=u.getTransform(),u.setTransform(...l);const{a:x,b:T,c:M,d:N}=w,R=rt.inverseTransform(l),D=rt.transform([x,T,M,N,0,0],R);rt.singularValueDecompose2dScale(D,ln),u.lineWidth*=Math.max(ln[0],ln[1])/y,u.stroke(this.#i(_,w,l))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(b===xe.FILL||b===xe.FILL_STROKE)&&(u.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a,()=>u.measureText(e))),(b===xe.STROKE||b===xe.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a,()=>u.measureText(e)).recordDependencies(t,wn.stroke),u.strokeText(e,i,a));v&&((this.pendingTextPaths||=[]).push({transform:ee(u),x:i,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return _t(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,wn.showText).resetBBox(t),this.current.textRenderingMode&xe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,p=i.fontDirection,y=i.textHScale*p,b=e.length,v=a.vertical,E=v?1:-1,S=a.defaultVMetrics,_=o*i.fontMatrix[0],w=i.textRenderingMode===xe.FILL&&!a.disableFontFace&&!i.patternFill;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),p>0?l.scale(y,-1):l.scale(y,1);let x,T;if(i.patternFill){l.save();const z=i.fillColor.getPattern(l,this,Un(l),Re.FILL,t);x=ee(l),l.restore(),l.fillStyle=z}if(i.patternStroke){l.save();const z=i.strokeColor.getPattern(l,this,Un(l),Re.STROKE,t);T=ee(l),l.restore(),l.strokeStyle=z}let M=i.lineWidth;const N=i.textMatrixScale;if(N===0||M===0){const z=i.textRenderingMode&xe.FILL_STROKE_MASK;(z===xe.STROKE||z===xe.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=N;if(u!==1&&(l.scale(u,u),M/=u),l.lineWidth=M,a.isInvalidPDFjsFont){const z=[];let U=0;for(const V of e)z.push(V.unicode),U+=V.width;const q=z.join("");if(l.fillText(q,0,0),this.dependencyTracker!==null){const V=l.measureText(q);this.dependencyTracker.recordBBox(t,this.ctx,-V.actualBoundingBoxLeft,V.actualBoundingBoxRight,-V.actualBoundingBoxAscent,V.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=U*_*y,l.restore(),this.compose();return}let R=0,D;for(D=0;D<b;++D){const z=e[D];if(typeof z=="number"){R+=E*z*o/1e3;continue}let U=!1;const q=(z.isSpace?f:0)+d,V=z.fontChar,Z=z.accent;let et,J,ot=z.width;if(v){const nt=z.vmetric||S,ct=-(z.vmetric?nt[1]:ot*.5)*_,yt=nt[2]*_;ot=nt?-nt[0]:ot,et=ct/u,J=(R+yt)/u}else et=R/u,J=0;let F;if(a.remeasure&&ot>0){F=l.measureText(V);const nt=F.width*1e3/o*u;if(ot<nt&&this.isFontSubpixelAAEnabled){const ct=ot/nt;U=!0,l.save(),l.scale(ct,1),et/=ct}else ot!==nt&&(et+=(ot-nt)/2e3*o/u)}if(this.contentVisible&&(z.isInFont||a.missingFile)){if(w&&!Z)l.fillText(V,et,J),this.dependencyTracker?.recordCharacterBBox(t,l,F?{bbox:null}:a,o/u,et,J,()=>F??l.measureText(V));else if(this.paintChar(t,V,et,J,x,T),Z){const nt=et+o*Z.offset.x/u,ct=J-o*Z.offset.y/u;this.paintChar(t,Z.fontChar,nt,ct,x,T)}}const Y=v?ot*_-q*p:ot*_+q*p;R+=Y,U&&l.restore()}v?i.y-=R:i.x+=R*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,p=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||hd,v=e.length,E=a.textRenderingMode===xe.INVISIBLE;let S,_,w,x;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new ql(T,t):null,S=0;S<v;++S){if(_=e[S],typeof _=="number"){x=d*_*l/1e3,this.ctx.translate(x,0),a.x+=x*y;continue}const M=(_.isSpace?p:0)+f,N=o.charProcOperatorList[_.operatorListId];N?this.contentVisible&&(this.save(),i.scale(l,l),i.transform(...b),this.executeOperatorList(N),this.restore()):At(`Type3 character "${_.operatorListId}" is not available.`);const R=[_.width,0];rt.applyTransform(R,b),w=R[0]*l+M,i.translate(w,0),a.x+=w*y}i.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||ee(this.ctx),o={createCanvasGraphics:(l,u)=>new Aa(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ql(this.dependencyTracker,u,!0):null)};i=new jd(e,this.ctx,o,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=uw(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Un(i),Re.SHADING,t);const o=Un(i);if(o){const{width:l,height:u}=i.canvas,d=ba.slice();rt.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,p,y,b]=d;this.ctx.fillRect(f,p,y-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,wn.transform).recordDependencies(t,wn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Kt("Should not call beginInlineImage")}beginImageData(){Kt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ee(this.ctx),i)){rt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,l,u]=i,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Ql("TODO: Support non-isolated groups."),e.knockout&&At("Knockout groups not supported.");const a=ee(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=ba.slice();rt.axialAlignedBoundingBox(e.bbox,ee(i),o);const l=[0,0,i.canvas.width,i.canvas.height];o=rt.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,p),v=b.context;v.translate(-u,-d),v.transform(...a);let E=new Path2D;const[S,_,w,x]=e.bbox;if(E.rect(S,_,w-S,x-_),e.matrix){const T=new Path2D;T.addPath(E,new DOMMatrix(e.matrix)),E=T}v.clip(E),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,d),i.save()),Nr(i,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ba.slice();rt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,a,o,l){if(this.#t(),Ol(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],d=i[3]-i[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=d,rt.singularValueDecompose2dScale(ee(this.ctx),ln);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(ln[0],0,0,-ln[1],0,d*ln[1]),Ol(this.ctx)}else{Ol(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],u,d),this.ctx.clip(f)}}this.current=new l0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ee(d);d.transform(i,a,o,l,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const v=rt.transform(f,[i,a,o,l,u[y],u[y+1]]);d.drawImage(p.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+p.canvas.width,v[5],v[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,wn.transformAndFill);for(const l of e){const{data:u,width:d,height:f,transform:p}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const v=this.getObject(t,u,l);u0(b,v),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,Un(i),Re.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),i.save(),i.transform(...p),i.scale(1,-1),Nl(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){At("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let p=0,y=o.length;p<y;p+=2)f.push({transform:[i,0,0,a,o[p],o[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/i,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,a).context;c0(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,Un(o));o.imageSmoothingEnabled=h0(ee(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,i,-a,0).recordDependencies(t,wn.imageXObject).recordOperation(t),Nl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;c0(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of i)a.save(),a.transform(...l.transform),a.scale(1,-1),Nl(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,wn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===d0?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:o}=this.ctx.getTransform();let l,u;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const p=d*t;l=u=p<1?1/p:1}else if(t===0)l=1/d,u=1/f;else{const p=d*t,y=f*t;l=p<1?1/p:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-i*a),f=Math.hypot(e,i),p=Math.hypot(a,o);if(t===0)l=p/d,u=f/d;else{const y=t*d;l=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){i.lineWidth=(a||1)*o,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(o,l),sd.a=1/o,sd.d=1/l;const d=new Path2D;if(d.addPath(t,sd),u.length>0){const f=Math.max(o,l);i.setLineDash(u.map(p=>p/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in Ta)Aa.prototype[h]!==void 0&&(Aa.prototype[Ta[h]]=Aa.prototype[h]);class Sa{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of Sa.strings){const p=e.encode(t[f]);i[f]=p,a+=4+p.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Sa.strings){const p=i[f],y=p.length;u.setUint32(d,y),l.set(p,d+4),d+=4+y}return Nt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Nt(t<Sa.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Ea{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const b of Ea.strings){const v=e.encode(t[b]);i[b]=v,a+=4+v.length}a+=4;let o,l,u=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,a=0;for(const b of Ea.strings){const v=i[b],E=v.length;a+=4+E,p.setUint32(y,E),f.set(v,y+4),y+=4+E}return p.setUint32(y-a-4,a),t.style&&(p.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),Nt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Nt(t<Ea.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:o}}}class jt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){Nt(t<jt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Nt(t<jt.numbers.length,"Invalid number index"),this.#o.getFloat64(jt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=jt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=jt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=jt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){Nt(t<jt.strings.length,"Invalid string index");let e=jt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#s,e+4,i)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=jt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=jt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=jt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new Sa(o.buffer)}get systemFontInfo(){let t=jt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#s,t+4,i)),new Ea(a.buffer)}static write(t){const e=t.systemFontInfo?Ea.write(t.systemFontInfo):null,i=t.cssFontInfo?Sa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of jt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=jt.#r+4+l+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let y=0;const b=jt.bools.length;let v=0,E=0;for(let S=0;S<b;S++){const _=t[jt.bools[S]];v|=(_===void 0?0:_?2:1)<<E,E+=2,(E===8||S===b-1)&&(p.setUint8(y++,v),v=0,E=0)}Nt(y===jt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of jt.numbers)p.setFloat64(y,t[S]),y+=8;if(Nt(y===jt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const S of t.bbox)p.setInt16(y,S,!0),y+=2}else p.setUint8(y++,0),y+=8;if(Nt(y===jt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const S of t.fontMatrix)p.setFloat64(y,S,!0),y+=8}else p.setUint8(y++,0),y+=48;if(Nt(y===jt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const S of t.defaultVMetrics)p.setInt16(y,S,!0),y+=2}else p.setUint8(y++,0),y+=6;Nt(y===jt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(jt.#r,0),y+=4;for(const S of jt.strings){const _=o[S],w=_.length;p.setUint32(y,w),f.set(_,y+4),y+=4+w}if(p.setUint32(jt.#r,y-jt.#r-4),!e)p.setUint32(y,0),y+=4;else{const S=e.byteLength;p.setUint32(y,S),Nt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+S}if(!i)p.setUint32(y,0),y+=4;else{const S=i.byteLength;p.setUint32(y,S),Nt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Nt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class Yi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class bw{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ya=Symbol("INTERNAL");class vw{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:o}){this.#t=!!(t&rn.DISPLAY),this.#e=!!(t&rn.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==ya&&Kt("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class Aw{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=rn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new vw(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(ya,!1);for(const i of t.on)this.#e.get(i)._setVisible(ya,!0);for(const i of t.off)this.#e.get(i)._setVisible(ya,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return At(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ql("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return At(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){At(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(ya,!1,!0);a._setVisible(ya,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#e.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new lb;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Sw{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Nt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});Nt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Nt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ew(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new ww(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Ew{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=Jl(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ww{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function _w(h){let t=!0,e=i("filename\\*","i").exec(h);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),o(p)}if(e=l(h),e){const p=f(e);return o(p)}if(e=i("filename","i").exec(h),e){e=e[1];let p=u(e);return p=f(p),o(p)}function i(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(p,{fatal:!0}),v=Qr(y);y=b.decode(v),t=!1}catch{}}return y}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),t&&(p=a("iso-8859-1",p))),p}function l(p){const y=[];let b;const v=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(p))!==null;){let[,S,_,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,w]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[_,w]=y[S];w=u(w),_&&(w=unescape(w),S===0&&(w=d(w))),E.push(w)}return E.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function d(p){const y=p.indexOf("'");if(y===-1)return p;const b=p.slice(0,y),E=p.slice(y+1).replace(/^[^']*'/,"");return a(b,E)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,E){if(v==="q"||v==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(b,E);try{E=atob(E)}catch{}return a(b,E)})}return""}function mb(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function tc(h){return URL.parse(h)?.origin??null}function yb({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||i||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function bb(h){const t=h.get("Content-Disposition");if(t){let e=_w(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Jl(e))return e}return null}function no(h,t){return new Gr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function vb(h){return h===200||h===206}function Ab(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Sb(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(At(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class Cw{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=mb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Nt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Tw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new xw(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Tw{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,Ab(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=tc(o.url),!vb(o.status))throw no(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=yb({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=bb(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Sb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class xw{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const l=a.url;fetch(l,Ab(o,this._withCredentials,this._abortController)).then(u=>{const d=tc(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!vb(u.status))throw no(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Sb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ad=200,rd=206;function Rw(h){const t=h.response;return typeof t!="string"?t:Qr(t).buffer}class Mw{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=mb(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=rd):a.expectedStatus=ad,e.responseType="arraybuffer",Nt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const o=a.status||ad;if(!(o===ad&&i.expectedStatus===rd)&&o!==i.expectedStatus){i.onError(a.status);return}const u=Rw(a);if(o===rd){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:u}):(At('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Dw{constructor(t){this._source=t,this._manager=new Mw(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Nt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Lw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Nw(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Lw{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=tc(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=yb({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=bb(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=no(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Nw{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=tc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=no(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Ow=/^[a-z][a-z0-9\-+.]+:/i;function kw(h){if(Ow.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class Bw{constructor(t){this.source=t,this.url=kw(t.url),Nt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Nt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Pw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Fw(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Pw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=no(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Fw{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Or=Symbol("INITIAL_DATA");class Eb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Or}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Or)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Or}delete(t){const e=this.#t[t];return!e||e.data===Or?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Or&&(yield[t,e])}}}const zw=1e5,f0=30;let Vr=class _n{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#C=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Dn.pixelRatio,this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=i.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#a=o,_n.#M(),Xi(e,i),this.#t.promise.finally(()=>{_n.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Se.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#x(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),_n.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Dn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Xi(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const o={div:null,properties:null,ctx:_n.#D(this.#r)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#_(o)}}cancel(){const t=new mi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#i)return;this.#s.ctx??=_n.#D(this.#r);const e=this.#u,i=this.#m;for(const a of t){if(e.length>zw){At("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#E(a)}}#E(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=rt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=_n.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*_n.#F(u,l,this.#r);let p,y;o===0?(p=a[4],y=a[5]-f):(p=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*y/this.#a).toFixed(2)}%`):(v.left=`${b}${p.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(_n.#w*d).toFixed(2)}px)`,v.fontFamily=u,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(E=!0)}if(E&&(i.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,i),this.#s.div=e,this.#s.properties=i,this.#_(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:e,properties:i,ctx:a}=t,{style:o}=e;let l="";if(_n.#w>1&&(l=`scale(${1/_n.#w})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=i;_n.#R(a,f*this.#h,u);const{width:p}=a.measureText(e.textContent);p>0&&(l=`scaleX(${d*this.#h/p}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#C.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#C.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#F(t,e,i){const a=this.#v.get(t);if(a)return a;const o=this.#D(i);o.canvas.width=o.canvas.height=f0,this.#R(o,f0,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Se.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}};const Iw=100;function Gd(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new qd,{docId:e}=t,i=h.url?X1(h.url):null,a=h.data?K1(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof Vd?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let p=h.worker instanceof xa?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!Jr(h.docBaseUrl)?h.docBaseUrl:null,v=Rl(h.cMapUrl),E=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Fe?ew:Jy),_=Rl(h.iccUrl),w=Rl(h.standardFontDataUrl),x=h.StandardFontDataFactory||(Fe?nw:t0),T=Rl(h.wasmUrl),M=h.WasmFactory||(Fe?iw:e0),N=h.stopAtErrors!==!0,R=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,D=h.isEvalSupported!==!1,z=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Fe,U=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Fe&&(Se.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,V=typeof h.disableFontFace=="boolean"?h.disableFontFace:Fe,Z=h.fontExtraProperties===!0,et=h.enableXfa===!0,J=h.ownerDocument||globalThis.document,ot=h.disableRange===!0,F=h.disableStream===!0,Y=h.disableAutoFetch===!0,nt=h.pdfBug===!0,ct=h.CanvasFactory||(Fe?tw:Q1),yt=h.FilterFactory||(Fe?J1:Z1),O=h.enableHWA===!0,K=h.useWasm!==!1,tt=d?d.length:h.length??NaN,it=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Fe&&!V,ut=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===Jy&&x===t0&&M===e0&&v&&w&&T&&Pr(v,document.baseURI)&&Pr(w,document.baseURI)&&Pr(T,document.baseURI)),dt=null;R1(y);const st={canvasFactory:new ct({ownerDocument:J,enableHWA:O}),filterFactory:new yt({docId:e,ownerDocument:J}),cMapReaderFactory:ut?null:new S({baseUrl:v,isCompressed:E}),standardFontDataFactory:ut?null:new x({baseUrl:w}),wasmFactory:ut?null:new M({baseUrl:T})};p||(p=xa.create({verbosity:y,port:Yi.workerPort}),t._worker=p);const Ct={docId:e,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:Y,rangeChunkSize:f,length:tt,docBaseUrl:b,enableXfa:et,evaluatorOptions:{maxImageSize:R,disableFontFace:V,ignoreErrors:N,isEvalSupported:D,isOffscreenCanvasSupported:z,isImageDecoderSupported:U,canvasMaxAreaInBytes:q,fontExtraProperties:Z,useSystemFonts:it,useWasm:K,useWorkerFetch:ut,cMapUrl:v,iccUrl:_,standardFontDataUrl:w,wasmUrl:T}},Et={ownerDocument:J,pdfBug:nt,styleElement:dt,loadingParams:{disableAutoFetch:Y,enableXfa:et}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Oe=p.messageHandler.sendWithPromise("GetDocRequest",Ct,a?[a.buffer]:null);let Me;if(d)Me=new Sw(d,{disableRange:ot,disableStream:F});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Pt=Pr(i)?Cw:Fe?Bw:Dw;Me=new Pt({url:i,length:tt,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:ot,disableStream:F})}return Oe.then(Pt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Gt=new Fr(e,Pt,p.port),qt=new jw(Gt,t,Me,Et,st,O);t._transport=qt,Gt.send("Ready",null)})}).catch(t._capability.reject),t}class qd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${qd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Vd=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Kt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Uw{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Hw{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new Yy:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Eb,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new Zr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:o=Vn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:_,cacheKey:w}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const T=!!(_&rn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(v||M),R=U=>{if(x.renderTasks.delete(D),N){const q=D.gfx?.dependencyTracker.take();q&&(D.stepper&&D.stepper.setOperatorBBoxes(q,D.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=q))}T&&(this.#t=!0),this.#e(),U?(D.capability.reject(U),this._abortOperatorList({intentState:x,reason:U instanceof Error?U:new Error(U)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new va({callback:R,params:{canvas:e,canvasContext:t,dependencyTracker:N?new aw(e,x.operatorList.length,M):null,viewport:i,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:E});(x.renderTasks||=new Set).add(D);const z=D.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([U,q])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(q.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:U,optionalContentConfig:q}),D.operatorListChanged()}).catch(R),z}getOperatorList({intent:t="display",annotationMode:e=Vn.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,i,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>qr.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function o(){l.read().then(function({value:d,done:f}){if(f){i(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Yy),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:l}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Zl){let a=Iw;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new mi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Vi,Mn,gi,ys,Vl,bs,vs,ze,zl,wb,_b,zr,Ca,Il;const Jt=class Jt{constructor({name:t=null,port:e=null,verbosity:i=M1()}={}){Fn(this,ze);Fn(this,Vi,Promise.withResolvers());Fn(this,Mn,null);Fn(this,gi,null);Fn(this,ys,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Zt(Jt,vs).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Jt,vs).set(e,this),zn(this,ze,wb).call(this,e)}else zn(this,ze,_b).call(this)}get promise(){return Zt(this,Vi).promise}get port(){return Zt(this,gi)}get messageHandler(){return Zt(this,Mn)}destroy(){this.destroyed=!0,Zt(this,ys)?.terminate(),Xe(this,ys,null),Zt(Jt,vs).delete(Zt(this,gi)),Xe(this,gi,null),Zt(this,Mn)?.destroy(),Xe(this,Mn,null)}static create(t){const e=Zt(this,vs).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Jt(t)}static get workerSrc(){if(Yi.workerSrc)return Yi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,Ca,Il)?Zt(this,Ca,Il):(await import(this.workerSrc)).WorkerMessageHandler)())}};Vi=new WeakMap,Mn=new WeakMap,gi=new WeakMap,ys=new WeakMap,Vl=new WeakMap,bs=new WeakMap,vs=new WeakMap,ze=new WeakSet,zl=function(){Zt(this,Vi).resolve(),Zt(this,Mn).send("configure",{verbosity:this.verbosity})},wb=function(t){Xe(this,gi,t),Xe(this,Mn,new Fr("main","worker",t)),Zt(this,Mn).on("ready",()=>{}),zn(this,ze,zl).call(this)},_b=function(){if(Zt(Jt,bs)||Zt(Jt,Ca,Il)){zn(this,ze,zr).call(this);return}let{workerSrc:t}=Jt;try{Jt._isSameOrigin(window.location,t)||(t=Jt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Fr("main","worker",e),a=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?Zt(this,Vi).reject(new Error("Worker was destroyed")):zn(this,ze,zr).call(this)},o=new AbortController;e.addEventListener("error",()=>{Zt(this,ys)||a()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Xe(this,Mn,i),Xe(this,gi,e),Xe(this,ys,e),zn(this,ze,zl).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{zn(this,ze,zr).call(this)}});const l=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};l();return}catch{Ql("The worker has been disabled.")}zn(this,ze,zr).call(this)},zr=function(){Zt(Jt,bs)||(At("Setting up fake worker."),Xe(Jt,bs,!0)),Jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,Vi).reject(new Error("Worker was destroyed"));return}const e=new $1;Xe(this,gi,e);const i=`fake${Qm(Jt,Vl)._++}`,a=new Fr(i+"_worker",i,e);t.setup(a,e),Xe(this,Mn,new Fr(i,i+"_worker",e)),zn(this,ze,zl).call(this)}).catch(t=>{Zt(this,Vi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ca=new WeakSet,Il=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fn(Jt,Ca),Fn(Jt,Vl,0),Fn(Jt,bs,!1),Fn(Jt,vs,new WeakMap),Fe&&(Xe(Jt,bs,!0),Yi.workerSrc||="./pdf.worker.mjs"),Jt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},Jt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Jt.fromPort=t=>{if(z1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(t)};let xa=Jt;class jw{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Eb,this.fontLoader=new V1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return _t(this,"annotationStorage",new Id)}getRenderingIntent(t,e=Vn.ENABLE,i=null,a=!1,o=!1){let l=rn.DISPLAY,u=fd;switch(t){case"any":l=rn.ANY;break;case"display":break;case"print":l=rn.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const d=l&rn.PRINT&&i instanceof cb?i:this.annotationStorage;switch(e){case Vn.DISABLE:l+=rn.ANNOTATIONS_DISABLE;break;case Vn.ENABLE:break;case Vn.ENABLE_FORMS:l+=rn.ANNOTATIONS_FORMS;break;case Vn.ENABLE_STORAGE:l+=rn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=rn.IS_EDITING),o&&(l+=rn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,y=[l,u.hash,p];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Vr.cleanup(),this._networkStream?.cancelAllRequests(new mi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{Nt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Nt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(i,a)=>{Nt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Nt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Uw(i,this))}),t.on("DocException",i=>{e._capability.reject(Ke(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw Ke(i);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const p=o.error;At(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const l=new jt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,y)=>globalThis.FontInspector.fontAdded(p,y):null,d=new Y1(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Nt(f,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,y]of p.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new Hw(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,a),a}getPageIndex(t){return gd(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new Aw(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new bw(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Vr.cleanup()}}cachedPageNumber(t){if(!gd(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Gw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class va{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:E=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Gw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(va.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");va.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Aa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),va.#e.delete(this._canvas),t||=new Zl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),va.#e.delete(this._canvas),this.callback())))}}const Cb="5.4.296",Tb="f56dc8601";class on{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new to([[["Escape","mac+Escape"],on.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],on.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],on.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],on.prototype._moveToPrevious],[["Home","mac+Home"],on.prototype._moveToBeginning],[["End","mac+End"],on.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",on.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",un,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",on.#d[i]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Dt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#n.lastChild?.focus()}#m(t){on._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Yr{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Yr.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Yr.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function g0(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function kr(h){return Math.max(0,Math.min(255,255*h))}class p0{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=kr(t),[t,t,t]}static G_HTML([t]){const e=g0(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(kr)}static RGB_HTML(t){return`#${t.map(g0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[kr(1-Math.min(1,t+a)),kr(1-Math.min(1,i+a)),kr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,o=1-e,l=1-i,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class qw{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Kt("Abstract method `_createSVG` called.")}}class Xr extends qw{_createSVG(t){return document.createElementNS(fi,t)}}const Vw=9,Ss=new WeakSet,Yw=new Date().getTimezoneOffset()*60*1e3;class m0{static create(t){switch(t.data.annotationType){case le.LINK:return new Yd(t);case le.TEXT:return new Kw(t);case le.WIDGET:switch(t.data.fieldType){case"Tx":return new Ww(t);case"Btn":return t.data.radioButton?new xb(t):t.data.checkBox?new Qw(t):new Zw(t);case"Ch":return new Jw(t);case"Sig":return new $w(t)}return new xs(t);case le.POPUP:return new yd(t);case le.FREETEXT:return new Rb(t);case le.LINE:return new e_(t);case le.SQUARE:return new n_(t);case le.CIRCLE:return new i_(t);case le.POLYLINE:return new Mb(t);case le.CARET:return new a_(t);case le.INK:return new Xd(t);case le.POLYGON:return new s_(t);case le.HIGHLIGHT:return new Db(t);case le.UNDERLINE:return new r_(t);case le.SQUIGGLY:return new o_(t);case le.STRIKEOUT:return new l_(t);case le.STAMP:return new Lb(t);case le.FILEATTACHMENT:return new c_(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(i?.length>=1){for(const u of i)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/i,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${jr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${jr}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof xs)&&!(this instanceof Yd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof yd){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(S>0||_>0){const x=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=x}else if(this instanceof xb){const x=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=x}switch(e.borderStyle.style){case ma.SOLID:l.borderStyle="solid";break;case ma.DASHED:l.borderStyle="dashed";break;case ma.BEVELED:At("Unimplemented border style: beveled");break;case ma.INSET:At("Unimplemented border style: inset");break;case ma.UNDERLINE:l.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(this.#e=!0,l.borderColor=rt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const f=rt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:y,pageX:b,pageY:v}=a.rawDims;l.left=`${100*(f[0]-b)/p}%`,l.top=`${100*(f[1]-v)/y}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(l.width=`${100*u/p}%`,l.height=`${100*d/y}%`):this.setRotation(E,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/i}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const o=a.detail[e],l=o[0],u=o.slice(1);a.target.style[i]=p0[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:p0[`${l}_rgb`](u)})};return _t(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,o]of Object.entries(e)){const l=i[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,w,x]=t.subarray(2,6);if(a===S&&o===_&&e===w&&i===x)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-i,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=p.createElement("defs");y.append(b);const v=p.createElement("clipPath"),E=`clippath_${this.data.id}`;v.setAttribute("id",E),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,_=t.length;S<_;S+=8){const w=t[S],x=t[S+1],T=t[S+2],M=t[S+3],N=p.createElement("rect"),R=(T-e)/d,D=(o-x)/f,z=(w-T)/d,U=(x-M)/f;N.setAttribute("x",R),N.setAttribute("y",D),N.setAttribute("width",z),N.setAttribute("height",U),v.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${D}" width="${z}" height="${U}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate);const o=this.#i=new yd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Kt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ss.has(f)){At(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&Ss.has(a)&&i.push({id:l,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Xw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Yd extends ie{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=i.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:o,include:l}=e,u=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:v}of b)p.add(v)}for(const y of Object.values(this._fieldObjects))for(const b of y)p.has(b.id)===l&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:y}=p;switch(f.push(y),p.type){case"text":{const v=p.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Ss.has(b)){At(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Kw extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class xs extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Se.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,o){i.includes("mouse")?t.addEventListener(i,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(i,l=>{if(i==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,i,a){for(const[o,l]of i)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":rt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||Vw,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Jh*a))||1,y=f/p;l=Math.min(a,d(y/Jh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(f/Jh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=rt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ww extends xs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=i),o.setValue(l.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ss.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:y}=this.data,b=!!p&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",E=>{t.setValue(e,{value:E.target.value}),this.setPropertyOnSiblings(i,"value",E.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";i.value=d.userValue=S,d.formattedValue=null});let v=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(b&&(_.type=p,y&&(_.step=y)),d.userValue){const w=d.userValue;if(b)if(p==="time"){const x=new Date(w),T=[x.getHours(),x.getMinutes(),x.getSeconds()];_.value=T.map(M=>M.toString().padStart(2,"0")).join(":")}else _.value=new Date(w-Yw).toISOString().split(p==="date"?"T":".",1)[0];else _.value=w}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(w){d.userValue=w.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:x}=w.detail;d.formattedValue=x,x!=null&&w.target!==document.activeElement&&(w.target.value=x);const T={formattedValue:x};b&&(T.value=x),t.setValue(e,T)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:x}=w.detail,{target:T}=w;if(x===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",x);let M=d.userValue;!M||M.length<=x||(M=M.slice(0,x),T.value=d.userValue=M,t.setValue(e,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),i.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:w}=S.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=v;v=null,i.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:w}=_;if(b){if(w&&p==="time"){const x=w.split(":").map(T=>parseInt(T,10));w=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),_.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();_.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:w}=S,{value:x,selectionStart:T,selectionEnd:M}=w;let N=T,R=M;switch(S.inputType){case"deleteWordBackward":{const D=x.substring(0,T).match(/\w*[^\w]*$/);D&&(N-=D[0].length);break}case"deleteWordForward":{const D=x.substring(T).match(/^[^\w]*\w*/);D&&(R+=D[0].length);break}case"deleteContentBackward":T===M&&(N-=1);break;case"deleteContentForward":T===M&&(R+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:_||"",willCommit:!1,selStart:N,selEnd:R}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $w extends xs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Qw extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ss.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,i)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(i,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class xb extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,i))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Ss.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=p&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Zw extends Yd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Jw extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Ss.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,i.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),l=()=>{p.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=p=>{const y=p?"value":"textContent",{options:b,multiple:v}=a;return v?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const y={value(b){l?.();const v=b.detail.value,E=new Set(Array.isArray(v)?v:[v]);for(const S of a.options)S.selected=E.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const v=a.options,E=b.detail.remove;v[E].selected=!1,a.remove(E),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:v,displayValue:E,exportValue:S}=b.detail.insert,_=a.children[v],w=document.createElement("option");w.textContent=E,w.value=S,_?_.before(w):a.append(w),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:v}=b.detail;for(;a.length!==0;)a.remove(0);for(const E of v){const{displayValue:S,exportValue:_}=E,w=document.createElement("option");w.textContent=S,w.value=_,a.append(w)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const E of b.target.options)E.selected=v.has(E.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,p)}),a.addEventListener("input",p=>{const y=u(!0),b=u(!1);t.setValue(e,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class yd extends ie{constructor(t){const{data:e,elements:i,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&ie._hasPopupData(e)}),this.elements=i,o&&ie._hasPopupData(e)){const l=this.popup=this.#t();for(const u of i)u.popup=l}else this.popup=null}#t(){return new t_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${kd}${a}`).join(",")),this.container}}class t_{#t=null;#e=this.#q.bind(this);#i=this.#I.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#C=null;#w=null;#A=null;#x=!1;#E=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:p,open:y,commentManager:b=null}){this.#a=t,this.#w=a,this.#o=l,this.#C=u,this.#d=d,this.#s=e,this.#b=f,this.#h=p,this.#l=i,this.#t=b,this.#E=i[0],this.#c=jl.toDateObject(o),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#g=new AbortController,e=!!this.#E.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#E.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",i,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#E.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",i,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#E.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#E.commentText,this.#_}set comment(t){t!==this.comment&&(this.#E.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#E.layer.getBoundingClientRect();return[(t-a)/l,(e+i-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+e*u,l+i*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const i=t.style.outlineColor=rt.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#w}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}Pd({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#N(){const t=this.#C,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#C.html||null}get#k(){return this.#N?.attributes?.style?.fontSize||0}get#z(){return this.#N?.attributes?.style?.color||null}#B(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#z,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return i}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#F(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),e&&e.text&&(this.#C=this.#B(e.text),this.#c=jl.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#C}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const E of this.#l)if(!u||rt.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const d=rt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,y=d[0]+p,b=d[1];this.#u=[100*(y-a)/e,100*(b-o)/i];const{style:v}=this.#a;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#I(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#x&&(this.#m||this.#O(),this.#x=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class Rb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class e_ extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class n_ extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class i_ extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",i/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mb extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,y=e.length;p<y;p+=2){const b=e[p]-t[0],v=t[3]-e[p+1];d.push(`${b},${v}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class s_ extends Mb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class a_ extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Xd extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let y=0,b=i.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",i[y].join(",")),p.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),i)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Db extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class r_ extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class o_ extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class l_ extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Lb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class c_ extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Se.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Kd=class Nb{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=i,this.#r=u||null,this.#s=f||null,this.#i=p||new Id,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const a=t.firstChild||t,o=a.id=`${kd}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)a.setAttribute(u,d);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;Xi(i,this.viewport);const a=new Map,o={data:null,layer:i,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Xr,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===le.POPUP;if(u){const p=a.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=m0.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const p=a.get(l.popupRef);p?p.push(d):a.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new Xr,parent:this};for(const i of t){i.borderStyle||=Nb._defaultBorderStyle,e.data=i;const a=m0.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Xi(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,o=new Xw({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return _t(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ma.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const kl=/\r\n?|\n/g;class ve extends gt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ve.prototype,e=o=>o.isEmpty(),i=yi.TRANSLATE_SMALL,a=yi.TRANSLATE_BIG;return _t(this,"_keyboardManager",new to([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ve._defaultColor||gt._defaultLineColor,this.#n=t.fontSize||ve._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){gt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Dt.FREETEXT_SIZE:ve._defaultFontSize=e;break;case Dt.FREETEXT_COLOR:ve._defaultColor=e;break}}updateParams(t,e){switch(t){case Dt.FREETEXT_SIZE:this.#r(e);break;case Dt.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Dt.FREETEXT_SIZE,ve._defaultFontSize],[Dt.FREETEXT_COLOR,ve._defaultColor||gt._defaultLineColor]]}get propertiesToUpdate(){return[[Dt.FREETEXT_SIZE,this.#n],[Dt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Yr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Dt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ve._internalPadding*t,-(ve._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(ve.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ve._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[y,b]=this.pageTranslation;let v,E;switch(this.rotation){case 0:v=t+(l[0]-y)/f,E=e+this.height-(l[1]-b)/p;break;case 90:v=t+(l[0]-y)/f,E=e-(l[1]-b)/p,[u,d]=[d,-u];break;case 180:v=t-this.width+(l[0]-y)/f,E=e-(l[1]-b)/p,[u,d]=[-u,-d];break;case 270:v=t+(l[0]-y-this.height*p)/f,E=e+(l[1]-b-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(v*a,E*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(kl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=ve.#h(e.getData("text")||"").replaceAll(kl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(kl,"")),v!==this.editorDiv){let E=f;for(const S of this.editorDiv.childNodes){if(S===v){E=p;continue}E.push(ve.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(kl,""))}else if(u===this.editorDiv){let v=f,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(v=p),v.push(ve.#c(S))}this.#t=`${f.join(`
`)}${a}${p.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const E=v.nodeValue.length;if(b<=E){y.setStart(v,b),y.setEnd(v,b);break}b-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ve._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof Rb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:p,popupRef:y,richText:b,contentsObj:v,creationDate:E,modificationDate:S},textContent:_,textPosition:w,parent:{page:{pageNumber:x}}}=t;if(!_||_.length===0)return null;a=t={annotationType:vt.FREETEXT,color:Array.from(u),fontSize:l,value:_.join(`
`),position:w,pageIndex:x-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:y,comment:v?.str||null,richText:b,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,e,i);return o.#n=t.fontSize,o.color=rt.makeHexColor(...t.color),o.#t=ve.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class at{static PRECISION=1e-4;toSVGPath(){Kt("Abstract method `toSVGPath` must be implemented.")}get box(){Kt("Abstract getter `box` must be implemented.")}serialize(t,e){Kt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*a,l[u+1]=i+t[u+1]*o;return l}static _rescaleAndSwap(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*a,l[u+1]=i+t[u]*o;return l}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=i+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,o){switch(o){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,o,l){return[(t+5*i)/6,(e+5*a)/6,(5*i+o)/6,(5*a+l)/6,(i+o)/2,(a+l)/2]}}class ms{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=ms.#m+ms.#g;constructor({x:t,y:e},i,a,o,l,u=0){this.#t=i,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=ms.#m*a,this.#c=ms.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#p(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,a,o,l]=this.#t;let[u,d,f,p]=this.#s.subarray(8,12);const y=t-f,b=e-p,v=Math.hypot(y,b);if(v<this.#c)return!1;const E=v-this.#l,S=E/v,_=S*y,w=S*b;let x=u,T=d;u=f,d=p,f+=_,p+=w,this.#f?.push(t,e);const M=-w/E,N=_/E,R=M*this.#h,D=N*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+R,p+D],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-R,p-D],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+R,d+D],2),this.#r.push(NaN,NaN,NaN,NaN,(u+R-i)/o,(d+D-a)/l),this.#s.set([u-R,d-D],14),this.#e.push(NaN,NaN,NaN,NaN,(u-R-i)/o,(d-D-a)/l)),this.#s.set([x,T,u,d,f,p],6),!this.isEmpty()):(this.#s.set([x,T,u,d,f,p],6),Math.abs(Math.atan2(T-d,x-u)-Math.atan2(w,_))<Math.PI/2?([u,d,f,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/o,((d+p)/2-a)/l),[u,d,x,T]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+u)/2-i)/o,((T+d)/2-a)/l),!0):([x,T,u,d,f,p]=this.#s.subarray(0,6),this.#r.push(((x+5*u)/6-i)/o,((T+5*d)/6-a)/l,((5*u+f)/6-i)/o,((5*d+p)/6-a)/l,((u+f)/2-i)/o,((d+p)/2-a)/l),[f,p,u,d,x,T]=this.#s.subarray(12,18),this.#e.push(((x+5*u)/6-i)/o,((T+5*d)/6-a)/l,((5*u+f)/6-i)/o,((5*d+p)/6-a)/l,((u+f)/2-i)/o,((d+p)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[o,l,u,d]=this.#p();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/a} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,a,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,f,p,y]=this.#p();t.push(`L${(l[0]-e)/a} ${(l[1]-i)/o} L${d} ${f} L${p} ${y} L${(u[0]-e)/a} ${(u[1]-i)/o}`)}newFreeDrawOutline(t,e,i,a,o,l){return new Ob(t,e,i,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(i[6])&&!this.isEmpty())return this.#C(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=this.#A(f,p);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[y+b],f[p+1]=e[y+b+1],p+=2}return this.#w(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#C(t){const e=this.#s,[i,a,o,l]=this.#t,[u,d,f,p]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#w(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[f,p,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-l)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],e),e+=24}}class Ob extends at{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,i,a,o,l){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,p]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/p;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-u)/f,e[y+1]=(e[y+1]-d)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],o){const l=i-t,u=a-e;let d,f;switch(o){case 0:d=at._rescale(this.#a,t,a,l,-u),f=at._rescale(this.#r,t,a,l,-u);break;case 90:d=at._rescaleAndSwap(this.#a,t,e,l,u),f=at._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:d=at._rescale(this.#a,i,e,-l,u),f=at._rescale(this.#r,i,e,-l,u);break;case 270:d=at._rescaleAndSwap(this.#a,i,a,-l,-u),f=at._rescaleAndSwap(this.#r,i,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#a;let i=e[4],a=e[5];const o=[i,a,i,a];let l=i,u=a,d=i,f=a;const p=t?Math.max:Math.min,y=new Float32Array(4);for(let v=6,E=e.length;v<E;v+=6){const S=e[v+4],_=e[v+5];isNaN(e[v])?(rt.pointBoundingBox(S,_,o),u>_?(l=S,u=_):u===_&&(l=p(l,S)),f<_?(d=S,f=_):f===_&&(d=p(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,rt.bezierBoundingBox(i,a,...e.slice(v,v+6),y),rt.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=p(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=p(d,y[2]))),i=S,a=_}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,o,l=0){return new ms(t,e,i,a,o,l)}getNewOutline(t,e){const[i,a,o,l]=this.#e,[u,d,f,p]=this.#t,y=o*f,b=l*p,v=i*f+u,E=a*p+d,S=this.newOutliner({x:this.#r[0]*y+v,y:this.#r[1]*b+E},this.#t,this.#s,t,this.#n,e??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+v,y:this.#r[_+1]*b+E});return S.getOutlines()}}class bd{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:_,width:w,height:x}of t){const T=Math.floor((S-e)/l)*l,M=Math.ceil((S+w+e)/l)*l,N=Math.floor((_-e)/l)*l,R=Math.ceil((_+x+e)/l)*l,D=[T,N,R,!0],z=[M,N,R,!1];this.#n.push(D,z),rt.rectBoundingBox(T,N,M,R,o)}const u=o[2]-o[0]+2*i,d=o[3]-o[1]+2*i,f=o[0]-i,p=o[1]-i;let y=a?-1/0:1/0,b=1/0;const v=this.#n.at(a?-1:-2),E=[v[0],v[2]];for(const S of this.#n){const[_,w,x,T]=S;!T&&a?w<b?(b=w,y=_):w===b&&(y=Math.max(y,_)):T&&!a&&(w<b?(b=w,y=_):w===b&&(y=Math.min(y,_))),S[0]=(_-f)/u,S[1]=(w-p)/d,S[2]=(x-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[y,b],this.#i=E}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],i=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let o;for(;i.size>0;){const l=i.values().next().value;let[u,d,f,p,y]=l;i.delete(l);let b=u,v=d;for(o=[u,f],a.push(o);;){let E;if(i.has(p))E=p;else if(i.has(y))E=y;else break;i.delete(E),[u,d,f,p,y]=E,b!==u&&(o.push(b,v,u,v===d?d:f),b=u),v=v===d?f:d}o.push(b,v)}return new u_(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const o=i+a>>1,l=e[o][0];if(l===t)return o;l<t?i=o+1:a=o-1}return a+1}#o([,t,e]){const i=this.#a(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#a(t);for(let a=i;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,i,a]=t,o=[[e,i,a]],l=this.#a(a);for(let u=0;u<l;u++){const[d,f]=this.#r[u];for(let p=0,y=o.length;p<y;p++){const[,b,v]=o[p];if(!(f<=b||v<=d)){if(b>=d){if(v>f)o[p][1]=f;else{if(y===1)return[];o.splice(p,1),p--,y--}continue}o[p][2]=d,v>f&&o.push([e,f,v])}}}return o}}class u_ extends at{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],o){const l=[],u=i-t,d=a-e;for(const f of this.#e){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*u,p[y+1]=a-f[y+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class vd extends ms{newFreeDrawOutline(t,e,i,a,o,l){return new h_(t,e,i,a,o,l)}}class h_ extends Ob{newOutliner(t,e,i,a,o,l=0){return new vd(t,e,i,a,o,l)}}class ce extends gt{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ce.prototype;return _t(this,"_keyboardManager",new to([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ce._defaultColor,this.#p=t.thickness||ce._defaultThickness,this.opacity=t.opacity||ce._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#E()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new bd(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new bd(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#p/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ce.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ce.#_(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:p}=this.#s;this.#m=[(p[0]-o)/u,(p[1]-l)/d]}static initialize(t,e){gt.initialize(t,e),ce._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Dt.HIGHLIGHT_COLOR:ce._defaultColor=e;break;case Dt.HIGHLIGHT_THICKNESS:ce._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Dt.HIGHLIGHT_COLOR:this.#C(e);break;case Dt.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[Dt.HIGHLIGHT_COLOR,ce._defaultColor],[Dt.HIGHLIGHT_THICKNESS,ce._defaultThickness]]}get propertiesToUpdate(){return[[Dt.HIGHLIGHT_COLOR,this.color||ce._defaultColor],[Dt.HIGHLIGHT_THICKNESS,this.#p||ce._defaultThickness],[Dt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,ce._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const e=this.#p,i=a=>{this.#p=a,this.#A(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new on({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#x():t&&(this.#E(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#E(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,i,a],o){switch(o){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=ce.#_(this.#l.box,t)):i=ce.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:ce.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),ob(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){ce._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#F(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:y}of o){const b=d*t+i,v=(1-f)*e+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=v,l[u+2]=l[u+6]=b+p*t,l[u+5]=l[u+7]=v-y*e,u+=8}return l}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:a,y:o}){const{x:l,y:u,width:d,height:f}=i.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),b=v=>{p.abort(),this.#z(t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",un,{signal:y}),i.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new vd({x:a,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof Db){const{data:{quadPoints:E,rect:S,rotation:_,id:w,color:x,opacity:T,popupRef:M,richText:N,contentsObj:R,creationDate:D,modificationDate:z},parent:{page:{pageNumber:U}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(x),opacity:T,quadPoints:E,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:M,richText:N,comment:R?.str||null,creationDate:D,modificationDate:z}}else if(t instanceof Xd){const{data:{inkLists:E,rect:S,rotation:_,id:w,color:x,borderStyle:{rawWidth:T},popupRef:M,richText:N,contentsObj:R,creationDate:D,modificationDate:z},parent:{page:{pageNumber:U}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(x),thickness:T,inkLists:E,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:M,richText:N,comment:R?.str||null,creationDate:D,modificationDate:z}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=rt.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[p,y]=f.pageDimensions,[b,v]=f.pageTranslation;if(l){const E=f.#i=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-b)/p,y:1-(l[S+1]-v)/y,width:(l[S+2]-l[S])/p,height:(l[S+1]-l[S+5])/y});f.#v(),f.#E(),f.rotate(f.rotation)}else if(u){f.#h=!0;const E=u[0],S={x:E[0]-b,y:y-(E[1]-v)},_=new vd(S,[0,0,p,y],1,f.#p/2,!0,.001);for(let T=0,M=E.length;T<M;T+=2)S.x=E[T]-b,S.y=y-(E[T+1]-v),_.add(S);const{id:w,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#b({highlightOutlines:_.getOutlines(),highlightId:w,clipPathId:x}),f.#E(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=gt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#N(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#B(i)?null:(i.id=this.annotationElementId,i)}#B(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class kb{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Kt("Not implemented")}}class mt extends gt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Kt("Not implemented")}static get typesMap(){Kt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(mt.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,o=a[e],l=u=>{a.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,i,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(l/o),a*(o/l)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(l/o),a*(o/l)];default:return[t,e,i,a]}}#g(){const{x:t,y:e,width:i,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(o/l),a*(l/o)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(o/l),a*(l/o)];default:return[t,e,i,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:e,width:i,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(u/d),a*(d/u),i*(u/d)];case 5:return[1-e,t,i*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-e,a*(d/u),i*(u/d)];case 7:return[e-i*(u/d),1-t-a*(d/u),i*(u/d),a*(d/u)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/u),e,a*(d/u),i*(u/d)];case 13:return[1-e-i*(u/d),t-a*(d/u),i*(u/d),a*(d/u)];case 14:return[1-t,1-e-i*(u/d),a*(d/u),i*(u/d)];case 15:return[e,1-t,i*(u/d),a*(d/u)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,o){Kt("Not implemented")}static startDrawing(t,e,i,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=a;if(mt.#a&&mt.#a!==f)return;const{viewport:{rotation:p}}=t,{width:y,height:b}=o.getBoundingClientRect(),v=mt.#n=new AbortController,E=t.combinedSignal(v);if(mt.#s||=d,mt.#a??=f,window.addEventListener("pointerup",S=>{mt.#s===S.pointerId?this._endDraw(S):mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{mt.#s===S.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{mt.#a===S.pointerType&&((mt.#o||=new Set).add(S.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",un,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===mt.#c&&ne(S)},{signal:E}),t.toggleDrawing(),e._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,u,y,b,p));return}e.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,u,y,b,p),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(mt.#s===a){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(e,i)),mt.#c=t.timeStamp,ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=mt.#i,a=this._currentDrawId,o=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Dt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Dt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[i,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,o,l){Kt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=e.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class d_{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new io;#l;#d;constructor(t,e,i,a,o,l){this.#l=i,this.#d=a,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return at._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,o,l]=this.#t.subarray(2,6),u=t-o,d=e-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,o,l,t,e],0),this.#e.push(...at.createBezierPoints(i,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,o){this.#l=i,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=at.svgRound(this.#e[4]),e=at.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const a=at.svgRound(this.#e[10]),o=at.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,f,p,y]=this.#e.slice(a,a+6).map(at.svgRound);i.push(`C${l} ${u} ${d} ${f} ${p} ${y}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class io extends at{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,i,a,o,l,u){this.#r=e,this.#s=i,this.#a=a,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${at.svgRound(e[4])} ${at.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${at.svgRound(e[10])} ${at.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[o,l,u,d,f,p]=e.subarray(i,i+6).map(at.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,i,a],o){const l=[],u=[],[d,f,p,y]=this.#d();let b,v,E,S,_,w,x,T,M;switch(this.#o){case 0:M=at._rescale,b=t,v=e+a,E=i,S=-a,_=t+d*i,w=e+(1-f-y)*a,x=t+(d+p)*i,T=e+(1-f)*a;break;case 90:M=at._rescaleAndSwap,b=t,v=e,E=i,S=a,_=t+f*i,w=e+d*a,x=t+(f+y)*i,T=e+(d+p)*a;break;case 180:M=at._rescale,b=t+i,v=e,E=-i,S=a,_=t+(1-d-p)*i,w=e+f*a,x=t+(1-d)*i,T=e+(f+y)*a;break;case 270:M=at._rescaleAndSwap,b=t+i,v=e+a,E=-i,S=-a,_=t+(1-f-y)*i,w=e+(1-d-p)*a,x=t+(1-f)*i,T=e+(1-d)*a;break}for(const{line:N,points:R}of this.#n)l.push(M(N,b,v,E,S,o?new Array(N.length):null)),u.push(M(R,b,v,E,S,o?new Array(R.length):null));return{lines:l,points:u,rect:[_,w,x,T]}}static deserialize(t,e,i,a,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const p=[];let y,b,v,E,S;switch(d){case 0:S=at._rescale,y=-t/i,b=e/a+1,v=1/i,E=-1/a;break;case 90:S=at._rescaleAndSwap,y=-e/a,b=-t/i,v=1/a,E=1/i;break;case 180:S=at._rescale,y=t/i+1,b=-e/a,v=-1/i,E=1/a;break;case 270:S=at._rescaleAndSwap,y=e/a+1,b=t/i+1,v=-1/a,E=-1/i;break}if(!l){l=[];for(const w of u){const x=w.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const T=new Float32Array(3*(x-2));l.push(T);let[M,N,R,D]=w.subarray(0,4);T.set([NaN,NaN,NaN,NaN,M,N],0);for(let z=4;z<x;z+=2){const U=w[z],q=w[z+1];T.set(at.createBezierPoints(M,N,R,D,U,q),(z-2)*3),[M,N,R,D]=[R,D,U,q]}}}for(let w=0,x=l.length;w<x;w++)p.push({line:S(l[w].map(T=>T??NaN),y,b,v,E),points:S(u[w].map(T=>T??NaN),y,b,v,E)});const _=new this.prototype.constructor;return _.build(p,i,a,1,d,f,o),_}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,i,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,i-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)rt.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,p,y,b,v,E]=a.subarray(u,u+6);rt.bezierBoundingBox(o,l,f,p,y,b,v,E,t),o=v,l=E}}const[e,i]=this.#l();t[0]=Le(t[0]-e,0,1),t[1]=Le(t[1]-i,0,1),t[2]=Le(t[2]+e,0,1),t[3]=Le(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-e,o-i],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,e],i){const[a,o]=this.#l();this.#r=t,this.#s=e,this.#a=i;const[l,u]=this.#l(),d=l-a,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(at.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:i=-1,l=-1,u=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${o} ${l} ${at.svgRound(u)} ${at.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[o,l]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=at.PRECISION||Math.abs(p-l)<=at.PRECISION){const S=t+i/2-(u+f/2),_=e+a/2-(d+p/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(i-2*o)/(f-2*o),b=(a-2*l)/(p-2*l),v=f/i,E=p/a;return{path:{"transform-origin":`${at.svgRound(u)} ${at.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${E}) translate(${at.svgRound(o)} ${at.svgRound(l)}) scale(${y} ${b}) translate(${at.svgRound(-o)} ${at.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[o,l]=this.#l(),u=this.#t,[d,f,p,y]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=a,Math.abs(p-o)<=at.PRECISION||Math.abs(y-l)<=at.PRECISION){const _=t+i/2-(d+p/2),w=e+a/2-(f+y/2);for(const{line:x,points:T}of this.#n)at._translate(x,_,w,x),at._translate(T,_,w,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*o)/(p-2*o),v=(a-2*l)/(y-2*l),E=-b*(d+o)+t+o,S=-v*(f+l)+e+l;if(b!==1||v!==1||E!==0||S!==0)for(const{line:_,points:w}of this.#n)at._rescale(_,E,S,b,v,_),at._rescale(w,E,S,b,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,o]=i,l=this.#t,u=t-l[0],d=e-l[1];if(this.#r===a&&this.#s===o)for(const{line:f,points:p}of this.#n)at._translate(f,u,d,f),at._translate(p,u,d,p);else{const f=this.#r/a,p=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:b}of this.#n)at._rescale(y,u,d,f,p,y),at._rescale(b,u,d,f,p,b);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class ec extends kb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:gt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new ec(this._viewParameters);return t.updateAll(this),t}}class Wd extends mt{static _type="ink";static _editorType=vt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){gt.initialize(t,e),this._defaultDrawingOptions=new ec(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return _t(this,"typesMap",new Map([[Dt.INK_THICKNESS,"stroke-width"],[Dt.INK_COLOR,"stroke"],[Dt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,o){return new d_(t,e,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,o,l){return io.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){let a=null;if(t instanceof Xd){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:p,opacity:y,borderStyle:{rawWidth:b},popupRef:v,richText:E,contentsObj:S,creationDate:_,modificationDate:w},parent:{page:{pageNumber:x}}}=t;a=t={annotationType:vt.INK,color:Array.from(p),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:E,comment:S?.str||null,creationDate:_,modificationDate:w}}const o=await super.deserialize(t,e,i);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Yr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Dt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Wd.getDefaultDrawingOptions({stroke:rt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:gt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Ad extends io{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Bl=8,Br=3;class ps{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,o,l,u){const d=this.#e(i,a,o,l);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,y=this.#i[2*p],b=this.#i[2*p+1];if(t[(i+y)*e+(a+b)]!==0)return p}return-1}static#r(t,e,i,a,o,l,u){const d=this.#e(i,a,o,l);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,y=this.#i[2*p],b=this.#i[2*p+1];if(t[(i+y)*e+(a+b)]!==0)return p}return-1}static#s(t,e,i,a){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=a?1:0;for(let p=1;p<i-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*i-1-p]=0;let u=1,d;const f=[];for(let p=1;p<i-1;p++){d=1;for(let y=1;y<e-1;y++){const b=p*e+y,v=l[b];if(v===0)continue;let E=p,S=y;if(v===1&&l[b-1]===0)u+=1,S-=1;else if(v>=1&&l[b+1]===0)u+=1,S+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const _=[y,p],w=S===y+1,x={isHole:w,points:_,id:u,parent:0};f.push(x);let T;for(const V of f)if(V.id===d){T=V;break}T?T.isHole?x.parent=w?T.parent:d:x.parent=w?d:T.parent:x.parent=w?d:0;const M=this.#n(l,e,p,y,E,S,0);if(M===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let N=this.#i[2*M],R=this.#i[2*M+1];const D=p+N,z=y+R;E=D,S=z;let U=p,q=y;for(;;){const V=this.#r(l,e,U,q,E,S,1);N=this.#i[2*V],R=this.#i[2*V+1];const Z=U+N,et=q+R;_.push(et,Z);const J=U*e+q;if(l[J+1]===0?l[J]=-u:l[J]===1&&(l[J]=u),Z===p&&et===y&&U===D&&q===z){l[b]!==1&&(d=Math.abs(l[b]));break}else E=U,S=q,U=Z,q=et}}}return f}static#a(t,e,i,a){if(i-e<=4){for(let D=e;D<i-2;D+=2)a.push(t[D],t[D+1]);return}const o=t[e],l=t[e+1],u=t[i-4]-o,d=t[i-3]-l,f=Math.hypot(u,d),p=u/f,y=d/f,b=p*l-y*o,v=d/u,E=1/f,S=Math.atan(v),_=Math.cos(S),w=Math.sin(S),x=E*(Math.abs(_)+Math.abs(w)),T=E*(1-x+x**2),M=Math.max(Math.atan(Math.abs(w+_)*T),Math.atan(Math.abs(w-_)*T));let N=0,R=e;for(let D=e+2;D<i-2;D+=2){const z=Math.abs(b-p*t[D+1]+y*t[D]);z>N&&(R=D,N=z)}N>(f*M)**2?(this.#a(t,e,R+2,a),this.#a(t,R,i,a)):a.push(o,l)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const _=(S-f)**2;for(let w=0;w<l;w++)u[S*l+w]=Math.exp((_+(w-f)**2)/d)}const p=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/y);const b=t.length,v=new Uint8Array(b),E=new Uint32Array(256);for(let S=0;S<i;S++)for(let _=0;_<e;_++){const w=S*e+_,x=t[w];let T=0,M=0;for(let R=0;R<l;R++){const D=S+R-f;if(!(D<0||D>=i))for(let z=0;z<l;z++){const U=_+z-f;if(U<0||U>=e)continue;const q=t[D*e+U],V=u[R*l+z]*p[Math.abs(q-x)];T+=q*V,M+=V}}const N=v[w]=Math.round(T/M);E[N]++}return[v,E]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,d=i.length;u<d;u++){const f=i[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let u=0,d=i.length;u<d;u++)i[u]=(i[u]-o)*l;return i}static#h(t){let e,i=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(e=o;e<256;e++){const d=t[e];d>i&&(e-l>a&&(a=e-l,u=e-1),i=d,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:o}=this.#t;let l=i,u=a;if(i>o||a>o){let b=i,v=a,E=Math.log2(Math.max(i,a)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let w=0;w<E;w++){l=Math.ceil(b/2),u=Math.ceil(v/2);const x=new OffscreenCanvas(l,u);x.getContext("2d").drawImage(t,0,0,b,v,0,0,l,u),b=l,v=u,t!==e&&t.close(),t=x.transferToImageBitmap()}const _=Math.min(o/l,o/u);l=Math.round(l*_),u=Math.round(u*_)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[this.#d(p),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},o,l,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,b=p.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:T}=p.measureText(t),M=1.5,N=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||0,T)*M),R=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(w)+Math.abs(x)||y)*M);f=new OffscreenCanvas(N,R),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,N,R),p.fillStyle="black",p.fillText(t,N*(M-1)/2,R*(3-M)/2);const D=this.#d(p.getImageData(0,0,N,R).data),z=this.#l(D),U=this.#h(z),q=this.#s(D,N,R,U);return this.processDrawnLines({lines:{curves:q,width:N,height:R},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,o){const[l,u,d]=this.#f(t),[f,p]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(p),b=this.#s(f,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:p}=t,y=t.thickness??0,b=[],v=Math.min(e/f,i/p),E=v/e,S=v/i,_=[];for(const{points:x}of d){const T=l?this.#o(x):x;if(!T)continue;_.push(T);const M=T.length,N=new Float32Array(M),R=new Float32Array(3*(M===2?2:M-2));if(b.push({line:R,points:N}),M===2){N[0]=T[0]*E,N[1]=T[1]*S,R.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[D,z,U,q]=T;D*=E,z*=S,U*=E,q*=S,N.set([D,z,U,q],0),R.set([NaN,NaN,NaN,NaN,D,z],0);for(let V=4;V<M;V+=2){const Z=N[V]=T[V]*E,et=N[V+1]=T[V+1]*S;R.set(at.createBezierPoints(D,z,U,q,Z,et),(V-2)*3),[D,z,U,q]=[U,q,Z,et]}}if(b.length===0)return null;const w=u?new Ad:new io;return w.build(b,e,i,1,a,u?0:y,o),{outline:w,newCurves:_,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const T of t){d+=T.length;for(let M=2,N=T.length;M<N;M++){const R=T[M]-T[M-2];l=Math.min(l,R),u=Math.max(u,R)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=Bl+Br*p,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=a,b[v++]=o,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(i??0)),b[v++]=p,b[v++]=f.BYTES_PER_ELEMENT;for(const T of t)b[v++]=T.length-2,b[v++]=T[0],b[v++]=T[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(b);const _=f.prototype.constructor;for(const T of t){const M=new _(T.length-2);for(let N=2,R=T.length;N<R;N++)M[N-2]=T[N]-T[N-2];S.write(M)}S.close();const w=await new Response(E.readable).arrayBuffer(),x=new Uint8Array(w);return tb(x)}static async decompressSignature(t){try{const e=F1(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const T of i)l||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),l.set(T,u),u+=T.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],y=d[3],b=d[4]===0,v=d[5],E=d[6],S=d[7],_=[],w=(Bl+Br*E)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(S){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(l.buffer,w);break}u=0;for(let T=0;T<E;T++){const M=d[Br*T+Bl],N=new Float32Array(M+2);_.push(N);for(let R=0;R<Br-1;R++)N[R]=d[Br*T+Bl+R+1];for(let R=0;R<M;R++)N[R+2]=N[R]+x[u++]}return{areContours:b,thickness:v,outlines:_,width:p,height:y}}catch(e){return At(`decompressSignature: ${e}`),null}}}class $d extends kb{constructor(){super(),super.updateProperties({fill:gt._defaultLineColor,"stroke-width":0})}clone(){const t=new $d;return t.updateAll(this),t}}class Qd extends ec{constructor(t){super(t),super.updateProperties({stroke:gt._defaultLineColor,"stroke-width":1})}clone(){const t=new Qd(this._viewParameters);return t.updateAll(this),t}}class jn extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=vt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){gt.initialize(t,e),this._defaultDrawingOptions=new $d,this._defaultDrawnSignatureOptions=new Qd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return _t(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:y},rotation:b}=this.parent.viewport,v=ps.processDrawnLines({lines:a,pageWidth:p,pageHeight:y,rotation:b,innerMargin:jn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:o}=this.#i,l=Math.max(a,o),u=ps.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Ad,this.description=i;let d;this.#t?d=jn.getDefaultDrawingOptions():(d=jn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ps.process(t,e,i,a,jn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return ps.extractContoursFromText(t,e,i,a,o,jn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ps.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:jn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=jn.getDefaultDrawingOptions():(this._drawingOptions=jn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,i,a,o,l){return l.areContours?Ad.deserialize(t,e,i,a,o,l):io.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class f_ extends gt{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){gt.initialize(t,e)}static isHandlingMimeForPasting(t){return Gl.includes(t)}static paste(t,e){e.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#g()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Gl.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,i=this.height*o;else if(e>l*a||i>l*o){const d=Math.min(l*a/e,l*o/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=i/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Dn;let u=this.#t,d=a,f=o,p=null;if(e){if(a>e||o>e){const R=Math.min(e/a,e/o);d=Math.floor(a*R),f=Math.floor(o*R)}p=document.createElement("canvas");const b=p.width=Math.ceil(d*l.sx),v=p.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,v));const E=p.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":U1.isDarkMode&&(S="#8f8f9d",_="#42414d");const w=15,x=w*l.sx,T=w*l.sy,M=new OffscreenCanvas(x*2,T*2),N=M.getContext("2d");N.fillStyle=S,N.fillRect(0,0,x*2,T*2),N.fillStyle=_,N.fillRect(0,0,x,T),N.fillRect(x,T,x,T),E.fillStyle=E.createPattern(M,"repeat"),E.fillRect(0,0,b,v),E.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let y=null;if(i){let b,v;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);b=Math.floor(a*_),v=Math.floor(o*_),this.#l||(u=this.#u(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,v),y={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:p,width:d,height:f,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let o=i,l=a,u=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=p.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,o=new Dn,l=Math.ceil(i*t*o.sx),u=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*As.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*As.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,o=!1;if(t instanceof Lb){const{data:{rect:S,rotation:_,id:w,structParent:x,popupRef:T,richText:M,contentsObj:N,creationDate:R,modificationDate:D},container:z,parent:{page:{pageNumber:U}},canvas:q}=t;let V,Z;q?(delete t.canvas,{id:V,bitmap:Z}=i.imageManager.getFromCanvas(z.id,q),q.remove()):(o=!0,t._hasNoCanvas=!0);const et=(await e._structTree.getAriaAttributes(`${kd}${w}`))?.get("aria-label")||"";a=t={annotationType:vt.STAMP,bitmapId:V,bitmap:Z,pageIndex:U-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:et},isSvg:!1,structParent:x,popupRef:T,richText:M,comment:N?.str||null,creationDate:R,modificationDate:D}}const l=await super.deserialize(t,e,i),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:y,accessibilityData:b}=t;o?(i.addMissingCanvas(t.id,l),l.#o=!0):p&&i.imageManager.isValidId(p)?(l.#e=p,d&&(l.#t=d)):l.#n=f,l.#l=y;const[v,E]=l.pageDimensions;return l.width=(u[2]-u[0])/v,l.height=(u[3]-u[1])/E,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const l=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class qn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([ve,Wd,f_,ce,jn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const y=[...qn.#p.values()];if(!qn._initialized){qn._initialized=!0;for(const b of y)b.initialize(p,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===vt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===vt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of qn.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const i=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,f=this.#g;if(d-f>500){this.#g=d;return}this.#g=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const v=new RegExp(`^${jr}[0-9]+$`);for(const S of y)if(v.test(S.id)){b=S.id;break}if(!b)return;const E=this.#s.get(b);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:i,capture:!0})}const t=this.#i;if(t){const i=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=i.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of qn.#p.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Se.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ce.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),gt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return qn.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#w(),o=this.getNextId(),l=this.#C({parent:this,id:o,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await qn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),o=this.#C({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,p=(l+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===vt.STAMP||i===vt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Xi(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Xi(this.div,{rotation:i}),e!==i)for(const a of this.#s.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ae{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return _t(this,"_svgFactory",new Xr)}static#r(t,[e,i,a,o]){const{style:l}=t;l.top=`${100*i}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ae._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=Ae._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Ae._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Ae.#n++,o=this.#s(),l=Ae._svgFactory.createElement("defs");o.append(l);const u=Ae._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,u);const f=i?this.#a(l,d):null,p=Ae._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Ae.#n++,a=this.#s(),o=Ae._svgFactory.createElement("defs");a.append(o);const l=Ae._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Ae._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ae._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Ae._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Ae._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return a.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),a&&Ae.#r(u,a),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:bd};globalThis.pdfjsLib={AbortException:mi,AnnotationEditorLayer:qn,AnnotationEditorParamsType:Dt,AnnotationEditorType:vt,AnnotationEditorUIManager:yi,AnnotationLayer:Kd,AnnotationMode:Vn,AnnotationType:le,applyOpacity:ab,build:Tb,ColorPicker:on,createValidAbsoluteUrl:Ld,CSSConstants:sb,DOMSVGFactory:Xr,DrawLayer:Ae,FeatureTest:Se,fetchData:La,findContrastColor:rb,getDocument:Gd,getFilenameFromUrl:eb,getPdfFilenameFromUrl:nb,getRGB:Na,getUuid:Od,getXfaPageViewport:ib,GlobalWorkerOptions:Yi,ImageKind:Ir,InvalidPDFException:Hl,isDataScheme:Jr,isPdfFile:Jl,isValidExplicitDest:ub,MathClamp:Le,noContextMenu:un,normalizeUnicode:J0,OPS:Ta,OutputScale:Dn,PasswordResponses:Q0,PDFDataRangeTransport:Vd,PDFDateString:jl,PDFWorker:xa,PermissionFlag:$0,PixelsPerInch:As,RenderingCancelledException:Zl,renderRichText:Pd,ResponseException:Gr,setLayerDimensions:Xi,shadow:_t,SignatureExtractor:ps,stopEvent:ne,SupportedImageMimeTypes:Gl,TextLayer:Vr,TouchManager:eo,updateUrlHash:Nd,Util:rt,VerbosityLevel:$r,version:Cb,XfaLayer:Bd};const g_=Object.freeze(Object.defineProperty({__proto__:null,AbortException:mi,AnnotationEditorLayer:qn,AnnotationEditorParamsType:Dt,AnnotationEditorType:vt,AnnotationEditorUIManager:yi,AnnotationLayer:Kd,AnnotationMode:Vn,AnnotationType:le,CSSConstants:sb,ColorPicker:on,DOMSVGFactory:Xr,DrawLayer:Ae,FeatureTest:Se,GlobalWorkerOptions:Yi,ImageKind:Ir,InvalidPDFException:Hl,MathClamp:Le,OPS:Ta,OutputScale:Dn,PDFDataRangeTransport:Vd,PDFDateString:jl,PDFWorker:xa,PasswordResponses:Q0,PermissionFlag:$0,PixelsPerInch:As,RenderingCancelledException:Zl,ResponseException:Gr,SignatureExtractor:ps,SupportedImageMimeTypes:Gl,TextLayer:Vr,TouchManager:eo,Util:rt,VerbosityLevel:$r,XfaLayer:Bd,applyOpacity:ab,build:Tb,createValidAbsoluteUrl:Ld,fetchData:La,findContrastColor:rb,getDocument:Gd,getFilenameFromUrl:eb,getPdfFilenameFromUrl:nb,getRGB:Na,getUuid:Od,getXfaPageViewport:ib,isDataScheme:Jr,isPdfFile:Jl,isValidExplicitDest:ub,noContextMenu:un,normalizeUnicode:J0,renderRichText:Pd,setLayerDimensions:Xi,shadow:_t,stopEvent:ne,updateUrlHash:Nd,version:Cb},Symbol.toStringTag,{value:"Module"}));function Bb(h){var t,e,i="";if(typeof h=="string"||typeof h=="number")i+=h;else if(typeof h=="object")if(Array.isArray(h)){var a=h.length;for(t=0;t<a;t++)h[t]&&(e=Bb(h[t]))&&(i&&(i+=" "),i+=e)}else for(e in h)h[e]&&(i&&(i+=" "),i+=e);return i}function nc(){for(var h,t,e=0,i="",a=arguments.length;e<a;e++)(h=arguments[e])&&(t=Bb(h))&&(i&&(i+=" "),i+=t);return i}var y0=Object.prototype.hasOwnProperty;function b0(h,t,e){for(e of h.keys())if(wa(e,t))return e}function wa(h,t){var e,i,a;if(h===t)return!0;if(h&&t&&(e=h.constructor)===t.constructor){if(e===Date)return h.getTime()===t.getTime();if(e===RegExp)return h.toString()===t.toString();if(e===Array){if((i=h.length)===t.length)for(;i--&&wa(h[i],t[i]););return i===-1}if(e===Set){if(h.size!==t.size)return!1;for(i of h)if(a=i,a&&typeof a=="object"&&(a=b0(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(h.size!==t.size)return!1;for(i of h)if(a=i[0],a&&typeof a=="object"&&(a=b0(t,a),!a)||!wa(i[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(e===DataView){if((i=h.byteLength)===t.byteLength)for(;i--&&h.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(h)){if((i=h.byteLength)===t.byteLength)for(;i--&&h[i]===t[i];);return i===-1}if(!e||typeof h=="object"){i=0;for(e in h)if(y0.call(h,e)&&++i&&!y0.call(t,e)||!(e in t)||!wa(h[e],t[e]))return!1;return Object.keys(t).length===i}}return h!==h&&t!==t}function so(h){let t=!1;return{promise:new Promise((i,a)=>{h.then(o=>!t&&i(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const p_=["onCopy","onCut","onPaste"],m_=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],y_=["onFocus","onBlur"],b_=["onInput","onInvalid","onReset","onSubmit"],v_=["onLoad","onError"],A_=["onKeyDown","onKeyPress","onKeyUp"],S_=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],E_=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],w_=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],__=["onSelect"],C_=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],T_=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],x_=["onScroll"],R_=["onWheel"],M_=["onAnimationStart","onAnimationEnd","onAnimationIteration"],D_=["onTransitionEnd"],L_=["onToggle"],N_=["onChange"],O_=[...p_,...m_,...y_,...b_,...v_,...A_,...S_,...E_,...w_,...__,...C_,...T_,...x_,...R_,...M_,...D_,...N_,...L_];function Pb(h,t){const e={};for(const i of O_){const a=h[i];a&&(t?e[i]=(o=>a(o,t(i))):e[i]=a)}return e}var k_="Invariant failed";function Xt(h,t){if(!h)throw new Error(k_)}var od,v0;function B_(){if(v0)return od;v0=1;var h=function(){};return od=h,od}var P_=B_();const Ne=Yl(P_),Fb=P.createContext(null),F_="noopener noreferrer nofollow";class z_{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Xt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Xt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||F_,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Xt(this.pdfDocument),Xt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Xt(Array.isArray(e));const i=e[0];new Promise(a=>{Xt(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{a(o)}).catch(()=>{Xt(!1)}):typeof i=="number"?a(i):Xt(!1)}).then(a=>{const o=a+1;Xt(this.pdfViewer),Xt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;Xt(this.pdfViewer),Xt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function _a({children:h,type:t}){return B.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const A0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function I_(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function Ra(){return P.useReducer(I_,{value:void 0,error:void 0})}const ic=typeof window<"u",zb=ic&&window.location.protocol==="file:";function U_(h){return typeof h<"u"}function fs(h){return U_(h)&&h!==null}function H_(h){return typeof h=="string"}function j_(h){return h instanceof ArrayBuffer}function G_(h){return Xt(ic),h instanceof Blob}function Sd(h){return H_(h)&&/^data:/.test(h)}function S0(h){Xt(Sd(h));const[t="",e=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function q_(){return ic&&window.devicePixelRatio||1}const Ib="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function E0(){Ne(!zb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Ib}`)}function V_(){Ne(!zb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Ib}`)}function Es(h){h?.cancel&&h.cancel()}function Ed(h,t){return Object.defineProperty(h,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),h}function Ub(h){return h.name==="AbortException"||h.name==="RenderingCancelledException"}function Y_(h){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:X_}=g_,K_=(h,t)=>{switch(t){case A0.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");h(e);break}case A0.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");h(e);break}}};function w0(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const W_=P.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:v,onLoadSuccess:E,onPassword:S=K_,onSourceError:_,onSourceSuccess:w,options:x,renderMode:T,rotate:M,scale:N,...R},D){const[z,U]=Ra(),{value:q,error:V}=z,[Z,et]=Ra(),{value:J,error:ot}=Z,F=P.useRef(new z_),Y=P.useRef([]),nt=P.useRef(void 0),ct=P.useRef(void 0);l&&l!==nt.current&&w0(l)&&(Ne(!wa(l,nt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),nt.current=l),x&&x!==ct.current&&(Ne(!wa(x,ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ct.current=x);const yt=P.useRef({scrollPageIntoView:Gt=>{const{dest:qt,pageNumber:Vt,pageIndex:ue=Vt-1}=Gt;if(y){y({dest:qt,pageIndex:ue,pageNumber:Vt});return}const ke=Y.current[ue];if(ke){ke.scrollIntoView();return}Ne(!1,`An internal link leading to page ${Vt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(D,()=>({linkService:F,pages:Y,viewer:yt}),[]);function O(){w&&w()}function K(){V&&(Ne(!1,V.toString()),_&&_(V))}function tt(){U({type:"RESET"})}P.useEffect(tt,[l,U]);const it=P.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Sd(l)?{data:S0(l)}:(E0(),{url:l});if(l instanceof X_)return{range:l};if(j_(l))return{data:l};if(ic&&G_(l))return{data:await Y_(l)};if(Xt(typeof l=="object"),Xt(w0(l)),"url"in l&&typeof l.url=="string"){if(Sd(l.url)){const{url:Gt,...qt}=l;return{data:S0(Gt),...qt}}E0()}return l},[l]);P.useEffect(()=>{const Gt=so(it());return Gt.promise.then(qt=>{U({type:"RESOLVE",value:qt})}).catch(qt=>{U({type:"REJECT",error:qt})}),()=>{Es(Gt)}},[it,U]),P.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){K();return}O()}},[q]);function ut(){J&&(E&&E(J),Y.current=new Array(J.numPages),F.current.setDocument(J))}function dt(){ot&&(Ne(!1,ot.toString()),b&&b(ot))}P.useEffect(function(){et({type:"RESET"})},[et,q]),P.useEffect(function(){if(!q)return;const qt=x?{...q,...x}:q,Vt=Gd(qt);v&&(Vt.onProgress=v),S&&(Vt.onPassword=S);const ue=Vt;return ue.promise.then(ke=>{ue.destroyed||et({type:"RESOLVE",value:ke})}).catch(ke=>{ue.destroyed||et({type:"REJECT",error:ke})}),()=>{ue.destroy()}},[x,et,q]),P.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){dt();return}ut()}},[J]),P.useEffect(function(){F.current.setViewer(yt.current),F.current.setExternalLinkRel(a),F.current.setExternalLinkTarget(o)},[a,o]);const st=P.useCallback((Gt,qt)=>{Y.current[Gt]=qt},[]),Ct=P.useCallback(Gt=>{delete Y.current[Gt]},[]),Et=P.useMemo(()=>({imageResourcesPath:d,linkService:F.current,onItemClick:y,pdf:J,registerPage:st,renderMode:T,rotate:M,scale:N,unregisterPage:Ct}),[d,y,J,st,T,M,N,Ct]),Oe=P.useMemo(()=>Pb(R,()=>J),[R,J]);function Me(){function Gt(Vt){return!!Vt?.pdf}if(!Gt(Et))throw new Error("pdf is undefined");const qt=typeof t=="function"?t(Et):t;return B.jsx(Fb.Provider,{value:Et,children:qt})}function Pt(){return l?J==null?B.jsx(_a,{type:"loading",children:typeof f=="function"?f():f}):J===!1?B.jsx(_a,{type:"error",children:typeof i=="function"?i():i}):Me():B.jsx(_a,{type:"no-data",children:typeof p=="function"?p():p})}return B.jsx("div",{className:nc("react-pdf__Document",e),ref:u,...Oe,children:Pt()})});function Hb(){return P.useContext(Fb)}function jb(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var e=h.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(o){for(var l=0,u=e;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Gb=P.createContext(null);function sc(){return P.useContext(Gb)}function $_(){const h=Hb(),t=sc();Xt(t);const e={...h,...t},{filterAnnotations:i,imageResourcesPath:a,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:p,pdf:y,renderForms:b,rotate:v,scale:E=1}=e;Xt(y),Xt(p),Xt(o);const[S,_]=Ra(),{value:w,error:x}=S,T=P.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){w&&u&&u(w)}function N(){x&&(Ne(!1,x.toString()),l&&l(x))}P.useEffect(function(){_({type:"RESET"})},[_,p]),P.useEffect(function(){if(!p)return;const q=so(p.getAnnotations()),V=q;return q.promise.then(Z=>{_({type:"RESOLVE",value:Z})}).catch(Z=>{_({type:"REJECT",error:Z})}),()=>{Es(V)}},[_,p]),P.useEffect(()=>{if(w!==void 0){if(w===!1){N();return}M()}},[w]);function R(){f&&f()}function D(U){Ne(!1,`${U}`),d&&d(U)}const z=P.useMemo(()=>p.getViewport({scale:E,rotation:v}),[p,v,E]);return P.useEffect(function(){if(!y||!p||!o||!w)return;const{current:q}=T;if(!q)return;const V=z.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:y.annotationStorage,commentManager:null,div:q,l10n:null,linkService:o,page:p,structTreeLayer:null,viewport:V},et={annotations:i?i({annotations:w}):w,annotationStorage:y.annotationStorage,div:q,imageResourcesPath:a,linkService:o,page:p,renderForms:b,viewport:V};q.innerHTML="";try{new Kd(Z).render(et),R()}catch(J){D(J)}return()=>{}},[w,i,a,o,p,y,b,z]),B.jsx("div",{className:nc("react-pdf__Page__annotations","annotationLayer"),ref:T})}const qb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Q_=/^H(\d+)$/;function Z_(h){return h in qb}function ac(h){return"children"in h}function Vb(h){return ac(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function J_(h){const t={};if(ac(h)){const{role:e}=h,i=e.match(Q_);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(Z_(e)){const a=qb[e];a&&(t.role=a)}}return t}function Yb(h){const t={};if(ac(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Vb(h)){const[e]=h.children;if(e){const i=Yb(e);return{...t,...i}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function tC(h){return h?{...J_(h),...Yb(h)}:null}function Xb({className:h,node:t}){const e=P.useMemo(()=>tC(t),[t]),i=P.useMemo(()=>!ac(t)||Vb(t)?null:t.children.map((a,o)=>B.jsx(Xb,{node:a},o)),[t]);return B.jsx("span",{className:h,...e,children:i})}function eC(){const h=sc();Xt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=h,[i,a]=Ra(),{value:o,error:l}=i,{customTextRenderer:u,page:d}=h;function f(){o&&e&&e(o)}function p(){l&&(Ne(!1,l.toString()),t&&t(l))}return P.useEffect(function(){a({type:"RESET"})},[a,d]),P.useEffect(function(){if(u||!d)return;const b=so(d.getStructTree()),v=b;return b.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>Es(v)},[u,d,a]),P.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}f()}},[o]),o?B.jsx(Xb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const _0=Vn;function nC(h){const t=sc();Xt(t);const e={...t,...h},{_className:i,canvasBackground:a,devicePixelRatio:o=q_(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:p,pageColors:y,rotate:b,scale:v}=e,{canvasRef:E}=h;Xt(d);const S=P.useRef(null);function _(){d&&u&&u(Ed(d,v))}function w(N){Ub(N)||(Ne(!1,N.toString()),l&&l(N))}const x=P.useMemo(()=>d.getViewport({scale:v*o,rotation:b}),[o,d,b,v]),T=P.useMemo(()=>d.getViewport({scale:v,rotation:b}),[d,b,v]);P.useEffect(function(){if(!d)return;d.cleanup();const{current:R}=S;if(!R)return;R.width=x.width,R.height=x.height,R.style.width=`${Math.floor(T.width)}px`,R.style.height=`${Math.floor(T.height)}px`,R.style.visibility="hidden";const D={annotationMode:f?_0.ENABLE_FORMS:_0.ENABLE,canvas:R,canvasContext:R.getContext("2d",{alpha:!1}),pageColors:y,viewport:x};a&&(D.background=a);const z=d.render(D),U=z;return z.promise.then(()=>{R.style.visibility="",_()}).catch(w),()=>Es(U)},[a,d,y,f,x,T]);const M=P.useCallback(()=>{const{current:N}=S;N&&(N.width=0,N.height=0)},[]);return P.useEffect(()=>M,[M]),B.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:jb(E,S),style:{display:"block",userSelect:"none"},children:p?B.jsx(eC,{}):null})}function iC(h){return"str"in h}const sC=new Set(["base","embed","iframe","link","meta","object","script","style","template"]),aC=new Set(["action","formaction","href","poster","src","xlink:href"]);function rC(h){let t="";for(const e of h){const i=e.charCodeAt(0);i<=32||i===127||(t+=e.toLowerCase())}return t.startsWith("javascript:")||t.startsWith("vbscript:")}function oC(h){return h.nodeType===Node.ELEMENT_NODE}function Kb(h){return oC(h)&&h instanceof HTMLElement}function lC(h){return Kb(h)&&sC.has(h.tagName.toLowerCase())}function cC(h){const t=document.createElement(h.tagName.toLowerCase());return Array.from(h.attributes).forEach(e=>{const i=e.name.toLowerCase();i.startsWith("on")||i==="srcdoc"||aC.has(i)&&rC(e.value)||t.setAttribute(e.name,e.value)}),Array.from(h.childNodes).forEach(e=>{t.append(Wb(e))}),t}function Wb(h){var t;return Kb(h)&&!lC(h)?cC(h):document.createTextNode((t=h.textContent)!==null&&t!==void 0?t:"")}function uC(h,t){const e=document.createElement("template");e.innerHTML=t;const i=document.createDocumentFragment();Array.from(e.content.childNodes).forEach(a=>{i.append(Wb(a))}),h.replaceChildren(i)}function hC(){const h=sc();Xt(h);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:f,scale:p}=h;Xt(l);const[y,b]=Ra(),{value:v,error:E}=y,S=P.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){v&&i&&i(v)}function w(){E&&(Ne(!1,E.toString()),e&&e(E))}P.useEffect(function(){b({type:"RESET"})},[l,b]),P.useEffect(function(){if(!l)return;const z=so(l.getTextContent()),U=z;return z.promise.then(q=>{b({type:"RESOLVE",value:q})}).catch(q=>{b({type:"REJECT",error:q})}),()=>Es(U)},[l,b]),P.useEffect(()=>{if(v!==void 0){if(v===!1){w();return}_()}},[v]);const x=P.useCallback(()=>{o&&o()},[o]),T=P.useCallback(D=>{Ub(D)||(Ne(!1,D.toString()),a&&a(D))},[a]);function M(){const D=S.current;D&&D.classList.add("selecting")}function N(){const D=S.current;D&&D.classList.remove("selecting")}const R=P.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);return P.useLayoutEffect(function(){if(!l||!v)return;const{current:z}=S;if(!z)return;z.innerHTML="";const U=l.streamTextContent({includeMarkedContent:!0}),q={container:z,textContentSource:U,viewport:R},V=new Vr(q),Z=V;return V.render().then(()=>{const et=document.createElement("div");et.className="endOfContent",z.append(et);const J=z.querySelectorAll('[role="presentation"]');if(t){let ot=0;v.items.forEach((F,Y)=>{if(!iC(F))return;const nt=J[ot];if(!nt)return;const ct=t({pageIndex:u,pageNumber:d,itemIndex:Y,...F});uC(nt,ct),ot+=F.str&&F.hasEOL?2:1})}x()}).catch(T),()=>Es(Z)},[t,T,x,l,u,d,v,R]),B.jsx("div",{className:nc("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:M,ref:S})}const C0=1;function dC(h){const e={...Hb(),...h},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:f,customTextRenderer:p,devicePixelRatio:y,error:b="Failed to load the page.",filterAnnotations:v,height:E,inputRef:S,loading:_="Loading page",noData:w="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:N,onGetTextError:R,onGetTextSuccess:D,onLoadError:z,onLoadSuccess:U,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:V,onRenderError:Z,onRenderSuccess:et,onRenderTextLayerError:J,onRenderTextLayerSuccess:ot,pageColors:F,pageIndex:Y,pageNumber:nt,pdf:ct,registerPage:yt,renderAnnotationLayer:O=!0,renderForms:K=!1,renderMode:tt="canvas",renderTextLayer:it=!0,rotate:ut,scale:dt=C0,unregisterPage:st,width:Ct,...Et}=e,[Oe,Me]=Ra(),{value:Pt,error:Gt}=Oe,qt=P.useRef(null);Xt(ct);const Vt=fs(nt)?nt-1:Y??null,ue=nt??(fs(Y)?Y+1:null),ke=ut??(Pt?Pt.rotate:null),Ie=P.useMemo(()=>{if(!Pt)return null;let Ln=1;const Kn=dt??C0;if(Ct||E){const Nn=Pt.getViewport({scale:1,rotation:ke});Ct?Ln=Ct/Nn.width:E&&(Ln=E/Nn.height)}return Kn*Ln},[E,Pt,ke,dt,Ct]);P.useEffect(function(){return()=>{fs(Vt)&&a&&st&&st(Vt)}},[a,ct,Vt,st]);function Oa(){if(U){if(!Pt||!Ie)return;U(Ed(Pt,Ie))}if(a&&yt){if(!fs(Vt)||!qt.current)return;yt(Vt,qt.current)}}function ka(){Gt&&(Ne(!1,Gt.toString()),z&&z(Gt))}P.useEffect(function(){Me({type:"RESET"})},[Me,ct,Vt]),P.useEffect(function(){if(!ct||!ue)return;const Kn=so(ct.getPage(ue)),Nn=Kn;return Kn.promise.then(Ba=>{Me({type:"RESOLVE",value:Ba})}).catch(Ba=>{Me({type:"REJECT",error:Ba})}),()=>Es(Nn)},[Me,ct,ue]),P.useEffect(()=>{if(Pt!==void 0){if(Pt===!1){ka();return}Oa()}},[Pt,Ie]);const Ki=P.useMemo(()=>fs(Vt)&&ue&&fs(ke)&&fs(Ie)?{_className:i,canvasBackground:o,customTextRenderer:p,devicePixelRatio:y,filterAnnotations:v,onGetAnnotationsError:x,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:N,onGetTextError:R,onGetTextSuccess:D,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:V,onRenderError:Z,onRenderSuccess:et,onRenderTextLayerError:J,onRenderTextLayerSuccess:ot,page:Pt,pageColors:F,pageIndex:Vt,pageNumber:ue,renderForms:K,renderTextLayer:it,rotate:ke,scale:Ie}:null,[i,o,p,y,v,x,T,M,N,R,D,q,V,Z,et,J,ot,Pt,F,Vt,ue,K,it,ke,Ie]),rc=P.useMemo(()=>Pb(Et,()=>Pt&&(Ie?Ed(Pt,Ie):void 0)),[Et,Pt,Ie]),Rs=`${Vt}@${Ie}/${ke}`;function Be(){switch(tt){case"custom":return Xt(f),B.jsx(f,{},`${Rs}_custom`);case"none":return null;default:return B.jsx(nC,{canvasRef:l},`${Rs}_canvas`)}}function oc(){return it?B.jsx(hC,{},`${Rs}_text`):null}function ao(){return O?B.jsx($_,{},`${Rs}_annotations`):null}function ro(){function Ln(Nn){return!!Nn?.page}if(!Ln(Ki))throw new Error("page is undefined");const Kn=typeof u=="function"?u(Ki):u;return B.jsxs(Gb.Provider,{value:Ki,children:[Be(),oc(),ao(),Kn]})}function Ms(){return ue?ct===null||Pt===void 0||Pt===null?B.jsx(_a,{type:"loading",children:typeof _=="function"?_():_}):ct===!1||Pt===!1?B.jsx(_a,{type:"error",children:typeof b=="function"?b():b}):ro():B.jsx(_a,{type:"no-data",children:typeof w=="function"?w():w})}return B.jsx("div",{className:nc(i,d),"data-page-number":ue,ref:jb(S,qt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ie}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...rc,children:Ms()})}V_();Yi.workerSrc="pdf.worker.mjs";Yi.workerSrc="https://unpkg.com/pdfjs-dist@5.4.296/build/pdf.worker.min.mjs";const T0=[{label:"AI Focused Systems Engineer (Main)",file:"/docs/resume/Mikes_Resume2026.pdf"},{label:"AI Systems Engineer",file:"/docs/resume/Mikes_Resume_2026_AI_Systems_Engineer.pdf"},{label:"AI Embedded Systems Engineer",file:"/docs/resume/Mikes_Resume_2026_AI_Embedded_Systems_Engineer.pdf"},{label:"Full-Stack Web Developer",file:"/docs/resume/Mikes_Resume_2026_Full_Stack_Web_Developer.pdf"}];function fC(){const[h,t]=P.useState(T0[0]),e=P.useRef(null),i=P.useRef(null),[a,o]=P.useState(600),[l,u]=P.useState(null);return P.useEffect(()=>{const d=()=>{const f=window.matchMedia("(max-width: 768px)").matches,p=e.current?.offsetHeight||0,b=document.querySelector(".footer")?.offsetHeight||60,E=window.innerHeight-p-b-24;if(f){const S=i.current?.clientWidth||window.innerWidth;u(Math.max(240,Math.floor(S-16))),o(null)}else u(null),o(Math.max(240,Math.floor(E)))};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),B.jsxs("div",{className:"resume-page container",children:[B.jsx("div",{ref:e,children:B.jsx("h2",{className:"resume-page-title",children:"Resume"})}),B.jsxs("div",{className:"card resume-preview-card",children:[B.jsxs("div",{className:"card-title",children:["Resume Selected : ",h.label]}),B.jsxs("div",{className:"resume-layout",children:[B.jsx("div",{className:"resume-pdfcol",ref:i,children:B.jsx("div",{className:"paper",children:B.jsx(W_,{file:h.file,loading:B.jsx("div",{className:"muted",children:"Loading"}),error:B.jsx("div",{className:"muted",children:"PDF failed to load. Check file path."}),children:B.jsx(dC,{pageNumber:1,...l?{width:l}:{height:a},renderAnnotationLayer:!1,renderTextLayer:!1})})})}),B.jsxs("aside",{className:"resume-sidecol",children:[B.jsx("div",{className:"resume-side-title",children:"Select a resume"}),B.jsx("div",{className:"resume-sidegrid",children:T0.map(d=>B.jsxs("div",{className:"resume-tile",children:[B.jsx("div",{className:"resume-tile-title",children:d.label}),B.jsxs("div",{className:"resume-btn-row",children:[B.jsx("button",{className:"btn",type:"button",onClick:()=>t(d),children:"Quick view"}),B.jsx("a",{className:"btn ghost",href:d.file,target:"_blank",rel:"noreferrer",children:"Open"}),B.jsx("a",{className:"btn ghost",href:d.file,download:!0,children:"Download"})]})]},d.file))})]})]})]})]})}const gC=[{title:"Languages",items:["Python","C","C++","SQL","JavaScript","PHP","Bash"]},{title:"Frontend",items:["React","Router","Tailwind","HTML","CSS","Responsive"]},{title:"Backend",items:["Node","Express","REST APIs","JWT","Auth","MVC"]},{title:"Databases",items:["MySQL","MongoDB","SQLite","Joins","Indexing","Normalization"]},{title:"AI / ML",items:["NumPy","Pandas","Scikit-learn","Model Eval","Neural Nets"]},{title:"Data Work",items:["ETL","Data Clean","JSON","CSV","API Parse"]},{title:"Cloud",items:["AWS","Lambda","S3","Firehose","Cloud Design"]},{title:"IoT",items:["AWS IoT","MQTT","Node-RED","Provisioning","X.509"]},{title:"Embedded",items:["STM32","ARM Cortex-M","Bare Metal","FreeRTOS","Interrupts"]},{title:"Interfaces",items:["GPIO","I2C","UART","SPI","ADC","PWM"]},{title:"Build",items:["Makefiles","GCC","Linker","Toolchain","ELF"]},{title:"Linux",items:["Embedded Linux","Yocto","Buildroot","Shell","Permissions"]},{title:"Networking",items:["TCP/IP","OSI","Subnetting","VLANs","IPv6","Routing"]},{title:"Security",items:["ACLs","SSH","Certificates","Hashing","Secure Auth"]},{title:"Dev Tooling",items:["Git","GitHub","npm","VS Code","Debugging","CLI"]},{title:"Architecture",items:["Client-Server","Layered","Event Driven","REST Design","Systems"]}];function pC(){return P.useEffect(()=>(document.body.classList.add("no-scroll"),()=>document.body.classList.remove("no-scroll")),[]),B.jsx("main",{className:"quick-glance-page",children:B.jsxs("div",{className:"quick-glance",children:[B.jsxs("header",{className:"quick-glance-header",children:[B.jsx("h1",{className:"quick-glance-title",children:"Quick Glance"}),B.jsx("div",{className:"card",children:B.jsx("p",{className:"quick-glance-description",children:"This section provides a high-level overview of my technical capabilities for quick review. Detailed implementations and applied architecture decisions can be explored in the Projects section. Portfolio completion target: March 20th, 2026."})})]}),B.jsx("hr",{className:"quick-glance-divider"}),B.jsx("div",{className:"quick-glance-grid",children:gC.map(h=>B.jsxs("section",{className:"quick-glance-card",children:[B.jsx("h2",{className:"quick-glance-heading",children:h.title}),B.jsx("ul",{className:"quick-glance-list",children:h.items.map(t=>B.jsx("li",{className:"quick-glance-item",children:t},t))})]},h.title))})]})})}const cn={WEB:"web",EMBEDDED:"embedded",AI:"ai"},Zd={[cn.WEB]:{label:"Web Development",accent:"web"},[cn.EMBEDDED]:{label:"Embedded / IoT",accent:"embedded"},[cn.AI]:{label:"AI Engineering",accent:"ai"}},mC=[{id:"python-algorithms-suite",category:cn.AI,title:"Python Algorithms & Interactive System",subtitle:"CLI Games, String Processing & Text Analytics",summary:"A multi-part Python project featuring algorithmic string manipulation, a 2D grid-based game engine (Tic-Tac-Toe), and a text analytics pipeline that generates dynamic HTML reports with hidden message extraction.",status:"Complete",skills:["Algorithm Design","String Processing","2D Data Structures","State Management","File I/O","Text Normalization","Word Frequency Analysis","HTML Generation","CLI Interface Design"],tech:["Python"],links:{repo:"https://github.com/Mike-Lalonde/python-algorithms-games-text-analytics",demo:"/projects/python-suite/whale-of-a-tale-demo.mp4",writeup:null},media:{screenshots:["/projects/python-suite/tic-tac-toe-1.png","/projects/python-suite/tic-tac-toe-2.png","/projects/python-suite/whale-report-1.png","/projects/python-suite/whale-report-2.png"],embedUrl:null}},{id:"my-first-neural-network",category:cn.AI,title:"My First Neural Network (NumPy)",subtitle:"Feedforward NN built from scratch on MNIST",summary:"A from-scratch neural network implemented using NumPy and SciPy to demonstrate forward propagation, backpropagation, weight updates, and model persistence without using high-level frameworks like PyTorch or TensorFlow.",status:"Complete",skills:["Neural Network Fundamentals","Backpropagation","Matrix Multiplication","Gradient-Based Optimization","Model Persistence"],tech:["Python","NumPy","SciPy","tqdm"],links:{repo:"https://github.com/Mike-Lalonde/myfirstneuralnetwork",demo:null,writeup:null},media:{screenshots:[],embedUrl:null}},{id:"mastermind",category:cn.AI,title:"Mastermind",subtitle:"Rule evaluation  State management  Modular design",summary:"Interactive implementation of the Mastermind game demonstrating algorithmic rule evaluation, state management, modular Python architecture, and structured game loop control.",status:"Complete",skills:["Algorithm Design","State Management","Rule Evaluation","Modular Architecture","Game Loop Control"],tech:["Python"],links:{repo:"https://github.com/Mike-Lalonde/mastermind",demo:"/videos/mastermind-demo.mp4",writeup:null},media:{screenshots:[],embedUrl:null}},{id:"chip8-emulator",category:cn.EMBEDDED,title:"CHIP-8 Emulator",subtitle:"CPU  Memory  Instruction decoding",summary:"Systems-style project demonstrating CPU, memory, instruction decoding, and testing.",status:"Write-up + screenshots coming soon",skills:["Instruction decoding","Memory model","Testing","Debugging"],tech:["C/C++","SDL (optional)","Unit tests"],links:{repo:"https://github.com/Mike-Lalonde/chip8-emulator",demo:null,writeup:null},media:{screenshots:[],embedUrl:null}},{id:"mandelbrot",category:cn.AI,title:"Mandelbrot Visualizations",subtitle:"Numerical computation  Complex plane mapping",summary:"Implementation of Mandelbrot set visualizations using iterative escape-time algorithms and complex number computation. Demonstrates numerical programming, coordinate transformations, and translating mathematical models into structured Python code and visual output.",status:"Complete",skills:["Numerical Computation","Complex Numbers","Coordinate Mapping","Visualization","Algorithmic Efficiency"],tech:["Python"],links:{repo:"https://github.com/Mike-Lalonde/mandelbrot",demo:null,writeup:null},media:{screenshots:[],embedUrl:null}},{id:"web-placeholder",category:cn.WEB,title:"Web Projects (Coming Next)",subtitle:"React + Vite portfolio work and web apps",summary:"Placeholder entry while I migrate and polish my web development projects for reliable demos.",status:"In progress",skills:["UI Layout","Component Design","Routing","Responsive Design"],tech:["React","Vite","CSS"],links:{repo:null,demo:null,writeup:null},media:{screenshots:[],embedUrl:null}}];function yC({value:h,onChange:t}){const e=[cn.AI,cn.EMBEDDED,cn.WEB];return B.jsx("div",{className:"proj-tabs",children:e.map(i=>{const a=Zd[i],o=h===i;return B.jsx("button",{className:o?`proj-tab active accent-${a.accent}`:`proj-tab accent-${a.accent}`,onClick:()=>t(i),type:"button",children:a.label},i)})})}function bC({items:h,selectedId:t,onSelect:e}){return B.jsx("div",{className:"proj-grid",children:h.map(i=>{const a=i.id===t;return B.jsxs("button",{className:a?"proj-tile active":"proj-tile",onClick:()=>e(i.id),type:"button",children:[B.jsx("div",{className:"proj-tile-title",children:i.title}),B.jsx("div",{className:"proj-tile-sub",children:i.subtitle||i.status})]},i.id)})})}function vC({children:h,accent:t}){return B.jsx("span",{className:`chip accent-${t}`,children:h})}function AC({project:h}){const t=Zd[h.category]?.accent||"web",[e,i]=P.useState(!1);P.useRef(null);const a=h.media?.screenshots||[],[o,l]=P.useState(0),[u,d]=P.useState(!1);return P.useEffect(()=>{l(0),d(!1),i(!1)},[h.id]),B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"proj-header-block",children:[B.jsxs("div",{className:"proj-detail-head",children:[B.jsxs("div",{children:[B.jsx("div",{className:"card-title",children:h.title}),B.jsx("div",{className:"card-subtitle",children:h.subtitle||h.status})]}),B.jsx("div",{className:"proj-detail-status",children:h.status})]}),B.jsx("p",{className:"muted proj-summary",children:h.summary})]}),B.jsxs("div",{className:"card",children:[B.jsx("div",{className:"proj-section-title",children:"Preview"}),B.jsxs("div",{className:"proj-preview",children:[B.jsx("div",{className:"preview-main",children:e&&h.links?.demo?B.jsx("video",{controls:!0,className:"preview-video",children:B.jsx("source",{src:h.links.demo,type:"video/mp4"})}):a.length>0?B.jsx("button",{type:"button",className:"shot-main",onClick:()=>d(!0),children:B.jsx("img",{src:a[o],alt:"",className:"shot-main-img"})}):B.jsx("div",{className:"muted",children:"Preview coming soon."})}),a.length>1&&B.jsx("div",{className:"shot-strip",children:a.map((f,p)=>B.jsx("button",{className:p===o?"shot-thumb active":"shot-thumb",onClick:()=>{l(p),i(!1)},children:B.jsx("img",{src:f,className:"shot-thumb-img",alt:""})},p))})]}),B.jsxs("div",{className:"proj-actions proj-actions-compact",children:[h.links?.repo?B.jsx("a",{className:"btn btn-compact",href:h.links.repo,target:"_blank",rel:"noreferrer",children:"Repo"}):B.jsx("span",{className:"btn btn-compact disabled",children:"Repo"}),h.links?.demo?B.jsx("button",{className:"btn btn-compact",type:"button",onClick:()=>i(f=>!f),children:e?"Hide Demo":"Live Demo"}):B.jsx("span",{className:"btn btn-compact disabled",children:"Live Demo"}),h.links?.writeup?B.jsx("a",{className:"btn btn-compact",href:h.links.writeup,target:"_blank",rel:"noreferrer",children:"Case Study"}):B.jsx("span",{className:"btn btn-compact disabled",children:"Case Study"})]})]}),B.jsxs("div",{className:"proj-section",children:[B.jsx("div",{className:"proj-section-title",children:"Skills / Knowledge"}),B.jsx("div",{className:"chips chips-compact",children:(h.skills||[]).map(f=>B.jsx(vC,{accent:t,children:f},f))})]}),B.jsxs("div",{className:"proj-section",children:[B.jsx("div",{className:"proj-section-title",children:"Tech"}),B.jsx("div",{className:"chips chips-compact",children:(h.tech||[]).map(f=>B.jsx("span",{className:"chip subtle",children:f},f))})]}),u&&a.length>0&&B.jsx("div",{className:"lightbox",onClick:()=>d(!1),children:B.jsxs("div",{className:"lightbox-panel",onClick:f=>f.stopPropagation(),children:[B.jsx("button",{type:"button",className:"lightbox-close",onClick:()=>d(!1),children:""}),B.jsx("img",{src:a[o],alt:"",className:"lightbox-img"})]})})]})}function SC(){const[h,t]=P.useState(cn.AI),e=P.useMemo(()=>mC.filter(l=>l.category===h),[h]),[i,a]=P.useState("");P.useEffect(()=>{a(e.length>0?e[0].id:"")},[e]);const o=P.useMemo(()=>e.find(l=>l.id===i),[e,i]);return B.jsxs("div",{className:"stack projects-page",children:[B.jsx("h2",{children:"Projects"}),B.jsx("p",{children:"Select a project to view the skills/knowledge used and supporting evidence without leaving the page."}),B.jsx(yC,{value:h,onChange:t}),B.jsxs("div",{className:"proj-vertical",children:[B.jsx("div",{className:"proj-viewport",children:o?B.jsx(AC,{project:o}):B.jsx("div",{className:"card",children:"No project selected."})}),B.jsxs("div",{className:"card proj-left",children:[B.jsx("div",{className:"card-title",children:Zd[h].label}),B.jsx("div",{className:"card-subtitle",children:"Click a project to view details"}),B.jsx(bC,{items:e.slice(0,12),selectedId:o?.id,onSelect:a})]})]})]})}function EC(){return B.jsxs("div",{className:"app",children:[B.jsx(t1,{}),B.jsx("main",{children:B.jsxs(SE,{children:[B.jsx(gs,{path:"/",element:B.jsx(T1,{})}),B.jsx(gs,{path:"/about",element:B.jsx(x1,{})}),B.jsx(gs,{path:"/resume",element:B.jsx(fC,{})}),B.jsx(gs,{path:"/quick-glance",element:B.jsx(pC,{})}),B.jsx(gs,{path:"/projects",element:B.jsx(SC,{})}),B.jsx(gs,{path:"*",element:B.jsx(vE,{to:"/",replace:!0})})]})}),B.jsx(e1,{})]})}wS.createRoot(document.getElementById("root")).render(B.jsx(pS.StrictMode,{children:B.jsx(VE,{children:B.jsx(EC,{})})}));
